"use strict";(self.webpackChunkFinance=self.webpackChunkFinance||[]).push([[179],{808:(Os,Qn,Ve)=>{Ve.d(Qn,{$:()=>Ri,A:()=>se,G:()=>Pt,K:()=>A_,L:()=>sl,N:()=>Us,P:()=>ip,R:()=>LT,U:()=>ge,V:()=>Uf,W:()=>N_,X:()=>He,Y:()=>li,Z:()=>Au,_:()=>lo,a:()=>Y_,a0:()=>Ie,a1:()=>er,a2:()=>_a,a3:()=>cl,a4:()=>Hf,a5:()=>vs,a6:()=>Su,a7:()=>Es,a8:()=>_T,a9:()=>yT,aA:()=>ve,aB:()=>$t,aC:()=>te,aD:()=>WT,aE:()=>B,aF:()=>$e,aG:()=>up,aH:()=>Ia,aI:()=>fy,aJ:()=>Dn,aN:()=>Pi,aQ:()=>kn,aa:()=>Kx,ab:()=>Qx,ac:()=>Zx,ad:()=>Yx,ae:()=>Xx,af:()=>eM,ag:()=>$_,ah:()=>tM,ak:()=>qi,al:()=>vT,am:()=>ET,ap:()=>Mr,aq:()=>IT,as:()=>CT,at:()=>Zf,au:()=>Jt,av:()=>ne,aw:()=>G,ax:()=>ht,ay:()=>Sd,az:()=>bl,b:()=>ld,c:()=>sp,d:()=>$T,e:()=>op,f:()=>lp,g:()=>Tl,h:()=>Ad,i:()=>hd,j:()=>Cl,k:()=>Vu,l:()=>ay,m:()=>rC,p:()=>qt,r:()=>Mu,s:()=>lM,u:()=>BT});var b=Ve(861),q=Ve(90),k=Ve(881),Se=Ve(877),Rt=Ve(582),an=Ve(859);const qt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},se={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pt=function Ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Zn=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_t=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new Se.Yd("@firebase/auth");function mn(p,...c){Ge.logLevel<=Se.in.ERROR&&Ge.error(`Auth (${k.SDK_VERSION}): ${p}`,...c)}function ht(p,...c){throw ot(p,...c)}function $t(p,...c){return ot(p,...c)}function Ti(p,c,h){const g=Object.assign(Object.assign({},Zn()),{[c]:h});return new q.LL("auth","Firebase",g).create(c,{appName:p.name})}function jn(p,c,h){if(!(c instanceof h))throw h.name!==c.constructor.name&&ht(p,"argument-error"),Ti(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(p,...c){if("string"!=typeof p){const h=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(h,...g)}return _t.create(p,...c)}function te(p,c,...h){if(!p)throw ot(c,...h)}function wt(p){const c="INTERNAL ASSERTION FAILED: "+p;throw mn(c),new Error(c)}function Jt(p,c){p||wt(c)}function Cn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function bn(){return"http:"===ds()||"https:"===ds()}function ds(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class ri{constructor(c,h){this.shortDelay=c,this.longDelay=h,Jt(h>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function hs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bn()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function so(p,c){Jt(p.emulator,"Emulator should always be set here");const{url:h}=p.emulator;return c?`${h}${c.startsWith("/")?c.slice(1):c}`:h}class ${static initialize(c,h,g){this.fetchImpl=c,h&&(this.headersImpl=h),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const W={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},z=new ri(3e4,6e4);function U(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function Z(p,c,h,g){return K.apply(this,arguments)}function K(){return(K=(0,b.Z)(function*(p,c,h,g,y={}){return ce(p,y,(0,b.Z)(function*(){let I={},N={};g&&("GET"===c?N=g:I={body:JSON.stringify(g)});const j=(0,q.xO)(Object.assign({key:p.config.apiKey},N)).slice(1),J=yield p._getAdditionalHeaders();return J["Content-Type"]="application/json",p.languageCode&&(J["X-Firebase-Locale"]=p.languageCode),$.fetch()(It(p,p.config.apiHost,h,j),Object.assign({method:c,headers:J,referrerPolicy:"no-referrer"},I))}))})).apply(this,arguments)}function ce(p,c,h){return ct.apply(this,arguments)}function ct(){return(ct=(0,b.Z)(function*(p,c,h){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},W),c);try{const y=new Kt(p),I=yield Promise.race([h(),y.promise]);y.clearNetworkTimeout();const N=yield I.json();if("needConfirmation"in N)throw un(p,"account-exists-with-different-credential",N);if(I.ok&&!("errorMessage"in N))return N;{const j=I.ok?N.errorMessage:N.error.message,[J,Ce]=j.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===J)throw un(p,"credential-already-in-use",N);if("EMAIL_EXISTS"===J)throw un(p,"email-already-in-use",N);if("USER_DISABLED"===J)throw un(p,"user-disabled",N);const Fe=g[J]||J.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw Ti(p,Fe,Ce);ht(p,Fe)}}catch(y){if(y instanceof q.ZR)throw y;ht(p,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function ue(p,c,h,g){return Me.apply(this,arguments)}function Me(){return(Me=(0,b.Z)(function*(p,c,h,g,y={}){const I=yield Z(p,c,h,g,y);return"mfaPendingCredential"in I&&ht(p,"multi-factor-auth-required",{_serverResponse:I}),I})).apply(this,arguments)}function It(p,c,h,g){const y=`${c}${h}?${g}`;return p.config.emulator?so(p.config,y):`${p.config.apiScheme}://${y}`}function ln(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((h,g)=>{this.timer=setTimeout(()=>g($t(this.auth,"network-request-failed")),z.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function un(p,c,h){const g={appName:p.name};h.email&&(g.email=h.email),h.phoneNumber&&(g.phoneNumber=h.phoneNumber);const y=$t(p,c,g);return y.customData._tokenResponse=h,y}function Hn(p){return void 0!==p&&void 0!==p.getResponse}function Yn(p){return void 0!==p&&void 0!==p.enterprise}class dr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===c)return ln(h.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function $i(){return($i=(0,b.Z)(function*(p){return(yield Z(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fs(p,c){return ft.apply(this,arguments)}function ft(){return(ft=(0,b.Z)(function*(p,c){return Z(p,"GET","/v2/recaptchaConfig",U(p,c))})).apply(this,arguments)}function Vs(){return(Vs=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function ps(){return(ps=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ci(){return(Ci=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function bi(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Nt(){return(Nt=(0,b.Z)(function*(p,c=!1){const h=(0,q.m9)(p),g=yield h.getIdToken(c),y=An(g);te(y&&y.exp&&y.auth_time&&y.iat,h.auth,"internal-error");const I="object"==typeof y.firebase?y.firebase:void 0,N=I?.sign_in_provider;return{claims:y,token:g,authTime:bi(si(y.auth_time)),issuedAtTime:bi(si(y.iat)),expirationTime:bi(si(y.exp)),signInProvider:N||null,signInSecondFactor:I?.sign_in_second_factor||null}})).apply(this,arguments)}function si(p){return 1e3*Number(p)}function An(p){const[c,h,g]=p.split(".");if(void 0===c||void 0===h||void 0===g)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,q.tV)(h);return y?JSON.parse(y):(mn("Failed to decode base64 JWT payload"),null)}catch(y){return mn("Caught error parsing JWT payload as JSON",y?.toString()),null}}function cn(p,c){return _n.apply(this,arguments)}function _n(){return(_n=(0,b.Z)(function*(p,c,h=!1){if(h)return c;try{return yield c}catch(g){throw g instanceof q.ZR&&function gs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class ji{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var h;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const y=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var h=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,b.Z)(function*(){yield h.iteration()}),g)}iteration(){var c=this;return(0,b.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&c.schedule(!0))}c.schedule()})()}}class ms{constructor(c,h){this.createdAt=c,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=bi(this.lastLoginAt),this.creationTime=bi(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(p){return zn.apply(this,arguments)}function zn(){return zn=(0,b.Z)(function*(p){var c;const h=p.auth,g=yield p.getIdToken(),y=yield cn(p,function wr(p,c){return Ci.apply(this,arguments)}(h,{idToken:g}));te(y?.users.length,h,"internal-error");const I=y.users[0];p._notifyReloadListener(I);const N=null!==(c=I.providerUserInfo)&&void 0!==c&&c.length?function Po(p){return p.map(c=>{var{providerId:h}=c,g=(0,Rt._T)(c,["providerId"]);return{providerId:h,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}(I.providerUserInfo):[],j=function nl(p,c){return[...p.filter(g=>!c.some(y=>y.providerId===g.providerId)),...c]}(p.providerData,N),Fe=!!p.isAnonymous&&!(p.email&&I.passwordHash||j?.length),At={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:j,metadata:new ms(I.createdAt,I.lastLoginAt),isAnonymous:Fe};Object.assign(p,At)}),zn.apply(this,arguments)}function Di(){return(Di=(0,b.Z)(function*(p){const c=(0,q.m9)(p);yield Xn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Bs(){return(Bs=(0,b.Z)(function*(p,c){const h=yield ce(p,{},(0,b.Z)(function*(){const g=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:I}=p.config,N=It(p,y,"/v1/token",`key=${I}`),j=yield p._getAdditionalHeaders();return j["Content-Type"]="application/x-www-form-urlencoded",$.fetch()(N,{method:"POST",headers:j,body:g})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function R(){return(R=(0,b.Z)(function*(p,c){return Z(p,"POST","/v2/accounts:revokeToken",U(p,c))})).apply(this,arguments)}class w{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){te(c.idToken,"internal-error"),te(typeof c.idToken<"u","internal-error"),te(typeof c.refreshToken<"u","internal-error");const h="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Iu(p){const c=An(p);return te(c,"internal-error"),te(typeof c.exp<"u","internal-error"),te(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,h)}getToken(c,h=!1){var g=this;return(0,b.Z)(function*(){return te(!g.accessToken||g.refreshToken,c,"user-token-expired"),h||!g.accessToken||g.isExpired?g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null:g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,h){var g=this;return(0,b.Z)(function*(){const{accessToken:y,refreshToken:I,expiresIn:N}=yield function da(p,c){return Bs.apply(this,arguments)}(c,h);g.updateTokensAndExpiration(y,I,Number(N))})()}updateTokensAndExpiration(c,h,g){this.refreshToken=h||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,h){const{refreshToken:g,accessToken:y,expirationTime:I}=h,N=new w;return g&&(te("string"==typeof g,"internal-error",{appName:c}),N.refreshToken=g),y&&(te("string"==typeof y,"internal-error",{appName:c}),N.accessToken=y),I&&(te("number"==typeof I,"internal-error",{appName:c}),N.expirationTime=I),N}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new w,this.toJSON())}_performRefresh(){return wt("not implemented")}}function C(p,c){te("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class E{constructor(c){var{uid:h,auth:g,stsTokenManager:y}=c,I=(0,Rt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ji(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=g,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=I.displayName||null,this.email=I.email||null,this.emailVerified=I.emailVerified||!1,this.phoneNumber=I.phoneNumber||null,this.photoURL=I.photoURL||null,this.isAnonymous=I.isAnonymous||!1,this.tenantId=I.tenantId||null,this.providerData=I.providerData?[...I.providerData]:[],this.metadata=new ms(I.createdAt||void 0,I.lastLoginAt||void 0)}getIdToken(c){var h=this;return(0,b.Z)(function*(){const g=yield cn(h,h.stsTokenManager.getToken(h.auth,c));return te(g,h.auth,"internal-error"),h.accessToken!==g&&(h.accessToken=g,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),g})()}getIdTokenResult(c){return function Ir(p){return Nt.apply(this,arguments)}(this,c)}reload(){return function xr(p){return Di.apply(this,arguments)}(this)}_assign(c){this!==c&&(te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(h=>Object.assign({},h)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const h=new E(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(c){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,h=!1){var g=this;return(0,b.Z)(function*(){let y=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),y=!0),h&&(yield Xn(g)),yield g.auth._persistUserIfCurrent(g),y&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,b.Z)(function*(){const h=yield c.getIdToken();return yield cn(c,function Ls(p,c){return Vs.apply(this,arguments)}(c.auth,{idToken:h})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,h){var g,y,I,N,j,J,Ce,Fe;const At=null!==(g=h.displayName)&&void 0!==g?g:void 0,Mi=null!==(y=h.email)&&void 0!==y?y:void 0,Da=null!==(I=h.phoneNumber)&&void 0!==I?I:void 0,xd=null!==(N=h.photoURL)&&void 0!==N?N:void 0,yp=null!==(j=h.tenantId)&&void 0!==j?j:void 0,Uu=null!==(J=h._redirectEventId)&&void 0!==J?J:void 0,vp=null!==(Ce=h.createdAt)&&void 0!==Ce?Ce:void 0,Ep=null!==(Fe=h.lastLoginAt)&&void 0!==Fe?Fe:void 0,{uid:Md,emailVerified:qr,isAnonymous:Ay,providerData:wp,stsTokenManager:Dy}=h;te(Md&&Dy,c,"internal-error");const Sy=w.fromJSON(this.name,Dy);te("string"==typeof Md,c,"internal-error"),C(At,c.name),C(Mi,c.name),te("boolean"==typeof qr,c,"internal-error"),te("boolean"==typeof Ay,c,"internal-error"),C(Da,c.name),C(xd,c.name),C(yp,c.name),C(Uu,c.name),C(vp,c.name),C(Ep,c.name);const $u=new E({uid:Md,auth:c,email:Mi,emailVerified:qr,displayName:At,isAnonymous:Ay,photoURL:xd,phoneNumber:Da,tenantId:yp,stsTokenManager:Sy,createdAt:vp,lastLoginAt:Ep});return wp&&Array.isArray(wp)&&($u.providerData=wp.map(uC=>Object.assign({},uC))),Uu&&($u._redirectEventId=Uu),$u}static _fromIdTokenResponse(c,h,g=!1){return(0,b.Z)(function*(){const y=new w;y.updateFromServerResponse(h);const I=new E({uid:h.localId,auth:c,stsTokenManager:y,isAnonymous:g});return yield Xn(I),I})()}}const O=new Map;function B(p){Jt(p instanceof Function,"Expected a class definition");let c=O.get(p);return c?(Jt(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,O.set(p,c),c)}const ge=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(h,g){var y=this;return(0,b.Z)(function*(){y.storage[h]=g})()}_get(h){var g=this;return(0,b.Z)(function*(){const y=g.storage[h];return void 0===y?null:y})()}_remove(h){var g=this;return(0,b.Z)(function*(){delete g.storage[h]})()}_addListener(h,g){}_removeListener(h,g){}}return p.type="NONE",p})();function $e(p,c,h){return`firebase:${p}:${c}:${h}`}class bt{constructor(c,h,g){this.persistence=c,this.auth=h,this.userKey=g;const{config:y,name:I}=this.auth;this.fullUserKey=$e(this.userKey,y.apiKey,I),this.fullPersistenceKey=$e("persistence",y.apiKey,I),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,b.Z)(function*(){const h=yield c.persistence._get(c.fullUserKey);return h?E._fromJSON(c.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var h=this;return(0,b.Z)(function*(){if(h.persistence===c)return;const g=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=c,g?h.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,h,g="authUser"){return(0,b.Z)(function*(){if(!h.length)return new bt(B(ge),c,g);const y=(yield Promise.all(h.map(function(){var Ce=(0,b.Z)(function*(Fe){if(yield Fe._isAvailable())return Fe});return function(Fe){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let I=y[0]||B(ge);const N=$e(g,c.config.apiKey,c.name);let j=null;for(const Ce of h)try{const Fe=yield Ce._get(N);if(Fe){const At=E._fromJSON(c,Fe);Ce!==I&&(j=At),I=Ce;break}}catch{}const J=y.filter(Ce=>Ce._shouldAllowMigration);return I._shouldAllowMigration&&J.length?(I=J[0],j&&(yield I._set(N,j.toJSON())),yield Promise.all(h.map(function(){var Ce=(0,b.Z)(function*(Fe){if(Fe!==I)try{yield Fe._remove(N)}catch{}});return function(Fe){return Ce.apply(this,arguments)}}())),new bt(I,c,g)):new bt(I,c,g)})()}}function ye(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(rl(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(fe(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(S(c))return"Blackberry";if(ee(c))return"Webos";if(Xe(c))return"Safari";if((c.includes("chrome/")||hr(c))&&!c.includes("edge/"))return"Chrome";if(G(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function fe(p=(0,q.z$)()){return/firefox\//i.test(p)}function Xe(p=(0,q.z$)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function hr(p=(0,q.z$)()){return/crios\//i.test(p)}function rl(p=(0,q.z$)()){return/iemobile/i.test(p)}function G(p=(0,q.z$)()){return/android/i.test(p)}function S(p=(0,q.z$)()){return/blackberry/i.test(p)}function ee(p=(0,q.z$)()){return/webos/i.test(p)}function ne(p=(0,q.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function ve(p=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function fr(p=(0,q.z$)()){return ne(p)||G(p)||ee(p)||S(p)||/windows phone/i.test(p)||rl(p)}function Nn(p,c=[]){let h;switch(p){case"Browser":h=ye((0,q.z$)());break;case"Worker":h=`${ye((0,q.z$)())}-${p}`;break;default:h=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${h}/JsCore/${k.SDK_VERSION}/${g}`}class Kc{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,h){const g=I=>new Promise((N,j)=>{try{N(c(I))}catch(J){j(J)}});g.onAbort=h,this.queue.push(g);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var h=this;return(0,b.Z)(function*(){if(h.auth.currentUser===c)return;const g=[];try{for(const y of h.queue)yield y(c),y.onAbort&&g.push(y.onAbort)}catch(y){g.reverse();for(const I of g)try{I()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function E_(){return(E_=(0,b.Z)(function*(p,c={}){return Z(p,"GET","/v2/passwordPolicy",U(p,c))})).apply(this,arguments)}class Hx{constructor(c){var h,g,y,I;const N=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=N.minPasswordLength)&&void 0!==h?h:6,N.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=N.maxPasswordLength),void 0!==N.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=N.containsLowercaseCharacter),void 0!==N.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=N.containsUppercaseCharacter),void 0!==N.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=N.containsNumericCharacter),void 0!==N.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=N.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(I=c.forceUpgradeOnSignin)&&void 0!==I&&I,this.schemaVersion=c.schemaVersion}validatePassword(c){var h,g,y,I,N,j;const J={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,J),this.validatePasswordCharacterOptions(c,J),J.isValid&&(J.isValid=null===(h=J.meetsMinPasswordLength)||void 0===h||h),J.isValid&&(J.isValid=null===(g=J.meetsMaxPasswordLength)||void 0===g||g),J.isValid&&(J.isValid=null===(y=J.containsLowercaseLetter)||void 0===y||y),J.isValid&&(J.isValid=null===(I=J.containsUppercaseLetter)||void 0===I||I),J.isValid&&(J.isValid=null===(N=J.containsNumericCharacter)||void 0===N||N),J.isValid&&(J.isValid=null===(j=J.containsNonAlphanumericCharacter)||void 0===j||j),J}validatePasswordLengthOptions(c,h){const g=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;g&&(h.meetsMinPasswordLength=c.length>=g),y&&(h.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,h){let g;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let y=0;y<c.length;y++)g=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(h,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,h,g,y,I){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=I))}}class zx{constructor(c,h,g,y){this.app=c,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=g,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lT(this),this.idTokenSubscription=new lT(this),this.beforeStateQueue=new Kc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_t,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,h){var g=this;return h&&(this._popupRedirectResolver=B(h)),this._initializationPromise=this.queue((0,b.Z)(function*(){var y,I;if(!g._deleted&&(g.persistenceManager=yield bt.create(g,c),!g._deleted)){if(null!==(y=g._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(h),g.lastNotifiedUid=(null===(I=g.currentUser)||void 0===I?void 0:I.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,b.Z)(function*(){if(c._deleted)return;const h=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||h){if(c.currentUser&&h&&c.currentUser.uid===h.uid)return c._currentUser._assign(h),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(h,!0)}})()}initializeCurrentUser(c){var h=this;return(0,b.Z)(function*(){var g;const y=yield h.assertedPersistence.getCurrentUser();let I=y,N=!1;if(c&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const j=null===(g=h.redirectUser)||void 0===g?void 0:g._redirectEventId,J=I?._redirectEventId,Ce=yield h.tryRedirectSignIn(c);(!j||j===J)&&Ce?.user&&(I=Ce.user,N=!0)}if(!I)return h.directlySetCurrentUser(null);if(!I._redirectEventId){if(N)try{yield h.beforeStateQueue.runMiddleware(I)}catch(j){I=y,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(j))}return I?h.reloadAndSetCurrentUserOrClear(I):h.directlySetCurrentUser(null)}return te(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===I._redirectEventId?h.directlySetCurrentUser(I):h.reloadAndSetCurrentUserOrClear(I)})()}tryRedirectSignIn(c){var h=this;return(0,b.Z)(function*(){let g=null;try{g=yield h._popupRedirectResolver._completeRedirectFn(h,c,!0)}catch{yield h._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var h=this;return(0,b.Z)(function*(){try{yield Xn(c)}catch(g){if("auth/network-request-failed"!==g?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,b.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var h=this;return(0,b.Z)(function*(){const g=c?(0,q.m9)(c):null;return g&&te(g.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(g&&g._clone(h))})()}_updateCurrentUser(c,h=!1){var g=this;return(0,b.Z)(function*(){if(!g._deleted)return c&&te(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),h||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,b.Z)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,b.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var h=this;return this.queue((0,b.Z)(function*(){yield h.assertedPersistence.setPersistence(B(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var h=this;return(0,b.Z)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const g=h._getPasswordPolicyInternal();return g.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,b.Z)(function*(){const h=yield function aT(p){return E_.apply(this,arguments)}(c),g=new Hx(h);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,h,g){return this.registerStateListener(this.authStateSubscription,c,h,g)}beforeAuthStateChanged(c,h){return this.beforeStateQueue.pushCallback(c,h)}onIdTokenChanged(c,h,g){return this.registerStateListener(this.idTokenSubscription,c,h,g)}authStateReady(){return new Promise((c,h)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},h)}})}revokeAccessToken(c){var h=this;return(0,b.Z)(function*(){if(h.currentUser){const g=yield h.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=h.tenantId&&(y.tenantId=h.tenantId),yield function x(p,c){return R.apply(this,arguments)}(h,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,h){var g=this;return(0,b.Z)(function*(){const y=yield g.getOrInitRedirectPersistenceManager(h);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var h=this;return(0,b.Z)(function*(){if(!h.redirectPersistenceManager){const g=c&&B(c)||h._popupRedirectResolver;te(g,h,"argument-error"),h.redirectPersistenceManager=yield bt.create(h,[B(g._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(c){var h=this;return(0,b.Z)(function*(){var g,y;return h._isInitialized&&(yield h.queue((0,b.Z)(function*(){}))),(null===(g=h._currentUser)||void 0===g?void 0:g._redirectEventId)===c?h._currentUser:(null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?h.redirectUser:null})()}_persistUserIfCurrent(c){var h=this;return(0,b.Z)(function*(){if(c===h.currentUser)return h.queue((0,b.Z)(function*(){return h.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(h=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,h,g,y){if(this._deleted)return()=>{};const I="function"==typeof h?h:h.next.bind(h);let N=!1;const j=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(j,this,"internal-error"),j.then(()=>{N||I(this.currentUser)}),"function"==typeof h){const J=c.addObserver(h,g,y);return()=>{N=!0,J()}}{const J=c.addObserver(h);return()=>{N=!0,J()}}}directlySetCurrentUser(c){var h=this;return(0,b.Z)(function*(){h.currentUser&&h.currentUser!==c&&h._currentUser._stopProactiveRefresh(),c&&h.isProactiveRefreshEnabled&&c._startProactiveRefresh(),h.currentUser=c,c?yield h.assertedPersistence.setCurrentUser(c):yield h.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Nn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,b.Z)(function*(){var h;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(h=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();y&&(g["X-Firebase-Client"]=y);const I=yield c._getAppCheckToken();return I&&(g["X-Firebase-AppCheck"]=I),g})()}_getAppCheckToken(){var c=this;return(0,b.Z)(function*(){var h;const g=yield null===(h=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return g?.error&&function cr(p,...c){Ge.logLevel<=Se.in.WARN&&Ge.warn(`Auth (${k.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Dn(p){return(0,q.m9)(p)}class lT{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(h=>this.observer=h)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function w_(p){return new Promise((c,h)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=y=>{const I=$t("internal-error");I.customData=y,h(I)},g.type="text/javascript",g.charset="UTF-8",function uT(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)})}function I_(p){return`__${p}${Math.floor(1e6*Math.random())}`}const Ft="NO_RECAPTCHA";class cT{constructor(c){this.type="recaptcha-enterprise",this.auth=Dn(c)}verify(c="verify",h=!1){var g=this;return(0,b.Z)(function*(){function I(){return I=(0,b.Z)(function*(j){if(!h){if(null==j.tenantId&&null!=j._agentRecaptchaConfig)return j._agentRecaptchaConfig.siteKey;if(null!=j.tenantId&&void 0!==j._tenantRecaptchaConfigs[j.tenantId])return j._tenantRecaptchaConfigs[j.tenantId].siteKey}return new Promise(function(){var J=(0,b.Z)(function*(Ce,Fe){Fs(j,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(At=>{if(void 0!==At.recaptchaKey){const Mi=new dr(At);return null==j.tenantId?j._agentRecaptchaConfig=Mi:j._tenantRecaptchaConfigs[j.tenantId]=Mi,Ce(Mi.siteKey)}Fe(new Error("recaptcha Enterprise site key undefined"))}).catch(At=>{Fe(At)})});return function(Ce,Fe){return J.apply(this,arguments)}}())}),I.apply(this,arguments)}function N(j,J,Ce){const Fe=window.grecaptcha;Yn(Fe)?Fe.enterprise.ready(()=>{Fe.enterprise.execute(j,{action:c}).then(At=>{J(At)}).catch(()=>{J(Ft)})}):Ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((j,J)=>{(function y(j){return I.apply(this,arguments)})(g.auth).then(Ce=>{if(!h&&Yn(window.grecaptcha))N(Ce,j,J);else{if(typeof window>"u")return void J(new Error("RecaptchaVerifier is only supported in browser"));w_("https://www.google.com/recaptcha/enterprise.js?render="+Ce).then(()=>{N(Ce,j,J)}).catch(Fe=>{J(Fe)})}}).catch(Ce=>{J(Ce)})})})()}}function dT(p,c,h){return T_.apply(this,arguments)}function T_(){return(T_=(0,b.Z)(function*(p,c,h,g=!1){const y=new cT(p);let I;try{I=yield y.verify(h)}catch{I=yield y.verify(h,!0)}const N=Object.assign({},c);return Object.assign(N,g?{captchaResp:I}:{captchaResponse:I}),Object.assign(N,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(N,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),N})).apply(this,arguments)}function we(p,c,h,g){return C_.apply(this,arguments)}function C_(){return C_=(0,b.Z)(function*(p,c,h,g){var y;if(null!==(y=p._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const I=yield dT(p,c,h,"getOobCode"===h);return g(p,I)}return g(p,c).catch(function(){var I=(0,b.Z)(function*(N){if("auth/missing-recaptcha-token"===N.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const j=yield dT(p,c,h,"getOobCode"===h);return g(p,j)}return Promise.reject(N)});return function(N){return I.apply(this,arguments)}}())}),C_.apply(this,arguments)}function A_(p,c,h){const g=Dn(p);te(g._canInitEmulator,g,"emulator-config-failed"),te(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const y=!!h?.disableWarnings,I=Nf(c),{host:N,port:j}=function Qc(p){const c=Nf(p),h=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!h)return{host:"",port:null};const g=h[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(g);if(y){const I=y[1];return{host:I,port:Zc(g.substr(I.length+1))}}{const[I,N]=g.split(":");return{host:I,port:Zc(N)}}}(c);g.config.emulator={url:`${I}//${N}${null===j?"":`:${j}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:N,port:j,protocol:I.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function D_(){function p(){const c=document.createElement("p"),h=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Nf(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function Zc(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class sl{constructor(c,h){this.providerId=c,this.signInMethod=h}toJSON(){return wt("not implemented")}_getIdTokenResponse(c){return wt("not implemented")}_linkToIdToken(c,h){return wt("not implemented")}_getReauthenticationResolver(c){return wt("not implemented")}}function Ue(p,c){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:resetPassword",U(p,c))})).apply(this,arguments)}function oi(){return(oi=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function S_(p,c){return R_.apply(this,arguments)}function R_(){return(R_=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function P_(){return(P_=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:update",U(p,c))})).apply(this,arguments)}function Gx(p,c){return x_.apply(this,arguments)}function x_(){return(x_=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithPassword",U(p,c))})).apply(this,arguments)}function Mo(p,c){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:sendOobCode",U(p,c))})).apply(this,arguments)}function kf(){return(kf=(0,b.Z)(function*(p,c){return Mo(p,c)})).apply(this,arguments)}function pT(p,c){return Of.apply(this,arguments)}function Of(){return(Of=(0,b.Z)(function*(p,c){return Mo(p,c)})).apply(this,arguments)}function M_(p,c){return ha.apply(this,arguments)}function ha(){return(ha=(0,b.Z)(function*(p,c){return Mo(p,c)})).apply(this,arguments)}function Ff(){return(Ff=(0,b.Z)(function*(p,c){return Mo(p,c)})).apply(this,arguments)}function Xc(){return(Xc=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithEmailLink",U(p,c))})).apply(this,arguments)}function al(){return(al=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithEmailLink",U(p,c))})).apply(this,arguments)}class fa extends sl{constructor(c,h,g,y=null){super("password",g),this._email=c,this._password=h,this._tenantId=y}static _fromEmailAndPassword(c,h){return new fa(c,h,"password")}static _fromEmailAndCode(c,h,g=null){return new fa(c,h,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(c){var h=this;return(0,b.Z)(function*(){switch(h.signInMethod){case"password":return we(c,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gx);case"emailLink":return function ae(p,c){return Xc.apply(this,arguments)}(c,{email:h._email,oobCode:h._password});default:ht(c,"internal-error")}})()}_linkToIdToken(c,h){var g=this;return(0,b.Z)(function*(){switch(g.signInMethod){case"password":return we(c,{idToken:h,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S_);case"emailLink":return function rt(p,c){return al.apply(this,arguments)}(c,{idToken:h,email:g._email,oobCode:g._password});default:ht(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Si(p,c){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithIdp",U(p,c))})).apply(this,arguments)}class Us extends sl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const h=new Us(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(h.idToken=c.idToken),c.accessToken&&(h.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(h.nonce=c.nonce),c.pendingToken&&(h.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(h.accessToken=c.oauthToken,h.secret=c.oauthTokenSecret):ht("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:y}=h,I=(0,Rt._T)(h,["providerId","signInMethod"]);if(!g||!y)return null;const N=new Us(g,y);return N.idToken=I.idToken||void 0,N.accessToken=I.accessToken||void 0,N.secret=I.secret,N.nonce=I.nonce,N.pendingToken=I.pendingToken||null,N}_getIdTokenResponse(c){return Si(c,this.buildRequest())}_linkToIdToken(c,h){const g=this.buildRequest();return g.idToken=h,Si(c,g)}_getReauthenticationResolver(c){const h=this.buildRequest();return h.autoCreate=!1,Si(c,h)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),c.postBody=(0,q.xO)(h)}return c}}function zi(){return(zi=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:sendVerificationCode",U(p,c))})).apply(this,arguments)}function ys(){return(ys=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithPhoneNumber",U(p,c))})).apply(this,arguments)}function ll(){return(ll=(0,b.Z)(function*(p,c){const h=yield ue(p,"POST","/v1/accounts:signInWithPhoneNumber",U(p,c));if(h.temporaryProof)throw un(p,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Vf={USER_NOT_FOUND:"user-not-found"};function Jc(){return(Jc=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithPhoneNumber",U(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Vf)})).apply(this,arguments)}class jr extends sl{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,h){return new jr({verificationId:c,verificationCode:h})}static _fromTokenResponse(c,h){return new jr({phoneNumber:c,temporaryProof:h})}_getIdTokenResponse(c){return function _s(p,c){return ys.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,h){return function Ot(p,c){return ll.apply(this,arguments)}(c,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Bf(p,c){return Jc.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:h,verificationId:g,verificationCode:y}=this.params;return c&&h?{temporaryProof:c,phoneNumber:h}:{sessionInfo:g,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:h,verificationCode:g,phoneNumber:y,temporaryProof:I}=c;return g||h||y||I?new jr({verificationId:h,verificationCode:g,phoneNumber:y,temporaryProof:I}):null}}class ai{constructor(c){var h,g,y,I,N,j;const J=(0,q.zd)((0,q.pd)(c)),Ce=null!==(h=J.apiKey)&&void 0!==h?h:null,Fe=null!==(g=J.oobCode)&&void 0!==g?g:null,At=function bu(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=J.mode)&&void 0!==y?y:null);te(Ce&&Fe&&At,"argument-error"),this.apiKey=Ce,this.operation=At,this.code=Fe,this.continueUrl=null!==(I=J.continueUrl)&&void 0!==I?I:null,this.languageCode=null!==(N=J.languageCode)&&void 0!==N?N:null,this.tenantId=null!==(j=J.tenantId)&&void 0!==j?j:null}static parseLink(c){const h=function mT(p){const c=(0,q.zd)((0,q.pd)(p)).link,h=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,g=(0,q.zd)((0,q.pd)(p)).deep_link_id;return(g?(0,q.zd)((0,q.pd)(g)).link:null)||g||h||c||p}(c);try{return new ai(h)}catch{return null}}}let Uf=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(h,g){return fa._fromEmailAndPassword(h,g)}static credentialWithLink(h,g){const y=ai.parseLink(g);return te(y,"argument-error"),fa._fromEmailAndCode(h,y.code,y.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class ao{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class vn extends ao{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Au extends vn{static credentialFromJSON(c){const h="string"==typeof c?JSON.parse(c):c;return te("providerId"in h&&"signInMethod"in h,"argument-error"),Us._fromParams(h)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return te(c.idToken||c.accessToken,"argument-error"),Us._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Au.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Au.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:h,oauthAccessToken:g,oauthTokenSecret:y,pendingToken:I,nonce:N,providerId:j}=c;if(!g&&!y&&!h&&!I||!j)return null;try{return new Au(j)._credential({idToken:h,accessToken:g,nonce:N,pendingToken:I})}catch{return null}}}let N_=(()=>{class p extends vn{constructor(){super("facebook.com")}static credential(h){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),He=(()=>{class p extends vn{constructor(){super("google.com"),this.addScope("profile")}static credential(h,g){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:g})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:y}=h;if(!g&&!y)return null;try{return p.credential(g,y)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),li=(()=>{class p extends vn{constructor(){super("github.com")}static credential(h){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class kn extends sl{constructor(c,h){super(c,c),this.pendingToken=h}_getIdTokenResponse(c){return Si(c,this.buildRequest())}_linkToIdToken(c,h){const g=this.buildRequest();return g.idToken=h,Si(c,g)}_getReauthenticationResolver(c){const h=this.buildRequest();return h.autoCreate=!1,Si(c,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const h="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:y,pendingToken:I}=h;return g&&y&&I&&g===y?new kn(g,I):null}static _create(c,h){return new kn(c,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lo extends ao{constructor(c){te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return lo.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return lo.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const h=kn.fromJSON(c);return te(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:h,providerId:g}=c;if(!h||!g)return null;try{return kn._create(g,h)}catch{return null}}}let Ri=(()=>{class p extends vn{constructor(){super("twitter.com")}static credential(h,g){return Us._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:g})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:g,oauthTokenSecret:y}=h;if(!g||!y)return null;try{return p.credential(g,y)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function $f(p,c){return ed.apply(this,arguments)}function ed(){return(ed=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signUp",U(p,c))})).apply(this,arguments)}class Hr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,h,g,y=!1){return(0,b.Z)(function*(){const I=yield E._fromIdTokenResponse(c,g,y),N=$s(g);return new Hr({user:I,providerId:N,_tokenResponse:g,operationType:h})})()}static _forOperation(c,h,g){return(0,b.Z)(function*(){yield c._updateTokensIfNecessary(g,!0);const y=$s(g);return new Hr({user:c,providerId:y,_tokenResponse:g,operationType:h})})()}}function $s(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Ie(p){return Je.apply(this,arguments)}function Je(){return(Je=(0,b.Z)(function*(p){var c;const h=Dn(p);if(yield h._initializationPromise,null!==(c=h.currentUser)&&void 0!==c&&c.isAnonymous)return new Hr({user:h.currentUser,providerId:null,operationType:"signIn"});const g=yield $f(h,{returnSecureToken:!0}),y=yield Hr._fromIdTokenResponse(h,"signIn",g,!0);return yield h._updateCurrentUser(y.user),y})).apply(this,arguments)}class tn extends q.ZR{constructor(c,h,g,y){var I;super(h.code,h.message),this.operationType=g,this.user=y,Object.setPrototypeOf(this,tn.prototype),this.customData={appName:c.name,tenantId:null!==(I=c.tenantId)&&void 0!==I?I:void 0,_serverResponse:h.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,h,g,y){return new tn(c,h,g,y)}}function Wi(p,c,h,g){return("reauthenticate"===c?h._getReauthenticationResolver(p):h._getIdTokenResponse(p)).catch(I=>{throw"auth/multi-factor-auth-required"===I.code?tn._fromErrorAndOperation(p,I,c,g):I})}function No(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function Mr(p,c){return ko.apply(this,arguments)}function ko(){return ko=(0,b.Z)(function*(p,c){const h=(0,q.m9)(p);yield pa(!0,h,c);const{providerUserInfo:g}=yield function fs(p,c){return ps.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[c]}),y=No(g||[]);return h.providerData=h.providerData.filter(I=>y.has(I.providerId)),y.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),ko.apply(this,arguments)}function En(p,c){return ul.apply(this,arguments)}function ul(){return(ul=(0,b.Z)(function*(p,c,h=!1){const g=yield cn(p,c._linkToIdToken(p.auth,yield p.getIdToken()),h);return Hr._forOperation(p,"link",g)})).apply(this,arguments)}function pa(p,c,h){return tt.apply(this,arguments)}function tt(){return(tt=(0,b.Z)(function*(p,c,h){yield Xn(c);const y=!1===p?"provider-already-linked":"no-such-provider";te(No(c.providerData).has(h)===p,c.auth,y)})).apply(this,arguments)}function td(p,c){return ga.apply(this,arguments)}function ga(){return(ga=(0,b.Z)(function*(p,c,h=!1){const{auth:g}=p,y="reauthenticate";try{const I=yield cn(p,Wi(g,y,c,p),h);te(I.idToken,g,"internal-error");const N=An(I.idToken);te(N,g,"internal-error");const{sub:j}=N;return te(p.uid===j,g,"user-mismatch"),Hr._forOperation(p,y,I)}catch(I){throw"auth/user-not-found"===I?.code&&ht(g,"user-mismatch"),I}})).apply(this,arguments)}function jf(p,c){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,b.Z)(function*(p,c,h=!1){const g="signIn",y=yield Wi(p,g,c),I=yield Hr._fromIdTokenResponse(p,g,y);return h||(yield p._updateCurrentUser(I.user)),I})).apply(this,arguments)}function er(p,c){return ma.apply(this,arguments)}function ma(){return(ma=(0,b.Z)(function*(p,c){return jf(Dn(p),c)})).apply(this,arguments)}function _a(p,c){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,b.Z)(function*(p,c){const h=(0,q.m9)(p);return yield pa(!1,h,c.providerId),En(h,c)})).apply(this,arguments)}function cl(p,c){return nd.apply(this,arguments)}function nd(){return(nd=(0,b.Z)(function*(p,c){return td((0,q.m9)(p),c)})).apply(this,arguments)}function k_(){return(k_=(0,b.Z)(function*(p,c){return ue(p,"POST","/v1/accounts:signInWithCustomToken",U(p,c))})).apply(this,arguments)}function Hf(p,c){return rd.apply(this,arguments)}function rd(){return rd=(0,b.Z)(function*(p,c){const h=Dn(p),g=yield function nn(p,c){return k_.apply(this,arguments)}(h,{token:c,returnSecureToken:!0}),y=yield Hr._fromIdTokenResponse(h,"signIn",g);return yield h._updateCurrentUser(y.user),y}),rd.apply(this,arguments)}class Fo{constructor(c,h){this.factorId=c,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(c,h){return"phoneInfo"in h?dl._fromServerResponse(c,h):"totpInfo"in h?Lo._fromServerResponse(c,h):ht(c,"internal-error")}}class dl extends Fo{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,h){return new dl(h)}}class Lo extends Fo{constructor(c){super("totp",c)}static _fromServerResponse(c,h){return new Lo(h)}}function pr(p,c,h){var g;te((null===(g=h.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),te(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=h.url,c.dynamicLinkDomain=h.dynamicLinkDomain,c.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(te(h.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=h.iOS.bundleId),h.android&&(te(h.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=h.android.installApp,c.androidMinimumVersionCode=h.android.minimumVersion,c.androidPackageName=h.android.packageName)}function O_(p){return zr.apply(this,arguments)}function zr(){return(zr=(0,b.Z)(function*(p){const c=Dn(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function vs(p,c,h){return Du.apply(this,arguments)}function Du(){return(Du=(0,b.Z)(function*(p,c,h){const g=Dn(p),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};h&&pr(g,y,h),yield we(g,y,"getOobCode",pT)})).apply(this,arguments)}function Su(p,c,h){return hl.apply(this,arguments)}function hl(){return hl=(0,b.Z)(function*(p,c,h){yield Ue((0,q.m9)(p),{oobCode:c,newPassword:h}).catch(function(){var g=(0,b.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&O_(p),y});return function(y){return g.apply(this,arguments)}}())}),hl.apply(this,arguments)}function Es(p,c){return zf.apply(this,arguments)}function zf(){return zf=(0,b.Z)(function*(p,c){yield function en(p,c){return P_.apply(this,arguments)}((0,q.m9)(p),{oobCode:c})}),zf.apply(this,arguments)}function _T(p,c){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,b.Z)(function*(p,c){const h=(0,q.m9)(p),g=yield Ue(h,{oobCode:c}),y=g.requestType;switch(te(y,h,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(g.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(g.mfaInfo,h,"internal-error");default:te(g.email,h,"internal-error")}let I=null;return g.mfaInfo&&(I=Fo._fromServerResponse(Dn(h),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:I},operation:y}})).apply(this,arguments)}function yT(p,c){return F_.apply(this,arguments)}function F_(){return(F_=(0,b.Z)(function*(p,c){const{data:h}=yield _T((0,q.m9)(p),c);return h.email})).apply(this,arguments)}function Kx(p,c,h){return L_.apply(this,arguments)}function L_(){return(L_=(0,b.Z)(function*(p,c,h){const g=Dn(p),N=yield we(g,{returnSecureToken:!0,email:c,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$f).catch(J=>{throw"auth/password-does-not-meet-requirements"===J.code&&O_(p),J}),j=yield Hr._fromIdTokenResponse(g,"signIn",N);return yield g._updateCurrentUser(j.user),j})).apply(this,arguments)}function Qx(p,c,h){return er((0,q.m9)(p),Uf.credential(c,h)).catch(function(){var g=(0,b.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&O_(p),y});return function(y){return g.apply(this,arguments)}}())}function Zx(p,c,h){return V_.apply(this,arguments)}function V_(){return(V_=(0,b.Z)(function*(p,c,h){const g=Dn(p),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function I(N,j){te(j.handleCodeInApp,g,"argument-error"),j&&pr(g,N,j)})(y,h),yield we(g,y,"getOobCode",M_)})).apply(this,arguments)}function Yx(p,c){return"EMAIL_SIGNIN"===ai.parseLink(c)?.operation}function Xx(p,c,h){return B_.apply(this,arguments)}function B_(){return(B_=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p),y=Uf.credentialWithLink(c,h||Cn());return te(y._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),er(g,y)})).apply(this,arguments)}function U_(){return(U_=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:createAuthUri",U(p,c))})).apply(this,arguments)}function eM(p,c){return id.apply(this,arguments)}function id(){return id=(0,b.Z)(function*(p,c){const g={identifier:c,continueUri:bn()?Cn():"http://localhost"},{signinMethods:y}=yield function Jx(p,c){return U_.apply(this,arguments)}((0,q.m9)(p),g);return y||[]}),id.apply(this,arguments)}function $_(p,c){return j_.apply(this,arguments)}function j_(){return j_=(0,b.Z)(function*(p,c){const h=(0,q.m9)(p),y={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&pr(h.auth,y,c);const{email:I}=yield function Yc(p,c){return kf.apply(this,arguments)}(h.auth,y);I!==p.email&&(yield p.reload())}),j_.apply(this,arguments)}function tM(p,c,h){return H_.apply(this,arguments)}function H_(){return H_=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p),I={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};h&&pr(g.auth,I,h);const{email:N}=yield function ol(p,c){return Ff.apply(this,arguments)}(g.auth,I);N!==p.email&&(yield p.reload())}),H_.apply(this,arguments)}function Gf(){return(Gf=(0,b.Z)(function*(p,c){return Z(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function qi(p,c){return sd.apply(this,arguments)}function sd(){return sd=(0,b.Z)(function*(p,{displayName:c,photoURL:h}){if(void 0===c&&void 0===h)return;const g=(0,q.m9)(p),I={idToken:yield g.getIdToken(),displayName:c,photoUrl:h,returnSecureToken:!0},N=yield cn(g,function ya(p,c){return Gf.apply(this,arguments)}(g.auth,I));g.displayName=N.displayName||null,g.photoURL=N.photoUrl||null;const j=g.providerData.find(({providerId:J})=>"password"===J);j&&(j.displayName=g.displayName,j.photoURL=g.photoURL),yield g._updateTokensIfNecessary(N)}),sd.apply(this,arguments)}function vT(p,c){return qf((0,q.m9)(p),c,null)}function ET(p,c){return qf((0,q.m9)(p),null,c)}function qf(p,c,h){return od.apply(this,arguments)}function od(){return od=(0,b.Z)(function*(p,c,h){const{auth:g}=p,I={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(I.email=c),h&&(I.password=h);const N=yield cn(p,function fT(p,c){return oi.apply(this,arguments)}(g,I));yield p._updateTokensIfNecessary(N,!0)}),od.apply(this,arguments)}class Vo{constructor(c,h,g={}){this.isNewUser=c,this.providerId=h,this.profile=g}}class z_ extends Vo{constructor(c,h,g,y){super(c,h,g),this.username=y}}class Ki extends Vo{constructor(c,h){super(c,"facebook.com",h)}}class W_ extends z_{constructor(c,h){super(c,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class G_ extends Vo{constructor(c,h){super(c,"google.com",h)}}class Tr extends z_{constructor(c,h,g){super(c,"twitter.com",h,g)}}function IT(p){const{user:c,_tokenResponse:h}=p;return c.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function wT(p){var c,h;if(!p)return null;const{providerId:g}=p,y=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},I=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const N=null===(h=null===(c=An(p.idToken))||void 0===c?void 0:c.firebase)||void 0===h?void 0:h.sign_in_provider;if(N)return new Vo(I,"anonymous"!==N&&"custom"!==N?N:null)}if(!g)return null;switch(g){case"facebook.com":return new Ki(I,y);case"github.com":return new W_(I,y);case"google.com":return new G_(I,y);case"twitter.com":return new Tr(I,y,p.screenName||null);case"custom":case"anonymous":return new Vo(I,null);default:return new Vo(I,g,y)}}(h)}class Bo{constructor(c,h,g){this.type=c,this.credential=h,this.user=g}static _fromIdtoken(c,h){return new Bo("enroll",c,h)}static _fromMfaPendingCredential(c){return new Bo("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var h,g;if(c?.multiFactorSession){if(null!==(h=c.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Bo._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return Bo._fromIdtoken(c.multiFactorSession.idToken)}return null}}class K_{constructor(c,h,g){this.session=c,this.hints=h,this.signInResolver=g}static _fromError(c,h){const g=Dn(c),y=h.customData._serverResponse,I=(y.mfaInfo||[]).map(j=>Fo._fromServerResponse(g,j));te(y.mfaPendingCredential,g,"internal-error");const N=Bo._fromMfaPendingCredential(y.mfaPendingCredential);return new K_(N,I,function(){var j=(0,b.Z)(function*(J){const Ce=yield J._process(g,N);delete y.mfaInfo,delete y.mfaPendingCredential;const Fe=Object.assign(Object.assign({},y),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(h.operationType){case"signIn":const At=yield Hr._fromIdTokenResponse(g,h.operationType,Fe);return yield g._updateCurrentUser(At.user),At;case"reauthenticate":return te(h.user,g,"internal-error"),Hr._forOperation(h.user,h.operationType,Fe);default:ht(g,"internal-error")}});return function(J){return j.apply(this,arguments)}}())}resolveSignIn(c){var h=this;return(0,b.Z)(function*(){return h.signInResolver(c)})()}}function CT(p,c){var h;const g=(0,q.m9)(p),y=c;return te(c.customData.operationType,g,"argument-error"),te(null===(h=y.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,g,"argument-error"),K_._fromError(g,y)}class Y{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(g=>Fo._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new Y(c)}getSession(){var c=this;return(0,b.Z)(function*(){return Bo._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,h){var g=this;return(0,b.Z)(function*(){const y=c,I=yield g.getSession(),N=yield cn(g.user,y._process(g.user.auth,I,h));return yield g.user._updateTokensIfNecessary(N),g.user.reload()})()}unenroll(c){var h=this;return(0,b.Z)(function*(){const g="string"==typeof c?c:c.uid,y=yield h.user.getIdToken();try{const I=yield cn(h.user,function RT(p,c){return Z(p,"POST","/v2/accounts/mfaEnrollment:withdraw",U(p,c))}(h.user.auth,{idToken:y,mfaEnrollmentId:g}));h.enrolledFactors=h.enrolledFactors.filter(({uid:N})=>N!==g),yield h.user._updateTokensIfNecessary(I),yield h.user.reload()}catch(I){throw I}})()}}const yt=new WeakMap;function Zf(p){const c=(0,q.m9)(p);return yt.has(c)||yt.set(c,Y._fromUser(c)),yt.get(c)}const pl="__sak";class gr{constructor(c,h){this.storageRetriever=c,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(pl,"1"),this.storage.removeItem(pl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,h){return this.storage.setItem(c,JSON.stringify(h)),Promise.resolve()}_get(c){const h=this.storage.getItem(c);return Promise.resolve(h?JSON.parse(h):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ld=(()=>{class p extends gr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,g)=>this.onStorageEvent(h,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Q_(){const p=(0,q.z$)();return Xe(p)||ne(p)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fr(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const g of Object.keys(this.listeners)){const y=this.storage.getItem(g),I=this.localCache[g];y!==I&&h(g,I,y)}}onStorageEvent(h,g=!1){if(!h.key)return void this.forAllChangedKeys((j,J,Ce)=>{this.notifyListeners(j,Ce)});const y=h.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const j=this.storage.getItem(y);if(h.newValue!==j)null!==h.newValue?this.storage.setItem(y,h.newValue):this.storage.removeItem(y);else if(this.localCache[y]===h.newValue&&!g)return}const I=()=>{const j=this.storage.getItem(y);!g&&this.localCache[y]===j||this.notifyListeners(y,j)},N=this.storage.getItem(y);!function kt(){return(0,q.w1)()&&10===document.documentMode}()||N===h.newValue||h.newValue===h.oldValue?I():setTimeout(I,10)}notifyListeners(h,g){this.localCache[h]=g;const y=this.listeners[h];if(y)for(const I of Array.from(y))I(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,g,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:g,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(g)}_removeListener(h,g){this.listeners[h]&&(this.listeners[h].delete(g),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,g){var y=()=>super._set,I=this;return(0,b.Z)(function*(){yield y().call(I,h,g),I.localCache[h]=JSON.stringify(g)})()}_get(h){var g=()=>super._get,y=this;return(0,b.Z)(function*(){const I=yield g().call(y,h);return y.localCache[h]=JSON.stringify(I),I})()}_remove(h){var g=()=>super._remove,y=this;return(0,b.Z)(function*(){yield g().call(y,h),delete y.localCache[h]})()}}return p.type="LOCAL",p})(),Y_=(()=>{class p extends gr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,g){}_removeListener(h,g){}}return p.type="SESSION",p})();let Wr=(()=>{class p{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const g=this.receivers.find(I=>I.isListeningto(h));if(g)return g;const y=new p(h);return this.receivers.push(y),y}isListeningto(h){return this.eventTarget===h}handleEvent(h){var g=this;return(0,b.Z)(function*(){const y=h,{eventId:I,eventType:N,data:j}=y.data,J=g.handlersMap[N];if(!J?.size)return;y.ports[0].postMessage({status:"ack",eventId:I,eventType:N});const Ce=Array.from(J).map(function(){var At=(0,b.Z)(function*(Mi){return Mi(y.origin,j)});return function(Mi){return At.apply(this,arguments)}}()),Fe=yield function X_(p){return Promise.all(p.map(function(){var c=(0,b.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(g){return{fulfilled:!1,reason:g}}});return function(h){return c.apply(this,arguments)}}()))}(Ce);y.ports[0].postMessage({status:"done",eventId:I,eventType:N,response:Fe})})()}_subscribe(h,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(g)}_unsubscribe(h,g){this.handlersMap[h]&&g&&this.handlersMap[h].delete(g),(!g||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Pi(p="",c=10){let h="";for(let g=0;g<c;g++)h+=Math.floor(10*Math.random());return p+h}class J_{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,h,g=50){var y=this;return(0,b.Z)(function*(){const I=typeof MessageChannel<"u"?new MessageChannel:null;if(!I)throw new Error("connection_unavailable");let N,j;return new Promise((J,Ce)=>{const Fe=Pi("",20);I.port1.start();const At=setTimeout(()=>{Ce(new Error("unsupported_event"))},g);j={messageChannel:I,onMessage(Mi){const Da=Mi;if(Da.data.eventId===Fe)switch(Da.data.status){case"ack":clearTimeout(At),N=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(N),J(Da.data.response);break;default:clearTimeout(At),clearTimeout(N),Ce(new Error("invalid_response"))}}},y.handlers.add(j),I.port1.addEventListener("message",j.onMessage),y.target.postMessage({eventType:c,eventId:Fe,data:h},[I.port2])}).finally(()=>{j&&y.removeMessageHandler(j)})})()}}function rn(){return window}function Yf(){return typeof rn().WorkerGlobalScope<"u"&&"function"==typeof rn().importScripts}function Xf(){return(Xf=(0,b.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ud="firebaseLocalStorageDb",ty=1,gl="firebaseLocalStorage",ny="fbase_key";class ml{constructor(c){this.request=c}toPromise(){return new Promise((c,h)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function _l(p,c){return p.transaction([gl],c?"readwrite":"readonly").objectStore(gl)}function cd(){const p=indexedDB.open(ud,ty);return new Promise((c,h)=>{p.addEventListener("error",()=>{h(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(gl,{keyPath:ny})}catch(y){h(y)}}),p.addEventListener("success",(0,b.Z)(function*(){const g=p.result;g.objectStoreNames.contains(gl)?c(g):(g.close(),yield function ry(){const p=indexedDB.deleteDatabase(ud);return new ml(p).toPromise()}(),c(yield cd()))}))})}function ep(p,c,h){return dd.apply(this,arguments)}function dd(){return(dd=(0,b.Z)(function*(p,c,h){const g=_l(p,!0).put({[ny]:c,value:h});return new ml(g).toPromise()})).apply(this,arguments)}function np(){return(np=(0,b.Z)(function*(p,c){const h=_l(p,!1).get(c),g=yield new ml(h).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function iy(p,c){const h=_l(p,!0).delete(c);return new ml(h).toPromise()}const hd=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,b.Z)(function*(){return h.db||(h.db=yield cd()),h.db})()}_withRetries(h){var g=this;return(0,b.Z)(function*(){let y=0;for(;;)try{const I=yield g._openDb();return yield h(I)}catch(I){if(y++>3)throw I;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,b.Z)(function*(){return Yf()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,b.Z)(function*(){h.receiver=Wr._getInstance(function Jf(){return Yf()?self:null}()),h.receiver._subscribe("keyChanged",function(){var g=(0,b.Z)(function*(y,I){return{keyProcessed:(yield h._poll()).includes(I.key)}});return function(y,I){return g.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var g=(0,b.Z)(function*(y,I){return["keyChanged"]});return function(y,I){return g.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,b.Z)(function*(){var g,y;if(h.activeServiceWorker=yield function ey(){return Xf.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new J_(h.activeServiceWorker);const I=yield h.sender._send("ping",{},800);I&&null!==(g=I[0])&&void 0!==g&&g.fulfilled&&null!==(y=I[0])&&void 0!==y&&y.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var g=this;return(0,b.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function PT(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:h},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const h=yield cd();return yield ep(h,pl,"1"),yield iy(h,pl),!0}catch{}return!1})()}_withPendingWrite(h){var g=this;return(0,b.Z)(function*(){g.pendingWrites++;try{yield h()}finally{g.pendingWrites--}})()}_set(h,g){var y=this;return(0,b.Z)(function*(){return y._withPendingWrite((0,b.Z)(function*(){return yield y._withRetries(I=>ep(I,h,g)),y.localCache[h]=g,y.notifyServiceWorker(h)}))})()}_get(h){var g=this;return(0,b.Z)(function*(){const y=yield g._withRetries(I=>function tp(p,c){return np.apply(this,arguments)}(I,h));return g.localCache[h]=y,y})()}_remove(h){var g=this;return(0,b.Z)(function*(){return g._withPendingWrite((0,b.Z)(function*(){return yield g._withRetries(y=>iy(y,h)),delete g.localCache[h],g.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,b.Z)(function*(){const g=yield h._withRetries(N=>{const j=_l(N,!1).getAll();return new ml(j).toPromise()});if(!g)return[];if(0!==h.pendingWrites)return[];const y=[],I=new Set;for(const{fbase_key:N,value:j}of g)I.add(N),JSON.stringify(h.localCache[N])!==JSON.stringify(j)&&(h.notifyListeners(N,j),y.push(N));for(const N of Object.keys(h.localCache))h.localCache[N]&&!I.has(N)&&(h.notifyListeners(N,null),y.push(N));return y})()}notifyListeners(h,g){this.localCache[h]=g;const y=this.listeners[h];if(y)for(const I of Array.from(y))I(g)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(g)}_removeListener(h,g){this.listeners[h]&&(this.listeners[h].delete(g),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),wa=1e12;class fd{constructor(c){this.auth=c,this.counter=wa,this._widgets=new Map}render(c,h){const g=this.counter;return this._widgets.set(g,new pd(c,this.auth.name,h||{})),this.counter++,g}reset(c){var h;const g=c||wa;null===(h=this._widgets.get(g))||void 0===h||h.delete(),this._widgets.delete(g)}getResponse(c){var h;return(null===(h=this._widgets.get(c||wa))||void 0===h?void 0:h.getResponse())||""}execute(c){var h=this;return(0,b.Z)(function*(){var g;return null===(g=h._widgets.get(c||wa))||void 0===g||g.execute(),""})()}}class pd{constructor(c,h,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;te(y,"argument-error",{appName:h}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rp(p){const c=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(h.charAt(Math.floor(Math.random()*h.length)));return c.join("")}(50);const{callback:c,"expired-callback":h}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gd=I_("rcb"),OT=new ri(3e4,6e4);class Pu{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=rn().grecaptcha)||void 0===c||!c.render)}load(c,h=""){return te(function FT(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(h),c,"argument-error"),this.shouldResolveImmediately(h)&&Hn(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise((g,y)=>{const I=rn().setTimeout(()=>{y($t(c,"network-request-failed"))},OT.get());rn()[gd]=()=>{rn().clearTimeout(I),delete rn()[gd];const j=rn().grecaptcha;if(!j||!Hn(j))return void y($t(c,"internal-error"));const J=j.render;j.render=(Ce,Fe)=>{const At=J(Ce,Fe);return this.counter++,At},this.hostLanguage=h,g(j)},w_(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:gd,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(I),y($t(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var h;return!(null===(h=rn().grecaptcha)||void 0===h||!h.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oM{load(c){return(0,b.Z)(function*(){return new fd(c)})()}clearedOneInstance(){}}const md="recaptcha",aM={theme:"light",type:"image"};class LT{constructor(c,h,g=Object.assign({},aM)){this.parameters=g,this.type=md,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(c),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof h?document.getElementById(h):h;te(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oM:new Pu,this.validateStartingState()}verify(){var c=this;return(0,b.Z)(function*(){c.assertNotDestroyed();const h=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(h)||new Promise(I=>{const N=j=>{j&&(c.tokenChangeListeners.delete(N),I(j))};c.tokenChangeListeners.add(N),c.isInvisible&&g.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return h=>{if(this.tokenChangeListeners.forEach(g=>g(h)),"function"==typeof c)c(h);else if("string"==typeof c){const g=rn()[c];"function"==typeof g&&g(h)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,b.Z)(function*(){if(yield c.init(),!c.widgetId){let h=c.container;if(!c.isInvisible){const g=document.createElement("div");h.appendChild(g),h=g}c.widgetId=c.getAssertedRecaptcha().render(h,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,b.Z)(function*(){te(bn()&&!Yf(),c.auth,"internal-error"),yield function VT(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const h=yield function ii(p){return $i.apply(this,arguments)}(c.auth);te(h,c.auth,"internal-error"),c.parameters.sitekey=h})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oy{constructor(c,h){this.verificationId=c,this.onConfirmation=h}confirm(c){const h=jr._fromVerification(this.verificationId,c);return this.onConfirmation(h)}}function lM(p,c,h){return xu.apply(this,arguments)}function xu(){return(xu=(0,b.Z)(function*(p,c,h){const g=Dn(p),y=yield Nu(g,c,(0,q.m9)(h));return new oy(y,I=>er(g,I))})).apply(this,arguments)}function ay(p,c,h){return _d.apply(this,arguments)}function _d(){return(_d=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p);yield pa(!1,g,"phone");const y=yield Nu(g.auth,c,(0,q.m9)(h));return new oy(y,I=>_a(g,I))})).apply(this,arguments)}function Mu(p,c,h){return yd.apply(this,arguments)}function yd(){return(yd=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p),y=yield Nu(g.auth,c,(0,q.m9)(h));return new oy(y,I=>cl(g,I))})).apply(this,arguments)}function Nu(p,c,h){return vl.apply(this,arguments)}function vl(){return vl=(0,b.Z)(function*(p,c,h){var g;const y=yield h.verify();try{let I;if(te("string"==typeof y,p,"argument-error"),te(h.type===md,p,"argument-error"),I="string"==typeof c?{phoneNumber:c}:c,"session"in I){const N=I.session;if("phoneNumber"in I)return te("enroll"===N.type,p,"internal-error"),(yield function bT(p,c){return Z(p,"POST","/v2/accounts/mfaEnrollment:start",U(p,c))}(p,{idToken:N.credential,phoneEnrollmentInfo:{phoneNumber:I.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{te("signin"===N.type,p,"internal-error");const j=(null===(g=I.multiFactorHint)||void 0===g?void 0:g.uid)||I.multiFactorUid;return te(j,p,"missing-multi-factor-info"),(yield function xT(p,c){return Z(p,"POST","/v2/accounts/mfaSignIn:start",U(p,c))}(p,{mfaPendingCredential:N.credential,mfaEnrollmentId:j,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:N}=yield function oo(p,c){return zi.apply(this,arguments)}(p,{phoneNumber:I.phoneNumber,recaptchaToken:y});return N}}finally{h._reset()}}),vl.apply(this,arguments)}function BT(p,c){return El.apply(this,arguments)}function El(){return(El=(0,b.Z)(function*(p,c){yield En((0,q.m9)(p),c)})).apply(this,arguments)}let ip=(()=>{class p{constructor(h){this.providerId=p.PROVIDER_ID,this.auth=Dn(h)}verifyPhoneNumber(h,g){return Nu(this.auth,h,(0,q.m9)(g))}static credential(h,g){return jr._fromVerification(h,g)}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:g,temporaryProof:y}=h;return g&&y?jr._fromTokenResponse(g,y):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Hs(p,c){return c?B(c):(te(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class ly extends sl{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Si(c,this._buildIdpRequest())}_linkToIdToken(c,h){return Si(c,this._buildIdpRequest(h))}_getReauthenticationResolver(c){return Si(c,this._buildIdpRequest())}_buildIdpRequest(c){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(h.idToken=c),h}}function uy(p){return jf(p.auth,new ly(p),p.bypassAuthState)}function cy(p){const{auth:c,user:h}=p;return te(h,c,"internal-error"),td(h,new ly(p),p.bypassAuthState)}function UT(p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,b.Z)(function*(p){const{auth:c,user:h}=p;return te(h,c,"internal-error"),En(h,new ly(p),p.bypassAuthState)})).apply(this,arguments)}class dy{constructor(c,h,g,y,I=!1){this.auth=c,this.resolver=g,this.user=y,this.bypassAuthState=I,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var c=this;return new Promise(function(){var h=(0,b.Z)(function*(g,y){c.pendingPromise={resolve:g,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(I){c.reject(I)}});return function(g,y){return h.apply(this,arguments)}}())}onAuthEvent(c){var h=this;return(0,b.Z)(function*(){const{urlResponse:g,sessionId:y,postBody:I,tenantId:N,error:j,type:J}=c;if(j)return void h.reject(j);const Ce={auth:h.auth,requestUri:g,sessionId:y,tenantId:N||void 0,postBody:I||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(J)(Ce))}catch(Fe){h.reject(Fe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return uy;case"linkViaPopup":case"linkViaRedirect":return UT;case"reauthViaPopup":case"reauthViaRedirect":return cy;default:ht(this.auth,"internal-error")}}resolve(c){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vd=new ri(2e3,1e4);function sp(p,c,h){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,b.Z)(function*(p,c,h){const g=Dn(p);jn(p,c,ao);const y=Hs(g,h);return new Id(g,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function op(p,c,h){return ku.apply(this,arguments)}function ku(){return(ku=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p);jn(g.auth,c,ao);const y=Hs(g.auth,h);return new Id(g.auth,"reauthViaPopup",c,y,g).executeNotNull()})).apply(this,arguments)}function $T(p,c,h){return wd.apply(this,arguments)}function wd(){return(wd=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p);jn(g.auth,c,ao);const y=Hs(g.auth,h);return new Id(g.auth,"linkViaPopup",c,y,g).executeNotNull()})).apply(this,arguments)}let Id=(()=>{class p extends dy{constructor(h,g,y,I,N){super(h,g,I,N),this.provider=y,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var h=this;return(0,b.Z)(function*(){const g=yield h.execute();return te(g,h.auth,"internal-error"),g})()}onExecution(){var h=this;return(0,b.Z)(function*(){Jt(1===h.filter.length,"Popup operations only handle one event");const g=Pi();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],g),h.authWindow.associatedEvent=g,h.resolver._originValidation(h.auth).catch(y=>{h.reject(y)}),h.resolver._isIframeWebStorageSupported(h.auth,y=>{y||h.reject($t(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject($t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const h=()=>{var g,y;this.pollId=null!==(y=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject($t(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,vd.get())};h()}}return p.currentPopupAction=null,p})();const hy="pendingRedirect",wl=new Map;class jT extends dy{constructor(c,h,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,h=this;return(0,b.Z)(function*(){let g=wl.get(h.auth._key());if(!g){try{const I=(yield function Td(p,c){return co.apply(this,arguments)}(h.resolver,h.auth))?yield c().call(h):null;g=()=>Promise.resolve(I)}catch(y){g=()=>Promise.reject(y)}wl.set(h.auth._key(),g)}return h.bypassAuthState||wl.set(h.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var h=()=>super.onAuthEvent,g=this;return(0,b.Z)(function*(){if("signInViaRedirect"===c.type)return h().call(g,c);if("unknown"!==c.type){if(c.eventId){const y=yield g.auth._redirectUserForId(c.eventId);if(y)return g.user=y,h().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function co(){return(co=(0,b.Z)(function*(p,c){const h=mr(c),g=py(p);if(!(yield g._isAvailable()))return!1;const y="true"===(yield g._get(h));return yield g._remove(h),y})).apply(this,arguments)}function ap(p,c){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,b.Z)(function*(p,c){return py(p)._set(mr(c),"true")})).apply(this,arguments)}function fy(){wl.clear()}function Ia(p,c){wl.set(p._key(),c)}function py(p){return B(p._redirectPersistence)}function mr(p){return $e(hy,p.config.apiKey,p.name)}function lp(p,c,h){return function HT(p,c,h){return bd.apply(this,arguments)}(p,c,h)}function bd(){return(bd=(0,b.Z)(function*(p,c,h){const g=Dn(p);jn(p,c,ao),yield g._initializationPromise;const y=Hs(g,h);return yield ap(y,g),y._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function Ad(p,c,h){return function Il(p,c,h){return Uo.apply(this,arguments)}(p,c,h)}function Uo(){return(Uo=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p);jn(g.auth,c,ao),yield g.auth._initializationPromise;const y=Hs(g.auth,h);yield ap(y,g.auth);const I=yield zT(g);return y._openRedirect(g.auth,c,"reauthViaRedirect",I)})).apply(this,arguments)}function Tl(p,c,h){return function gy(p,c,h){return Ou.apply(this,arguments)}(p,c,h)}function Ou(){return(Ou=(0,b.Z)(function*(p,c,h){const g=(0,q.m9)(p);jn(g.auth,c,ao),yield g.auth._initializationPromise;const y=Hs(g.auth,h);yield pa(!1,g,c.providerId),yield ap(y,g.auth);const I=yield zT(g);return y._openRedirect(g.auth,c,"linkViaRedirect",I)})).apply(this,arguments)}function Cl(p,c){return my.apply(this,arguments)}function my(){return(my=(0,b.Z)(function*(p,c){return yield Dn(p)._initializationPromise,up(p,c,!1)})).apply(this,arguments)}function up(p,c){return me.apply(this,arguments)}function me(){return(me=(0,b.Z)(function*(p,c,h=!1){const g=Dn(p),y=Hs(g,c),N=yield new jT(g,y,h).execute();return N&&!h&&(delete N.user._redirectEventId,yield g._persistUserIfCurrent(N.user),yield g._setRedirectUser(null,c)),N})).apply(this,arguments)}function zT(p){return _y.apply(this,arguments)}function _y(){return(_y=(0,b.Z)(function*(p){const c=Pi(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class WT{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let h=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(h=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function cM(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qT(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=c,h=!0)),h}sendToConsumer(c,h){var g;if(c.error&&!qT(c)){const y=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";h.onError($t(this.auth,y))}else h.onAuthEvent(c)}isEventForConsumer(c,h){const g=null===h.eventId||!!c.eventId&&c.eventId===h.eventId;return h.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(GT(c))}saveEventToCache(c){this.cachedEventUids.add(GT(c)),this.lastProcessedEventTime=Date.now()}}function GT(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function qT({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function bl(p){return yy.apply(this,arguments)}function yy(){return(yy=(0,b.Z)(function*(p,c={}){return Z(p,"GET","/v1/projects",c)})).apply(this,arguments)}const dM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tr=/^https?/;function Ta(){return(Ta=(0,b.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield bl(p);for(const h of c)try{if(KT(h))return}catch{}ht(p,"unauthorized-domain")})).apply(this,arguments)}function KT(p){const c=Cn(),{protocol:h,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const N=new URL(p);return""===N.hostname&&""===g?"chrome-extension:"===h&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===h&&N.hostname===g}if(!tr.test(h))return!1;if(dM.test(p))return g===p;const y=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(g)}const Yi=new ri(3e4,6e4);function $o(){const p=rn().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let h=0;h<p.CP.length;h++)p.CP[h]=null}let Ca=null;const QT=new ri(5e3,15e3),hM="__/auth/iframe",ZT="emulator/auth/iframe",fM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dp(p){const c=p.config;te(c.authDomain,p,"auth-domain-config-required");const h=c.emulator?so(c,ZT):`https://${p.config.authDomain}/${hM}`,g={apiKey:c.apiKey,appName:p.name,v:k.SDK_VERSION},y=xi.get(p.config.apiHost);y&&(g.eid=y);const I=p._getFrameworks();return I.length&&(g.fw=I.join(",")),`${h}?${(0,q.xO)(g).slice(1)}`}function Ey(){return Ey=(0,b.Z)(function*(p){const c=yield function Fu(p){return Ca=Ca||function vy(p){return new Promise((c,h)=>{var g,y,I;function N(){$o(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{$o(),h($t(p,"network-request-failed"))},timeout:Yi.get()})}if(null!==(y=null===(g=rn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(I=rn().gapi)||void 0===I||!I.load){const j=I_("iframefcb");return rn()[j]=()=>{gapi.load?N():h($t(p,"network-request-failed"))},w_(`https://apis.google.com/js/api.js?onload=${j}`).catch(J=>h(J))}N()}}).catch(c=>{throw Ca=null,c})}(p),Ca}(p),h=rn().gapi;return te(h,p,"internal-error"),c.open({where:document.body,url:dp(p),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fM,dontclear:!0},g=>new Promise(function(){var y=(0,b.Z)(function*(I,N){yield g.restyle({setHideOnLeave:!1});const j=$t(p,"network-request-failed"),J=rn().setTimeout(()=>{N(j)},QT.get());function Ce(){rn().clearTimeout(J),I(g)}g.ping(Ce).then(Ce,()=>{N(j)})});return function(I,N){return y.apply(this,arguments)}}()))}),Ey.apply(this,arguments)}const wy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YT=500,XT=600,JT="_blank",eC="http://localhost";class Iy{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Dd="__/auth/handler",fp="emulator/auth/handler",di=encodeURIComponent("fac");function Sd(p,c,h,g,y,I){return ba.apply(this,arguments)}function ba(){return(ba=(0,b.Z)(function*(p,c,h,g,y,I){te(p.config.authDomain,p,"auth-domain-config-required"),te(p.config.apiKey,p,"invalid-api-key");const N={apiKey:p.config.apiKey,appName:p.name,authType:h,redirectUrl:g,v:k.SDK_VERSION,eventId:y};if(c instanceof ao){c.setDefaultLanguage(p.languageCode),N.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(N.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Fe,At]of Object.entries(I||{}))N[Fe]=At}if(c instanceof vn){const Fe=c.getScopes().filter(At=>""!==At);Fe.length>0&&(N.scopes=Fe.join(","))}p.tenantId&&(N.tid=p.tenantId);const j=N;for(const Fe of Object.keys(j))void 0===j[Fe]&&delete j[Fe];const J=yield p._getAppCheckToken(),Ce=J?`#${di}=${encodeURIComponent(J)}`:"";return`${function nC({config:p}){return p.emulator?so(p,fp):`https://${p.authDomain}/${Dd}`}(p)}?${(0,q.xO)(j).slice(1)}${Ce}`})).apply(this,arguments)}const Rd="webStorageSupport",Vu=class Lu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y_,this._completeRedirectFn=up,this._overrideRedirectResult=Ia}_openPopup(c,h,g,y){var I=this;return(0,b.Z)(function*(){var N;Jt(null===(N=I.eventManagers[c._key()])||void 0===N?void 0:N.manager,"_initialize() not called before _openPopup()");const j=yield Sd(c,h,g,Cn(),y);return function tC(p,c,h,g=YT,y=XT){const I=Math.max((window.screen.availHeight-y)/2,0).toString(),N=Math.max((window.screen.availWidth-g)/2,0).toString();let j="";const J=Object.assign(Object.assign({},wy),{width:g.toString(),height:y.toString(),top:I,left:N}),Ce=(0,q.z$)().toLowerCase();h&&(j=hr(Ce)?JT:h),fe(Ce)&&(c=c||eC,J.scrollbars="yes");const Fe=Object.entries(J).reduce((Mi,[Da,xd])=>`${Mi}${Da}=${xd},`,"");if(function dt(p=(0,q.z$)()){var c;return ne(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ce)&&"_self"!==j)return function hp(p,c){const h=document.createElement("a");h.href=p,h.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(g)}(c||"",j),new Iy(null);const At=window.open(c||"",j,Fe);te(At,p,"popup-blocked");try{At.focus()}catch{}return new Iy(At)}(c,j,Pi())})()}_openRedirect(c,h,g,y){var I=this;return(0,b.Z)(function*(){return yield I._originValidation(c),function uo(p){rn().location.href=p}(yield Sd(c,h,g,Cn(),y)),new Promise(()=>{})})()}_initialize(c){const h=c._key();if(this.eventManagers[h]){const{manager:y,promise:I}=this.eventManagers[h];return y?Promise.resolve(y):(Jt(I,"If manager is not set, promise should be"),I)}const g=this.initAndGetManager(c);return this.eventManagers[h]={promise:g},g.catch(()=>{delete this.eventManagers[h]}),g}initAndGetManager(c){var h=this;return(0,b.Z)(function*(){const g=yield function Al(p){return Ey.apply(this,arguments)}(c),y=new WT(c);return g.register("authEvent",I=>(te(I?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(I.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[c._key()]={manager:y},h.iframes[c._key()]=g,y})()}_isIframeWebStorageSupported(c,h){this.iframes[c._key()].send(Rd,{type:Rd},y=>{var I;const N=null===(I=y?.[0])||void 0===I?void 0:I[Rd];void 0!==N&&h(!!N),ht(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const h=c._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function cp(p){return Ta.apply(this,arguments)}(c)),this.originValidationPromises[h]}get _shouldInitProactively(){return fr()||Xe()||ne()}};class Ty{constructor(c){this.factorId=c}_process(c,h,g){switch(h.type){case"enroll":return this._finalizeEnroll(c,h.credential,g);case"signin":return this._finalizeSignIn(c,h.credential);default:return wt("unexpected MultiFactorSessionType")}}}class pp extends Ty{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new pp(c)}_finalizeEnroll(c,h,g){return function AT(p,c){return Z(p,"POST","/v2/accounts/mfaEnrollment:finalize",U(p,c))}(c,{idToken:h,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,h){return function sy(p,c){return Z(p,"POST","/v2/accounts/mfaSignIn:finalize",U(p,c))}(c,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rC=(()=>{class p{constructor(){}static assertion(h){return pp._fromCredential(h)}}return p.FACTOR_ID="phone",p})();var mp="@firebase/auth";class pM{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var h=this;return(0,b.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const h=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,h),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const h=this.internalListeners.get(c);h&&(this.internalListeners.delete(c),h(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function sC(p){(0,k._registerComponent)(new an.wA("auth",(c,{options:h})=>{const g=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),I=c.getProvider("app-check-internal"),{apiKey:N,authDomain:j}=g.options;te(N&&!N.includes(":"),"invalid-api-key",{appName:g.name});const J={apiKey:N,authDomain:j,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nn(p)},Ce=new zx(g,y,I,J);return function b_(p,c){const h=c?.persistence||[],g=(Array.isArray(h)?h:[h]).map(B);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(Ce,h),Ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,h,g)=>{c.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new an.wA("auth-internal",c=>{const h=Dn(c.getProvider("auth").getImmediate());return new pM(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(mp,"1.4.0",function iC(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(p)),(0,k.registerVersion)(mp,"1.4.0","esm2017")}("Browser")},90:(Os,Qn,Ve)=>{Ve.d(Qn,{BH:()=>Ti,DV:()=>dr,Dv:()=>si,GJ:()=>Hn,L:()=>Ct,LL:()=>K,P0:()=>mn,Pz:()=>$t,Sg:()=>jn,UG:()=>wt,UI:()=>$i,US:()=>an,Wj:()=>cn,Wl:()=>Me,Yr:()=>ri,ZB:()=>Ae,ZR:()=>Z,aH:()=>ht,b$:()=>bn,cI:()=>ue,dS:()=>gs,eu:()=>W,g5:()=>k,gK:()=>An,gQ:()=>wr,h$:()=>qt,hl:()=>$,hu:()=>q,jU:()=>Jt,lb:()=>_n,m9:()=>Bs,ne:()=>Ci,p$:()=>se,pd:()=>ps,r3:()=>Yn,ru:()=>Cn,tV:()=>Q,uI:()=>te,ug:()=>ji,vZ:()=>Fs,w1:()=>hs,w9:()=>un,xO:()=>Vs,xb:()=>ii,z$:()=>ot,zd:()=>fs});const b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},q=function(x,R){if(!x)throw k(R)},k=function(x){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+x)},Se=function(x){const R=[];let w=0;for(let C=0;C<x.length;C++){let E=x.charCodeAt(C);E<128?R[w++]=E:E<2048?(R[w++]=E>>6|192,R[w++]=63&E|128):55296==(64512&E)&&C+1<x.length&&56320==(64512&x.charCodeAt(C+1))?(E=65536+((1023&E)<<10)+(1023&x.charCodeAt(++C)),R[w++]=E>>18|240,R[w++]=E>>12&63|128,R[w++]=E>>6&63|128,R[w++]=63&E|128):(R[w++]=E>>12|224,R[w++]=E>>6&63|128,R[w++]=63&E|128)}return R},an={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(x,R){if(!Array.isArray(x))throw Error("encodeByteArray takes an array as a parameter");this.init_();const w=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,C=[];for(let E=0;E<x.length;E+=3){const O=x[E],B=E+1<x.length,Te=B?x[E+1]:0,ge=E+2<x.length,$e=ge?x[E+2]:0;let fe=(15&Te)<<2|$e>>6,Xe=63&$e;ge||(Xe=64,B||(fe=64)),C.push(w[O>>2],w[(3&O)<<4|Te>>4],w[fe],w[Xe])}return C.join("")},encodeString(x,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(x):this.encodeByteArray(Se(x),R)},decodeString(x,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(x):function(x){const R=[];let w=0,C=0;for(;w<x.length;){const E=x[w++];if(E<128)R[C++]=String.fromCharCode(E);else if(E>191&&E<224){const O=x[w++];R[C++]=String.fromCharCode((31&E)<<6|63&O)}else if(E>239&&E<365){const ge=((7&E)<<18|(63&x[w++])<<12|(63&x[w++])<<6|63&x[w++])-65536;R[C++]=String.fromCharCode(55296+(ge>>10)),R[C++]=String.fromCharCode(56320+(1023&ge))}else{const O=x[w++],B=x[w++];R[C++]=String.fromCharCode((15&E)<<12|(63&O)<<6|63&B)}}return R.join("")}(this.decodeStringToByteArray(x,R))},decodeStringToByteArray(x,R){this.init_();const w=R?this.charToByteMapWebSafe_:this.charToByteMap_,C=[];for(let E=0;E<x.length;){const O=w[x.charAt(E++)],Te=E<x.length?w[x.charAt(E)]:0;++E;const $e=E<x.length?w[x.charAt(E)]:64;++E;const ye=E<x.length?w[x.charAt(E)]:64;if(++E,null==O||null==Te||null==$e||null==ye)throw new Mn;C.push(O<<2|Te>>4),64!==$e&&(C.push(Te<<4&240|$e>>2),64!==ye&&C.push($e<<6&192|ye))}return C},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let x=0;x<this.ENCODED_VALS.length;x++)this.byteToCharMap_[x]=this.ENCODED_VALS.charAt(x),this.charToByteMap_[this.byteToCharMap_[x]]=x,this.byteToCharMapWebSafe_[x]=this.ENCODED_VALS_WEBSAFE.charAt(x),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[x]]=x,x>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(x)]=x,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(x)]=x)}}};class Mn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qt=function(x){const R=Se(x);return an.encodeByteArray(R,!0)},Ct=function(x){return qt(x).replace(/\./g,"")},Q=function(x){try{return an.decodeString(x,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function se(x){return Ae(void 0,x)}function Ae(x,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===x&&(x={});break;case Array:x=[];break;default:return R}for(const w in R)!R.hasOwnProperty(w)||!Ye(w)||(x[w]=Ae(x[w],R[w]));return x}function Ye(x){return"__proto__"!==x}const Ge=()=>{try{return function Pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const x=process.env.__FIREBASE_DEFAULTS__;return x?JSON.parse(x):void 0})()||(()=>{if(typeof document>"u")return;let x;try{x=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=x&&Q(x[1]);return R&&JSON.parse(R)})()}catch(x){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${x}`)}},mn=x=>{const R=(x=>{var R,w;return null===(w=null===(R=Ge())||void 0===R?void 0:R.emulatorHosts)||void 0===w?void 0:w[x]})(x);if(!R)return;const w=R.lastIndexOf(":");if(w<=0||w+1===R.length)throw new Error(`Invalid host ${R} with no separate hostname and port!`);const C=parseInt(R.substring(w+1),10);return"["===R[0]?[R.substring(1,w-1),C]:[R.substring(0,w),C]},ht=()=>{var x;return null===(x=Ge())||void 0===x?void 0:x.config},$t=x=>{var R;return null===(R=Ge())||void 0===R?void 0:R[`_${x}`]};class Ti{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,w)=>{this.resolve=R,this.reject=w})}wrapCallback(R){return(w,C)=>{w?this.reject(w):this.resolve(C),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(w):R(w,C))}}}function jn(x,R){if(x.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const C=R||"demo-project",E=x.iat||0,O=x.sub||x.user_id;if(!O)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const B=Object.assign({iss:`https://securetoken.google.com/${C}`,aud:C,iat:E,exp:E+3600,auth_time:E,sub:O,user_id:O,firebase:{sign_in_provider:"custom",identities:{}}},x);return[Ct(JSON.stringify({alg:"none",type:"JWT"})),Ct(JSON.stringify(B)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function wt(){var x;const R=null===(x=Ge())||void 0===x?void 0:x.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Jt(){return"object"==typeof self&&self.self===self}function Cn(){const x="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof x&&void 0!==x.id}function bn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hs(){const x=ot();return x.indexOf("MSIE ")>=0||x.indexOf("Trident/")>=0}function ri(){return!0===b.NODE_CLIENT||!0===b.NODE_ADMIN}function $(){try{return"object"==typeof indexedDB}catch{return!1}}function W(){return new Promise((x,R)=>{try{let w=!0;const C="validate-browser-context-for-indexeddb-analytics-module",E=self.indexedDB.open(C);E.onsuccess=()=>{E.result.close(),w||self.indexedDB.deleteDatabase(C),x(!0)},E.onupgradeneeded=()=>{w=!1},E.onerror=()=>{var O;R((null===(O=E.error)||void 0===O?void 0:O.message)||"")}}catch(w){R(w)}})}class Z extends Error{constructor(R,w,C){super(w),this.code=R,this.customData=C,this.name="FirebaseError",Object.setPrototypeOf(this,Z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(R,w,C){this.service=R,this.serviceName=w,this.errors=C}create(R,...w){const C=w[0]||{},E=`${this.service}/${R}`,O=this.errors[R],B=O?function ce(x,R){return x.replace(ct,(w,C)=>{const E=R[C];return null!=E?String(E):`<${C}?>`})}(O,C):"Error";return new Z(E,`${this.serviceName}: ${B} (${E}).`,C)}}const ct=/\{\$([^}]+)}/g;function ue(x){return JSON.parse(x)}function Me(x){return JSON.stringify(x)}const It=function(x){let R={},w={},C={},E="";try{const O=x.split(".");R=ue(Q(O[0])||""),w=ue(Q(O[1])||""),E=O[2],C=w.d||{},delete w.d}catch{}return{header:R,claims:w,data:C,signature:E}},un=function(x){const w=It(x).claims;return!!w&&"object"==typeof w&&w.hasOwnProperty("iat")},Hn=function(x){const R=It(x).claims;return"object"==typeof R&&!0===R.admin};function Yn(x,R){return Object.prototype.hasOwnProperty.call(x,R)}function dr(x,R){if(Object.prototype.hasOwnProperty.call(x,R))return x[R]}function ii(x){for(const R in x)if(Object.prototype.hasOwnProperty.call(x,R))return!1;return!0}function $i(x,R,w){const C={};for(const E in x)Object.prototype.hasOwnProperty.call(x,E)&&(C[E]=R.call(w,x[E],E,x));return C}function Fs(x,R){if(x===R)return!0;const w=Object.keys(x),C=Object.keys(R);for(const E of w){if(!C.includes(E))return!1;const O=x[E],B=R[E];if(ft(O)&&ft(B)){if(!Fs(O,B))return!1}else if(O!==B)return!1}for(const E of C)if(!w.includes(E))return!1;return!0}function ft(x){return null!==x&&"object"==typeof x}function Vs(x){const R=[];for(const[w,C]of Object.entries(x))Array.isArray(C)?C.forEach(E=>{R.push(encodeURIComponent(w)+"="+encodeURIComponent(E))}):R.push(encodeURIComponent(w)+"="+encodeURIComponent(C));return R.length?"&"+R.join("&"):""}function fs(x){const R={};return x.replace(/^\?/,"").split("&").forEach(C=>{if(C){const[E,O]=C.split("=");R[decodeURIComponent(E)]=decodeURIComponent(O)}}),R}function ps(x){const R=x.indexOf("?");if(!R)return"";const w=x.indexOf("#",R);return x.substring(R,w>0?w:void 0)}class wr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let R=1;R<this.blockSize;++R)this.pad_[R]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(R,w){w||(w=0);const C=this.W_;if("string"==typeof R)for(let ye=0;ye<16;ye++)C[ye]=R.charCodeAt(w)<<24|R.charCodeAt(w+1)<<16|R.charCodeAt(w+2)<<8|R.charCodeAt(w+3),w+=4;else for(let ye=0;ye<16;ye++)C[ye]=R[w]<<24|R[w+1]<<16|R[w+2]<<8|R[w+3],w+=4;for(let ye=16;ye<80;ye++){const fe=C[ye-3]^C[ye-8]^C[ye-14]^C[ye-16];C[ye]=4294967295&(fe<<1|fe>>>31)}let $e,bt,E=this.chain_[0],O=this.chain_[1],B=this.chain_[2],Te=this.chain_[3],ge=this.chain_[4];for(let ye=0;ye<80;ye++){ye<40?ye<20?($e=Te^O&(B^Te),bt=1518500249):($e=O^B^Te,bt=1859775393):ye<60?($e=O&B|Te&(O|B),bt=2400959708):($e=O^B^Te,bt=3395469782);const fe=(E<<5|E>>>27)+$e+ge+bt+C[ye]&4294967295;ge=Te,Te=B,B=4294967295&(O<<30|O>>>2),O=E,E=fe}this.chain_[0]=this.chain_[0]+E&4294967295,this.chain_[1]=this.chain_[1]+O&4294967295,this.chain_[2]=this.chain_[2]+B&4294967295,this.chain_[3]=this.chain_[3]+Te&4294967295,this.chain_[4]=this.chain_[4]+ge&4294967295}update(R,w){if(null==R)return;void 0===w&&(w=R.length);const C=w-this.blockSize;let E=0;const O=this.buf_;let B=this.inbuf_;for(;E<w;){if(0===B)for(;E<=C;)this.compress_(R,E),E+=this.blockSize;if("string"==typeof R){for(;E<w;)if(O[B]=R.charCodeAt(E),++B,++E,B===this.blockSize){this.compress_(O),B=0;break}}else for(;E<w;)if(O[B]=R[E],++B,++E,B===this.blockSize){this.compress_(O),B=0;break}}this.inbuf_=B,this.total_+=w}digest(){const R=[];let w=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let E=this.blockSize-1;E>=56;E--)this.buf_[E]=255&w,w/=256;this.compress_(this.buf_);let C=0;for(let E=0;E<5;E++)for(let O=24;O>=0;O-=8)R[C]=this.chain_[E]>>O&255,++C;return R}}function Ci(x,R){const w=new bi(x,R);return w.subscribe.bind(w)}class bi{constructor(R,w){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=w,this.task.then(()=>{R(this)}).catch(C=>{this.error(C)})}next(R){this.forEachObserver(w=>{w.next(R)})}error(R){this.forEachObserver(w=>{w.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,w,C){let E;if(void 0===R&&void 0===w&&void 0===C)throw new Error("Missing Observer.");E=function Ir(x,R){if("object"!=typeof x||null===x)return!1;for(const w of R)if(w in x&&"function"==typeof x[w])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:w,complete:C},void 0===E.next&&(E.next=Nt),void 0===E.error&&(E.error=Nt),void 0===E.complete&&(E.complete=Nt);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?E.error(this.finalError):E.complete()}catch{}}),this.observers.push(E),O}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let w=0;w<this.observers.length;w++)this.sendOne(w,R)}sendOne(R,w){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{w(this.observers[R])}catch(C){typeof console<"u"&&console.error&&console.error(C)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}const si=function(x,R,w,C){let E;if(C<R?E="at least "+R:C>w&&(E=0===w?"none":"no more than "+w),E)throw new Error(x+" failed: Was called with "+C+(1===C?" argument.":" arguments.")+" Expects "+E+".")};function An(x,R){return`${x} failed: ${R} argument `}function cn(x,R,w,C){if((!C||w)&&"function"!=typeof w)throw new Error(An(x,R)+"must be a valid function.")}function _n(x,R,w,C){if((!C||w)&&("object"!=typeof w||null===w))throw new Error(An(x,R)+"must be a valid context object.")}const gs=function(x){const R=[];let w=0;for(let C=0;C<x.length;C++){let E=x.charCodeAt(C);if(E>=55296&&E<=56319){const O=E-55296;C++,q(C<x.length,"Surrogate pair missing trail surrogate."),E=65536+(O<<10)+(x.charCodeAt(C)-56320)}E<128?R[w++]=E:E<2048?(R[w++]=E>>6|192,R[w++]=63&E|128):E<65536?(R[w++]=E>>12|224,R[w++]=E>>6&63|128,R[w++]=63&E|128):(R[w++]=E>>18|240,R[w++]=E>>12&63|128,R[w++]=E>>6&63|128,R[w++]=63&E|128)}return R},ji=function(x){let R=0;for(let w=0;w<x.length;w++){const C=x.charCodeAt(w);C<128?R++:C<2048?R+=2:C>=55296&&C<=56319?(R+=4,w++):R+=3}return R};function Bs(x){return x&&x._delegate?x._delegate:x}},918:(Os,Qn,Ve)=>{function b(n){return"function"==typeof n}function q(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const k=q(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Se(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Rt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(b(r))try{r()}catch(s){e=s instanceof k?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{qt(s)}catch(o){e=e??[],o instanceof k?e=[...e,...o.errors]:e.push(o)}}if(e)throw new k(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qt(e);else{if(e instanceof Rt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Se(t,e)}remove(e){const{_finalizers:t}=this;t&&Se(t,e),e instanceof Rt&&e._removeParent(this)}}Rt.EMPTY=(()=>{const n=new Rt;return n.closed=!0,n})();const an=Rt.EMPTY;function Mn(n){return n instanceof Rt||n&&"closed"in n&&b(n.remove)&&b(n.add)&&b(n.unsubscribe)}function qt(n){b(n)?n():n.unsubscribe()}const Ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(n,e,...t){const{delegate:r}=Q;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function se(n){Q.setTimeout(()=>{const{onUnhandledError:e}=Ct;if(!e)throw n;e(n)})}function Ae(){}const Ye=_t("C",void 0,void 0);function _t(n,e,t){return{kind:n,value:e,error:t}}let We=null;function Ge(n){if(Ct.useDeprecatedSynchronousErrorHandling){const e=!We;if(e&&(We={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=We;if(We=null,t)throw r}}else n()}class mn extends Rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mn(e)&&e.add(this)):this.destination=Jt}static create(e,t,r){return new jn(e,t,r)}next(e){this.isStopped?wt(function Zn(n){return _t("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?wt(function Pt(n){return _t("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wt(Ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ht=Function.prototype.bind;function $t(n,e){return ht.call(n,e)}class Ti{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ot(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ot(r)}else ot(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ot(t)}}}class jn extends mn{constructor(e,t,r){let i;if(super(),b(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ct.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$t(e.next,s),error:e.error&&$t(e.error,s),complete:e.complete&&$t(e.complete,s)}):i=e}this.destination=new Ti(i)}}function ot(n){Ct.useDeprecatedSynchronousErrorHandling?function cr(n){Ct.useDeprecatedSynchronousErrorHandling&&We&&(We.errorThrown=!0,We.error=n)}(n):se(n)}function wt(n,e){const{onStoppedNotification:t}=Ct;t&&Q.setTimeout(()=>t(n,e))}const Jt={closed:!0,next:Ae,error:function te(n){throw n},complete:Ae},Cn="function"==typeof Symbol&&Symbol.observable||"@@observable";function bn(n){return n}function hs(n){return 0===n.length?bn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let qe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function $(n){return n&&n instanceof mn||function so(n){return n&&b(n.next)&&b(n.error)&&b(n.complete)}(n)&&Mn(n)}(t)?t:new jn(t,r,i);return Ge(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ri(r))((i,s)=>{const o=new jn({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Cn](){return this}pipe(...t){return hs(t)(this)}toPromise(t){return new(t=ri(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ri(n){var e;return null!==(e=n??Ct.Promise)&&void 0!==e?e:Promise}const W=q(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let z=(()=>{class n extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new U(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new W}next(t){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?an:(this.currentObservers=null,s.push(t),new Rt(()=>{this.currentObservers=null,Se(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new qe;return t.source=this,t}}return n.create=(e,t)=>new U(e,t),n})();class U extends z{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:an}}function Z(n){return b(n?.lift)}function K(n){return e=>{if(Z(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new ct(n,e,t,r,i)}class ct extends mn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ue(n,e){return K((t,r)=>{let i=0;t.subscribe(ce(r,s=>{r.next(n.call(e,s,i++))}))})}var Me=Ve(582);const It=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ln(n){return b(n?.then)}function Kt(n){return b(n[Cn])}function un(n){return Symbol.asyncIterator&&b(n?.[Symbol.asyncIterator])}function Hn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const dr=function Yn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ii(n){return b(n?.[dr])}function $i(n){return(0,Me.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Me.qq)(t.read());if(i)return yield(0,Me.qq)(void 0);yield yield(0,Me.qq)(r)}}finally{t.releaseLock()}})}function Fs(n){return b(n?.getReader)}function ft(n){if(n instanceof qe)return n;if(null!=n){if(Kt(n))return function Ls(n){return new qe(e=>{const t=n[Cn]();if(b(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(It(n))return function Vs(n){return new qe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ln(n))return function fs(n){return new qe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,se)})}(n);if(un(n))return wr(n);if(ii(n))return function ps(n){return new qe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Fs(n))return function Ci(n){return wr($i(n))}(n)}throw Hn(n)}function wr(n){return new qe(e=>{(function bi(n,e){var t,r,i,s;return(0,Me.mG)(this,void 0,void 0,function*(){try{for(t=(0,Me.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ai(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Nt(n,e,t=1/0){return b(e)?Nt((r,i)=>ue((s,o)=>e(r,s,i,o))(ft(n(r,i))),t):("number"==typeof e&&(t=e),K((r,i)=>function Ir(n,e,t,r,i,s,o,a){const l=[];let u=0,d=0,f=!1;const m=()=>{f&&!l.length&&!u&&e.complete()},_=T=>u<r?v(T):l.push(T),v=T=>{s&&e.next(T),u++;let A=!1;ft(t(T,d++)).subscribe(ce(e,M=>{i?.(M),s?_(M):e.next(M)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;l.length&&u<r;){const M=l.shift();o?Ai(e,o,()=>v(M)):v(M)}m()}catch(M){e.error(M)}}))};return n.subscribe(ce(e,_,()=>{f=!0,m()})),()=>{a?.()}}(r,i,n,t)))}function si(n=1/0){return Nt(bn,n)}const An=new qe(n=>n.complete());function _n(n){return n&&b(n.schedule)}function gs(n){return n[n.length-1]}function ji(n){return b(gs(n))?n.pop():void 0}function ms(n){return _n(gs(n))?n.pop():void 0}function zn(n,e=0){return K((t,r)=>{t.subscribe(ce(r,i=>Ai(r,n,()=>r.next(i),e),()=>Ai(r,n,()=>r.complete(),e),i=>Ai(r,n,()=>r.error(i),e)))})}function xr(n,e=0){return K((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Bs(n,e){if(!n)throw new Error("Iterable cannot be null");return new qe(t=>{Ai(t,e,()=>{const r=n[Symbol.asyncIterator]();Ai(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function w(n,e){return e?function R(n,e){if(null!=n){if(Kt(n))return function Di(n,e){return ft(n).pipe(xr(e),zn(e))}(n,e);if(It(n))return function Po(n,e){return new qe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(ln(n))return function nl(n,e){return ft(n).pipe(xr(e),zn(e))}(n,e);if(un(n))return Bs(n,e);if(ii(n))return function da(n,e){return new qe(t=>{let r;return Ai(t,e,()=>{r=n[dr](),Ai(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>b(r?.return)&&r.return()})}(n,e);if(Fs(n))return function x(n,e){return Bs($i(n),e)}(n,e)}throw Hn(n)}(n,e):ft(n)}function C(...n){const e=ms(n),t=function Xn(n,e){return"number"==typeof gs(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?ft(r[0]):si(t)(w(r,e)):An}function E(n={}){const{connector:e=(()=>new z),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,u=0,d=!1,f=!1;const m=()=>{a?.unsubscribe(),a=void 0},_=()=>{m(),o=l=void 0,d=f=!1},v=()=>{const T=o;_(),T?.unsubscribe()};return K((T,A)=>{u++,!f&&!d&&m();const M=l=l??e();A.add(()=>{u--,0===u&&!f&&!d&&(a=O(v,i))}),M.subscribe(A),!o&&u>0&&(o=new jn({next:F=>M.next(F),error:F=>{f=!0,m(),a=O(_,t,F),M.error(F)},complete:()=>{d=!0,m(),a=O(_,r),M.complete()}}),ft(T).subscribe(o))})(s)}}function O(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new jn({next:()=>{r.unsubscribe(),n()}});return ft(e(...t)).subscribe(r)}function B(n){for(let e in n)if(n[e]===B)return e;throw Error("Could not find renamed property on target object.")}function Te(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function $e(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bt=B({__forward_ref__:B});function ye(n){return n.__forward_ref__=ye,n.toString=function(){return ge(this())},n}function fe(n){return Xe(n)?n():n}function Xe(n){return"function"==typeof n&&n.hasOwnProperty(bt)&&n.__forward_ref__===ye}function hr(n){return n&&!!n.\u0275providers}const G="https://g.co/ng/security#xss";class S extends Error{constructor(e,t){super(ee(e,t)),this.code=e}}function ee(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function ne(n){return"string"==typeof n?n:null==n?"":String(n)}function yn(n,e){throw new S(-201,!1)}function Hi(n,e){null==n&&function Ft(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function we(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jn(n){return{providers:n.providers||[],imports:n.imports||[]}}function il(n){return b_(n,Qc)||b_(n,D_)}function b_(n,e){return n.hasOwnProperty(e)?n[e]:null}function Nf(n){return n&&(n.hasOwnProperty(Zc)||n.hasOwnProperty(sl))?n[Zc]:null}const Qc=B({\u0275prov:B}),Zc=B({\u0275inj:B}),D_=B({ngInjectableDef:B}),sl=B({ngInjectorDef:B});var Ue=(()=>((Ue=Ue||{})[Ue.Default=0]="Default",Ue[Ue.Host=1]="Host",Ue[Ue.Self=2]="Self",Ue[Ue.SkipSelf=4]="SkipSelf",Ue[Ue.Optional=8]="Optional",Ue))();let Tu;function oi(n){const e=Tu;return Tu=n,e}function S_(n,e,t){const r=il(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ue.Optional?null:void 0!==e?e:void yn(ge(n))}const en=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mo={},Cu="__NG_DI_FLAG__",Yc="ngTempTokenPath",kf="ngTokenPath",pT=/\n/gm,Of="\u0275",M_="__source";let ha;function ol(n){const e=ha;return ha=n,e}function Ff(n,e=Ue.Default){if(void 0===ha)throw new S(-203,!1);return null===ha?S_(n,void 0,e):ha.get(n,e&Ue.Optional?null:void 0,e)}function ae(n,e=Ue.Default){return(function fT(){return Tu}()||Ff)(fe(n),e)}function rt(n,e=Ue.Default){return ae(n,al(e))}function al(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fa(n){const e=[];for(let t=0;t<n.length;t++){const r=fe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,s=Ue.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Lf(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function Si(n,e){return n[Cu]=e,n.prototype[Cu]=e,n}function Lf(n){return n[Cu]}function oo(n){return{toString:n}.toString()}var zi=(()=>((zi=zi||{})[zi.OnPush=0]="OnPush",zi[zi.Default=1]="Default",zi))(),_s=(()=>{return(n=_s||(_s={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",_s;var n})();const ys={},Ot=[],ll=B({\u0275cmp:B}),Vf=B({\u0275dir:B}),Bf=B({\u0275pipe:B}),Jc=B({\u0275mod:B}),jr=B({\u0275fac:B}),bu=B({__NG_ELEMENT_ID__:B});let mT=0;function ai(n){return oo(()=>{const e=$f(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||_s.Emulated,id:"c"+mT++,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null};ed(t);const r=n.dependencies;return t.directiveDefs=Hr(r,!1),t.pipeDefs=Hr(r,!0),t})}function Uf(n){return Lt(n)||kn(n)}function ao(n){return null!==n}function vn(n){return oo(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function N_(n,e){if(null==n)return ys;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function He(n){return oo(()=>{const e=$f(n);return ed(e),e})}function li(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Lt(n){return n[ll]||null}function kn(n){return n[Vf]||null}function ui(n){return n[Bf]||null}function Ri(n,e){const t=n[Jc]||null;if(!t&&!0===e)throw new Error(`Type ${ge(n)} does not have '\u0275mod' property.`);return t}function $f(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:N_(n.inputs,e),outputs:N_(n.outputs)}}function ed(n){n.features?.forEach(e=>e(n))}function Hr(n,e){if(!n)return null;const t=e?ui:Uf;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(ao)}const $s=0,Ie=1,Je=2,tn=3,Wi=4,No=5,Mr=6,ko=7,En=8,ul=9,pa=10,tt=11,td=12,ga=13,jf=14,Oo=15,er=16,ma=17,_a=18,Gi=19,cl=20,nd=21,nn=22,Hf=1,rd=2,Fo=7,dl=8,Lo=9,pr=10;function zr(n){return Array.isArray(n)&&"object"==typeof n[Hf]}function vs(n){return Array.isArray(n)&&!0===n[Hf]}function Du(n){return 0!=(4&n.flags)}function Su(n){return n.componentOffset>-1}function hl(n){return 1==(1&n.flags)}function Es(n){return!!n.template}function zf(n){return 0!=(256&n[Je])}function ya(n,e){return n.hasOwnProperty(jr)?n[jr]:null}class Gf{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function qi(){return sd}function sd(n){return n.type.prototype.ngOnChanges&&(n.setInput=ET),vT}function vT(){const n=od(this),e=n?.current;if(e){const t=n.previous;if(t===ys)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ET(n,e,t,r){const i=this.declaredInputs[t],s=od(n)||function wT(n,e){return n[qf]=e}(n,{previous:ys,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new Gf(l&&l.currentValue,e,a===ys),n[r]=e}qi.ngInherit=!0;const qf="__ngSimpleChanges__";function od(n){return n[qf]||null}const Ki=function(n,e,t){},W_="svg";function Tr(n){for(;Array.isArray(n);)n=n[$s];return n}function Kf(n,e){return Tr(e[n])}function Qi(n,e){return Tr(e[n.index])}function ad(n,e){return n.data[e]}function fl(n,e){return n[e]}function ci(n,e){const t=e[n];return zr(t)?t:t[$s]}function Qf(n){return 64==(64&n[Je])}function va(n,e){return null==e?null:n[e]}function TT(n){n[_a]=0}function q_(n,e){n[No]+=e;let t=n,r=n[tn];for(;null!==r&&(1===e&&1===t[No]||-1===e&&0===t[No]);)r[No]+=e,t=r,r=r[tn]}const Ke={lFrame:cd(null),bindingsEnabled:!0};function DT(){return Ke.bindingsEnabled}function Y(){return Ke.lFrame.lView}function yt(){return Ke.lFrame.tView}function Zf(n){return Ke.lFrame.contextLView=n,n[En]}function pl(n){return Ke.lFrame.contextLView=null,n}function gr(){let n=Q_();for(;null!==n&&64===n.type;)n=n.parent;return n}function Q_(){return Ke.lFrame.currentTNode}function js(n,e){const t=Ke.lFrame;t.currentTNode=n,t.isParent=e}function Z_(){return Ke.lFrame.isParent}function ld(){Ke.lFrame.isParent=!1}function Wr(){const n=Ke.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rn(){return Ke.lFrame.bindingIndex++}function uo(n){const e=Ke.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Xf(n,e){const t=Ke.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jf(e)}function Jf(n){Ke.lFrame.currentDirectiveIndex=n}function ud(n){const e=Ke.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function gl(n){Ke.lFrame.currentQueryIndex=n}function ny(n){const e=n[Ie];return 2===e.type?e.declTNode:1===e.type?n[Mr]:null}function ml(n,e,t){if(t&Ue.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ue.Host||(i=ny(s),null===i||(s=s[Oo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ke.lFrame=ry();return r.currentTNode=e,r.lView=n,!0}function _l(n){const e=ry(),t=n[Ie];Ke.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ry(){const n=Ke.lFrame,e=null===n?null:n.child;return null===e?cd(n):e}function cd(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ep(){const n=Ke.lFrame;return Ke.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const dd=ep;function tp(){const n=ep();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Gr(){return Ke.lFrame.selectedIndex}function Ea(n){Ke.lFrame.selectedIndex=n}function Sn(){const n=Ke.lFrame;return ad(n.tView,n.selectedIndex)}function hd(){Ke.lFrame.currentNamespace=W_}function wa(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-t,l),u&&((n.viewHooks??(n.viewHooks=[])).push(t,u),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,u)),null!=d&&(n.destroyHooks??(n.destroyHooks=[])).push(t,d)}}function fd(n,e,t){gd(n,e,3,t)}function pd(n,e,t,r){(3&n[Je])===t&&gd(n,e,t,r)}function rp(n,e){let t=n[Je];(3&t)===e&&(t&=2047,t+=1,n[Je]=t)}function gd(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[_a]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[_a]+=65536),(a<s||-1==s)&&(OT(n,t,e,l),n[_a]=(4294901760&n[_a])+l+2),l++}function OT(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[Je]>>11<n[_a]>>16&&(3&n[Je])===e){n[Je]+=2048,Ki(4,a,s);try{s.call(a)}finally{Ki(5,a,s)}}}else{Ki(4,a,s);try{s.call(a)}finally{Ki(5,a,s)}}}const yl=-1;class Pu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function xu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];_d(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ay(n){return 3===n||4===n||6===n}function _d(n){return 64===n.charCodeAt(0)}function Mu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||yd(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function yd(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function Nu(n){return n!==yl}function vl(n){return 32767&n}function El(n,e){let t=function BT(n){return n>>16}(n),r=e;for(;t>0;)r=r[Oo],t--;return r}let ip=!0;function Hs(n){const e=ip;return ip=n,e}const uy=255,cy=5;let UT=0;const Zi={};function vd(n,e){const t=Ed(n,e);if(-1!==t)return t;const r=e[Ie];r.firstCreatePass&&(n.injectorIndex=e.length,sp(r.data,n),sp(e,null),sp(r.blueprint,null));const i=op(n,e),s=n.injectorIndex;if(Nu(i)){const o=vl(i),a=El(i,e),l=a[Ie].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function sp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ed(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function op(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=bd(i),null===r)return yl;if(t++,i=i[Oo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return yl}function ku(n,e,t){!function dy(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(bu)&&(r=t[bu]),null==r&&(r=t[bu]=UT++);const i=r&uy;e.data[n+(i>>cy)]|=1<<i}(n,e,t)}function wd(n,e,t){if(t&Ue.Optional||void 0!==n)return n;yn()}function Id(n,e,t,r){if(t&Ue.Optional&&void 0===r&&(r=null),!(t&(Ue.Self|Ue.Host))){const i=n[ul],s=oi(void 0);try{return i?i.get(e,r,t&Ue.Optional):S_(e,r,t&Ue.Optional)}finally{oi(s)}}return wd(r,0,t)}function hy(n,e,t,r=Ue.Default,i){if(null!==n){if(1024&e[Je]){const o=function HT(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[Je]&&!(256&o[Je]);){const a=wl(s,o,t,r|Ue.Self,Zi);if(a!==Zi)return a;let l=s.parent;if(!l){const u=o[nd];if(u){const d=u.get(t,Zi,r);if(d!==Zi)return d}l=bd(o),o=o[Oo]}s=l}return i}(n,e,t,r,Zi);if(o!==Zi)return o}const s=wl(n,e,t,r,Zi);if(s!==Zi)return s}return Id(e,t,r,i)}function wl(n,e,t,r,i){const s=function ap(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(bu)?n[bu]:void 0;return"number"==typeof e?e>=0?e&uy:py:e}(t);if("function"==typeof s){if(!ml(e,n,r))return r&Ue.Host?wd(i,0,r):Id(e,t,r,i);try{const o=s(r);if(null!=o||r&Ue.Optional)return o;yn()}finally{dd()}}else if("number"==typeof s){let o=null,a=Ed(n,e),l=yl,u=r&Ue.Host?e[er][Mr]:null;for((-1===a||r&Ue.SkipSelf)&&(l=-1===a?op(n,e):e[a+8],l!==yl&&fy(r,!1)?(o=e[Ie],a=vl(l),e=El(l,e)):a=-1);-1!==a;){const d=e[Ie];if(Cd(s,a,d.data)){const f=jT(a,e,t,o,r,u);if(f!==Zi)return f}l=e[a+8],l!==yl&&fy(r,e[Ie].data[a+8]===u)&&Cd(s,a,e)?(o=d,a=vl(l),e=El(l,e)):a=-1}}return i}function jT(n,e,t,r,i,s){const o=e[Ie],a=o.data[n+8],d=function Td(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,d=s>>20,m=i?a+d:n.directiveEnd;for(let _=r?a:a+d;_<m;_++){const v=o[_];if(_<l&&t===v||_>=l&&v.type===t)return _}if(i){const _=o[l];if(_&&Es(_)&&_.type===t)return l}return null}(a,o,t,null==r?Su(a)&&ip:r!=o&&0!=(3&a.type),i&Ue.Host&&s===a);return null!==d?co(e,o,d,a):Zi}function co(n,e,t,r){let i=n[t];const s=e.data;if(function FT(n){return n instanceof Pu}(i)){const o=i;o.resolving&&function dt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ne(n)}(s[t]));const a=Hs(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?oi(o.injectImpl):null;ml(n,r,Ue.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function kT(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=sd(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&oi(l),Hs(a),o.resolving=!1,dd()}}return i}function Cd(n,e,t){return!!(t[e+(n>>cy)]&1<<n)}function fy(n,e){return!(n&Ue.Self||n&Ue.Host&&e)}class Ia{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hy(this._tNode,this._lView,e,al(r),t)}}function py(){return new Ia(gr(),Y())}function mr(n){return oo(()=>{const e=n.prototype.constructor,t=e[jr]||lp(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[jr]||lp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function lp(n){return Xe(n)?()=>{const e=lp(fe(n));return e&&e()}:ya(n)}function bd(n){const e=n[Ie],t=e.type;return 2===t?e.declTNode:1===t?n[Mr]:null}const Uo="__parameters__";function Cl(n,e,t){return oo(()=>{const r=function Ou(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,d){const f=l.hasOwnProperty(Uo)?l[Uo]:Object.defineProperty(l,Uo,{value:[]})[Uo];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class me{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=we({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $o(n,e){n.forEach(t=>Array.isArray(t)?$o(t,e):e(t))}function vy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ca(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xi(n,e,t){let r=Al(n,e);return r>=0?n[1|r]=t:(r=~r,function ZT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function dp(n,e){const t=Al(n,e);if(t>=0)return n[1|t]}function Al(n,e){return function wy(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const di=Si(Cl("Optional"),8),ba=Si(Cl("SkipSelf"),4);var qr=(()=>((qr=qr||{})[qr.Important=1]="Important",qr[qr.DashCase=2]="DashCase",qr))();const $u=new Map;let uC=0;const dC="__ngContext__";function hi(n,e){zr(e)?(n[dC]=e[cl],function Tq(n){$u.set(n[cl],n)}(e)):n[dC]=e}let hC;function fC(n,e){return hC(n,e)}function Tp(n){const e=n[tn];return vs(e)?e[tn]:e}function pC(n){return IM(n[ga])}function gC(n){return IM(n[Wi])}function IM(n){for(;null!==n&&!vs(n);)n=n[Wi];return n}function Nd(n,e,t,r,i){if(null!=r){let s,o=!1;vs(r)?s=r:zr(r)&&(o=!0,r=r[$s]);const a=Tr(r);0===n&&null!==t?null==i?SM(e,t,a):ju(e,t,a,i||null,!0):1===n&&null!==t?ju(e,t,a,i||null,!0):2===n?function IC(n,e,t){const r=Ry(n,e);r&&function Hq(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Gq(n,e,t,r,i){const s=t[Fo];s!==Tr(t)&&Nd(e,n,r,s,i);for(let a=pr;a<t.length;a++){const l=t[a];Cp(l[Ie],l,n,e,r,s)}}(e,n,s,t,i)}}function _C(n,e,t){return n.createElement(e,t)}function CM(n,e){const t=n[Lo],r=t.indexOf(e),i=e[tn];512&e[Je]&&(e[Je]&=-513,q_(i,-1)),t.splice(r,1)}function yC(n,e){if(n.length<=pr)return;const t=pr+e,r=n[t];if(r){const i=r[ma];null!==i&&i!==n&&CM(i,r),e>0&&(n[t-1][Wi]=r[Wi]);const s=Ca(n,pr+e);!function Oq(n,e){Cp(n,e,e[tt],2,null,null),e[$s]=null,e[Mr]=null}(r[Ie],r);const o=s[Gi];null!==o&&o.detachView(s[Ie]),r[tn]=null,r[Wi]=null,r[Je]&=-65}return r}function bM(n,e){if(!(128&e[Je])){const t=e[tt];t.destroyNode&&Cp(n,e,t,3,null,null),function Vq(n){let e=n[ga];if(!e)return vC(n[Ie],n);for(;e;){let t=null;if(zr(e))t=e[ga];else{const r=e[pr];r&&(t=r)}if(!t){for(;e&&!e[Wi]&&e!==n;)zr(e)&&vC(e[Ie],e),e=e[tn];null===e&&(e=n),zr(e)&&vC(e[Ie],e),t=e&&e[Wi]}e=t}}(e)}}function vC(n,e){if(!(128&e[Je])){e[Je]&=-65,e[Je]|=128,function jq(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Pu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Ki(4,a,l);try{l.call(a)}finally{Ki(5,a,l)}}else{Ki(4,i,s);try{s.call(i)}finally{Ki(5,i,s)}}}}}(n,e),function $q(n,e){const t=n.cleanup,r=e[ko];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[ko]=null}}(n,e),1===e[Ie].type&&e[tt].destroy();const t=e[ma];if(null!==t&&vs(e[tn])){t!==e[tn]&&CM(t,e);const r=e[Gi];null!==r&&r.detachView(n)}!function Cq(n){$u.delete(n[cl])}(e)}}function AM(n,e,t){return function DM(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[$s];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===_s.None||s===_s.Emulated)return null}return Qi(r,t)}}(n,e.parent,t)}function ju(n,e,t,r,i){n.insertBefore(e,t,r,i)}function SM(n,e,t){n.appendChild(e,t)}function RM(n,e,t,r,i){null!==r?ju(n,e,t,r,i):SM(n,e,t)}function Ry(n,e){return n.parentNode(e)}let EC,My,bC,Ny,MM=function xM(n,e,t){return 40&n.type?Qi(n,t):null};function Py(n,e,t,r){const i=AM(n,r,e),s=e[tt],a=function PM(n,e,t){return MM(n,e,t)}(r.parent||e[Mr],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)RM(s,i,t[l],a,!1);else RM(s,i,t,a,!1);void 0!==EC&&EC(s,r,e,t,i)}function xy(n,e){if(null!==e){const t=e.type;if(3&t)return Qi(e,n);if(4&t)return wC(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return xy(n,r);{const i=n[e.index];return vs(i)?wC(-1,i):Tr(i)}}if(32&t)return fC(e,n)()||Tr(n[e.index]);{const r=kM(n,e);return null!==r?Array.isArray(r)?r[0]:xy(Tp(n[er]),r):xy(n,e.next)}}return null}function kM(n,e){return null!==e?n[er][Mr].projection[e.projection]:null}function wC(n,e){const t=pr+n+1;if(t<e.length){const r=e[t],i=r[Ie].firstChild;if(null!==i)return xy(r,i)}return e[Fo]}function TC(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&hi(Tr(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)TC(n,e,t.child,r,i,s,!1),Nd(e,n,i,a,s);else if(32&l){const u=fC(t,r);let d;for(;d=u();)Nd(e,n,i,d,s);Nd(e,n,i,a,s)}else 16&l?OM(n,e,r,t,i,s):Nd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Cp(n,e,t,r,i,s){TC(t,r,n.firstChild,e,i,s,!1)}function OM(n,e,t,r,i,s){const o=t[er],l=o[Mr].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Nd(e,n,i,l[u],s);else TC(n,e,l,o[tn],i,s,!0)}function FM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function LM(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&xu(n,e,r),null!==i&&FM(n,e,i),null!==s&&function Kq(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function kd(n){return function CC(){if(void 0===My&&(My=null,en.trustedTypes))try{My=en.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return My}()?.createHTML(n)||n}function BM(n){return function AC(){if(void 0===Ny&&(Ny=null,en.trustedTypes))try{Ny=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ny}()?.createHTML(n)||n}class Hu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${G})`}}class Jq extends Hu{getTypeName(){return"HTML"}}class e4 extends Hu{getTypeName(){return"Style"}}class t4 extends Hu{getTypeName(){return"Script"}}class n4 extends Hu{getTypeName(){return"URL"}}class r4 extends Hu{getTypeName(){return"ResourceURL"}}function ws(n){return n instanceof Hu?n.changingThisBreaksApplicationSecurity:n}function jo(n,e){const t=function i4(n){return n instanceof Hu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${G})`)}return t===e}class c4{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(kd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class d4{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=kd(e),t}}const f4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ky(n){return(n=String(n)).match(f4)?n:"unsafe:"+n}function Sa(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function bp(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const HM=Sa("area,br,col,hr,img,wbr"),zM=Sa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),WM=Sa("rp,rt"),DC=bp(HM,bp(zM,Sa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bp(WM,Sa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bp(WM,zM)),SC=Sa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),GM=bp(SC,Sa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),p4=Sa("script,style,template");class g4{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!DC.hasOwnProperty(t))return this.sanitizedSomething=!0,!p4.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!GM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;SC[a]&&(l=ky(l)),this.buf.push(" ",o,'="',qM(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();DC.hasOwnProperty(t)&&!HM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(qM(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const m4=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_4=/([^\#-~ |!])/g;function qM(n){return n.replace(/&/g,"&amp;").replace(m4,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(_4,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Oy;function KM(n,e){let t=null;try{Oy=Oy||function jM(n){const e=new d4(n);return function h4(){try{return!!(new window.DOMParser).parseFromString(kd(""),"text/html")}catch{return!1}}()?new c4(e):e}(n);let r=e?String(e):"";t=Oy.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Oy.getInertBodyElement(r)}while(r!==s);return kd((new g4).sanitizeChildren(RC(t)||t))}finally{if(t){const r=RC(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function RC(n){return"content"in n&&function y4(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var sn=(()=>((sn=sn||{})[sn.NONE=0]="NONE",sn[sn.HTML=1]="HTML",sn[sn.STYLE=2]="STYLE",sn[sn.SCRIPT=3]="SCRIPT",sn[sn.URL=4]="URL",sn[sn.RESOURCE_URL=5]="RESOURCE_URL",sn))();function PC(n){const e=function Ap(){const n=Y();return n&&n[td]}();return e?BM(e.sanitize(sn.HTML,n)||""):jo(n,"HTML")?BM(ws(n)):KM(function VM(){return void 0!==bC?bC:typeof document<"u"?document:void 0}(),ne(n))}const Fy=new me("ENVIRONMENT_INITIALIZER"),XM=new me("INJECTOR",-1),JM=new me("INJECTOR_DEF_TYPES");class eN{get(e,t=Mo){if(t===Mo){const r=new Error(`NullInjectorError: No provider for ${ge(e)}!`);throw r.name="NullInjectorError",r}return t}}function b4(...n){return{\u0275providers:tN(0,n),\u0275fromNgModule:!0}}function tN(n,...e){const t=[],r=new Set;let i;return $o(e,s=>{const o=s;xC(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&nN(i,t),t}function nN(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];MC(i,s=>{e.push(s)})}}function xC(n,e,t,r){if(!(n=fe(n)))return!1;let i=null,s=Nf(n);const o=!s&&Lt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Nf(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)xC(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{$o(s.imports,d=>{xC(d,e,t,r)&&(u||(u=[]),u.push(d))})}finally{}void 0!==u&&nN(u,e)}if(!a){const u=ya(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:Ot},{provide:JM,useValue:i,multi:!0},{provide:Fy,useValue:()=>ae(i),multi:!0})}const l=s.providers;null==l||a||MC(l,d=>{e.push(d)})}}return i!==n&&void 0!==n.providers}function MC(n,e){for(let t of n)hr(t)&&(t=t.\u0275providers),Array.isArray(t)?MC(t,e):e(t)}const A4=B({provide:String,useValue:B});function NC(n){return null!==n&&"object"==typeof n&&A4 in n}function zu(n){return"function"==typeof n}const kC=new me("Set Injector scope."),Ly={},S4={};let OC;function Vy(){return void 0===OC&&(OC=new eN),OC}class Ra{}class sN extends Ra{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,LC(e,o=>this.processProvider(o)),this.records.set(XM,Od(void 0,this)),i.has("environment")&&this.records.set(Ra,Od(void 0,this));const s=this.records.get(kC);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(JM.multi,Ot,Ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=ol(this),r=oi(void 0);try{return e()}finally{ol(t),oi(r)}}get(e,t=Mo,r=Ue.Default){this.assertNotDestroyed(),r=al(r);const i=ol(this),s=oi(void 0);try{if(!(r&Ue.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function N4(n){return"function"==typeof n||"object"==typeof n&&n instanceof me}(e)&&il(e);a=l&&this.injectableDefInScope(l)?Od(FC(e),Ly):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Ue.Self?Vy():this.parent).get(e,t=r&Ue.Optional&&t===Mo?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Yc]=o[Yc]||[]).unshift(ge(e)),i)throw o;return function gT(n,e,t,r){const i=n[Yc];throw e[M_]&&i.unshift(e[M_]),n.message=function Us(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Of?n.slice(2):n;let i=ge(e);if(Array.isArray(e))i=e.map(ge).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ge(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(pT,"\n  ")}`}("\n"+n.message,i,t,r),n[kf]=i,n[Yc]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{oi(s),ol(i)}}resolveInjectorInitializers(){const e=ol(this),t=oi(void 0);try{const r=this.get(Fy.multi,Ot,Ue.Self);for(const i of r)i()}finally{ol(e),oi(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=zu(e=fe(e))?e:fe(e&&e.provide);const r=function P4(n){return NC(n)?Od(void 0,n.useValue):Od(oN(n),Ly)}(e);if(zu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Od(void 0,Ly,!0),i.factory=()=>fa(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Ly&&(t.value=S4,t.value=t.factory()),"object"==typeof t.value&&t.value&&function M4(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=fe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function FC(n){const e=il(n),t=null!==e?e.factory:ya(n);if(null!==t)return t;if(n instanceof me)throw new S(204,!1);if(n instanceof Function)return function R4(n){const e=n.length;if(e>0)throw function Fu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new S(204,!1);const t=function A_(n){return n&&(n[Qc]||n[D_])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function oN(n,e,t){let r;if(zu(n)){const i=fe(n);return ya(i)||FC(i)}if(NC(n))r=()=>fe(n.useValue);else if(function iN(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...fa(n.deps||[]));else if(function rN(n){return!(!n||!n.useExisting)}(n))r=()=>ae(fe(n.useExisting));else{const i=fe(n&&(n.useClass||n.provide));if(!function x4(n){return!!n.deps}(n))return ya(i)||FC(i);r=()=>new i(...fa(n.deps))}return r}function Od(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function LC(n,e){for(const t of n)Array.isArray(t)?LC(t,e):t&&hr(t)?LC(t.\u0275providers,e):e(t)}class k4{}class aN{}class F4{resolveComponentFactory(e){throw function O4(n){const e=Error(`No component factory found for ${ge(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Fd=(()=>{class n{}return n.NULL=new F4,n})();function L4(){return Ld(gr(),Y())}function Ld(n,e){return new Ji(Qi(n,e))}let Ji=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=L4,n})();class Dp{}let Pa=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function B4(){const n=Y(),t=ci(gr().index,n);return(zr(t)?t:n)[tt]}(),n})(),U4=(()=>{class n{}return n.\u0275prov=we({token:n,providedIn:"root",factory:()=>null}),n})();class Vd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const uN=new Vd("15.2.10"),VC={},BC="ngOriginalError";function UC(n){return n[BC]}class Bd{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&UC(e);for(;t&&UC(t);)t=UC(t);return t||null}}function xa(n){return n instanceof Function?n():n}function dN(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const hN="ng-template";function Y4(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==dN(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function fN(n){return 4===n.type&&n.value!==hN}function X4(n,e,t){return e===(4!==n.type||t?n.value:hN)}function J4(n,e,t){let r=4;const i=n.attrs||[],s=function n3(n){for(let e=0;e<n.length;e++)if(ay(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!X4(n,l,t)||""===l&&1===e.length){if(ho(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!Y4(n.attrs,u,t)){if(ho(r))return!1;o=!0}continue}const f=e3(8&r?"class":l,i,fN(n),t);if(-1===f){if(ho(r))return!1;o=!0;continue}if(""!==u){let m;m=f>s?"":i[f+1].toLowerCase();const _=8&r?m:null;if(_&&-1!==dN(_,u,0)||2&r&&u!==m){if(ho(r))return!1;o=!0}}}}else{if(!o&&!ho(r)&&!ho(l))return!1;if(o&&ho(l))continue;o=!1,r=l|1&r}}return ho(r)||o}function ho(n){return 0==(1&n)}function e3(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function r3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function pN(n,e,t=!1){for(let r=0;r<e.length;r++)if(J4(n,e[r],t))return!0;return!1}function gN(n,e){return n?":not("+e.trim()+")":e}function s3(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ho(o)&&(e+=gN(s,i),i=""),r=o,s=s||!ho(r);t++}return""!==i&&(e+=gN(s,i)),e}const nt={};function jt(n){mN(yt(),Y(),Gr()+n,!1)}function mN(n,e,t,r){if(!r)if(3==(3&e[Je])){const s=n.preOrderCheckHooks;null!==s&&fd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&pd(e,s,0,t)}Ea(t)}function EN(n,e=null,t=null,r){const i=wN(n,e,t,r);return i.resolveInjectorInitializers(),i}function wN(n,e=null,t=null,r,i=new Set){const s=[t||Ot,b4(n)];return r=r||("object"==typeof n?void 0:ge(n)),new sN(s,e||Vy(),r||null,i)}let fi=(()=>{class n{static create(t,r){if(Array.isArray(t))return EN({name:""},r,t,"");{const i=t.name??"";return EN({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Mo,n.NULL=new eN,n.\u0275prov=we({token:n,providedIn:"any",factory:()=>ae(XM)}),n.__NG_ELEMENT_ID__=-1,n})();function X(n,e=Ue.Default){const t=Y();return null===t?ae(n,e):hy(gr(),t,fe(n),e)}function RN(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];gl(t[r]),o.contentQueries(2,e[s],s)}}}function Uy(n,e,t,r,i,s,o,a,l,u,d){const f=e.blueprint.slice();return f[$s]=i,f[Je]=76|r,(null!==d||n&&1024&n[Je])&&(f[Je]|=1024),TT(f),f[tn]=f[Oo]=n,f[En]=t,f[pa]=o||n&&n[pa],f[tt]=a||n&&n[tt],f[td]=l||n&&n[td]||null,f[ul]=u||n&&n[ul]||null,f[Mr]=s,f[cl]=function Iq(){return uC++}(),f[nd]=d,f[er]=2==e.type?n[er]:f,f}function jd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function WC(n,e,t,r,i){const s=Q_(),o=Z_(),l=n.data[e]=function x3(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function Yf(){return Ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Ru(){const n=Ke.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return js(s,!0),s}function Sp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function GC(n,e,t){_l(e);try{const r=n.viewQuery;null!==r&&t0(1,r,t);const i=n.template;null!==i&&PN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&RN(n,e),n.staticViewQueries&&t0(2,n.viewQuery,t);const s=n.components;null!==s&&function S3(n,e){for(let t=0;t<e.length;t++)Y3(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Je]&=-5,tp()}}function $y(n,e,t,r){const i=e[Je];if(128!=(128&i)){_l(e);try{TT(e),function J_(n){return Ke.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&PN(n,e,t,2,r);const o=3==(3&i);if(o){const u=n.preOrderCheckHooks;null!==u&&fd(e,u,null)}else{const u=n.preOrderHooks;null!==u&&pd(e,u,0,null),rp(e,0)}if(function Q3(n){for(let e=pC(n);null!==e;e=gC(e)){if(!e[rd])continue;const t=e[Lo];for(let r=0;r<t.length;r++){const i=t[r];512&i[Je]||q_(i[tn],1),i[Je]|=512}}}(e),function K3(n){for(let e=pC(n);null!==e;e=gC(e))for(let t=pr;t<e.length;t++){const r=e[t],i=r[Ie];Qf(r)&&$y(i,r,i.template,r[En])}}(e),null!==n.contentQueries&&RN(n,e),o){const u=n.contentCheckHooks;null!==u&&fd(e,u)}else{const u=n.contentHooks;null!==u&&pd(e,u,1),rp(e,1)}!function A3(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ea(~i);else{const s=i,o=t[++r],a=t[++r];Xf(o,s),a(2,e[s])}}}finally{Ea(-1)}}(n,e);const a=n.components;null!==a&&function D3(n,e){for(let t=0;t<e.length;t++)Z3(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&t0(2,l,r),o){const u=n.viewCheckHooks;null!==u&&fd(e,u)}else{const u=n.viewHooks;null!==u&&pd(e,u,2),rp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Je]&=-41,512&e[Je]&&(e[Je]&=-513,q_(e[tn],-1))}finally{tp()}}}function PN(n,e,t,r,i){const s=Gr(),o=2&r;try{Ea(-1),o&&e.length>nn&&mN(n,e,nn,!1),Ki(o?2:0,i),t(r,i)}finally{Ea(s),Ki(o?3:1,i)}}function qC(n,e,t){if(Du(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function KC(n,e,t){DT()&&(function V3(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Su(t)&&function W3(n,e,t){const r=Qi(e,n),i=xN(t),s=n[pa],o=jy(n,Uy(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vd(t,e),hi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],u=co(e,n,a,t);hi(u,e),null!==o&&G3(0,a-i,u,l,0,o),Es(l)&&(ci(t.index,e)[En]=co(e,n,a,t))}}(n,e,t,Qi(t,e)),64==(64&t.flags)&&FN(n,e,t))}function QC(n,e,t=Qi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function xN(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=ZC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function ZC(n,e,t,r,i,s,o,a,l,u){const d=nn+r,f=d+i,m=function R3(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:nt);return t}(d,f),_="function"==typeof u?u():u;return m[Ie]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1}}function NN(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?kN(t,e,i,s):r.hasOwnProperty(i)&&kN(t,e,r[i],s)}return t}function kN(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Is(n,e,t,r,i,s,o,a){const l=Qi(e,t);let d,u=e.inputs;!a&&null!=u&&(d=u[r])?(n0(n,t,d,r,i),Su(e)&&function k3(n,e){const t=ci(e,n);16&t[Je]||(t[Je]|=32)}(t,e.index)):3&e.type&&(r=function N3(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function YC(n,e,t,r){if(DT()){const i=null===r?null:{"":-1},s=function U3(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(pN(e,o.selectors,!1))if(r||(r=[]),Es(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),XC(n,e,a.length)}else r.unshift(o),XC(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&ON(n,e,t,o,i,a),i&&function $3(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new S(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Mu(t.mergedAttrs,t.attrs)}function ON(n,e,t,r,i,s){for(let u=0;u<r.length;u++)ku(vd(t,e),n,r[u].type);!function H3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const d=r[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Sp(n,e,r.length,null);for(let u=0;u<r.length;u++){const d=r[u];t.mergedAttrs=Mu(t.mergedAttrs,d.hostAttrs),z3(n,t,e,l,d),j3(l,d,i),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function M3(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,u=null;for(let d=e.directiveStart;d<i;d++){const f=s[d],m=t?t.get(f):null,v=m?m.outputs:null;l=NN(f.inputs,d,l,m?m.inputs:null),u=NN(f.outputs,d,u,v);const T=null===l||null===o||fN(e)?null:q3(l,d,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(n,t,s)}function FN(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function PT(){return Ke.lFrame.currentDirectiveIndex}();try{Ea(s);for(let a=r;a<i;a++){const l=n.data[a],u=e[a];Jf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&B3(l,u)}}finally{Ea(-1),Jf(o)}}function B3(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function XC(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function j3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Es(e)&&(t[""]=n)}}function z3(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ya(i.type)),o=new Pu(s,Es(i),X);n.blueprint[r]=o,t[r]=o,function F3(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function L3(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Sp(n,t,i.hostVars,nt),i)}function Ho(n,e,t,r,i,s){const o=Qi(n,e);!function JC(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?ne(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[tt],o,s,n.value,t,r,i)}function G3(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],d=o[l++],f=o[l++];null!==a?r.setInput(t,f,u,d):t[d]=f}}}function q3(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function LN(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function Z3(n,e){const t=ci(e,n);if(Qf(t)){const r=t[Ie];48&t[Je]?$y(r,t,r.template,t[En]):t[No]>0&&e0(t)}}function e0(n){for(let r=pC(n);null!==r;r=gC(r))for(let i=pr;i<r.length;i++){const s=r[i];if(Qf(s))if(512&s[Je]){const o=s[Ie];$y(o,s,o.template,s[En])}else s[No]>0&&e0(s)}const t=n[Ie].components;if(null!==t)for(let r=0;r<t.length;r++){const i=ci(t[r],n);Qf(i)&&i[No]>0&&e0(i)}}function Y3(n,e){const t=ci(e,n),r=t[Ie];(function X3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),GC(r,t,t[En])}function jy(n,e){return n[ga]?n[jf][Wi]=e:n[ga]=e,n[jf]=e,e}function Hy(n){for(;n;){n[Je]|=32;const e=Tp(n);if(zf(n)&&!e)return n;n=e}return null}function zy(n,e,t,r=!0){const i=e[pa];i.begin&&i.begin();try{$y(n,e,n.template,t)}catch(o){throw r&&$N(e,o),o}finally{i.end&&i.end()}}function t0(n,e,t){gl(0),e(n,t)}function VN(n){return n[ko]||(n[ko]=[])}function BN(n){return n.cleanup||(n.cleanup=[])}function $N(n,e){const t=n[ul],r=t?t.get(Bd,null):null;r&&r.handleError(e)}function n0(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],u=n.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Wy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=$e(i,a):2==s&&(r=$e(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Gy(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Tr(s)),vs(s))for(let a=pr;a<s.length;a++){const l=s[a],u=l[Ie].firstChild;null!==u&&Gy(l[Ie],l,u,r)}const o=t.type;if(8&o)Gy(n,e,t.child,r);else if(32&o){const a=fC(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=kM(e,t);if(Array.isArray(a))r.push(...a);else{const l=Tp(e[er]);Gy(l[Ie],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Rp{get rootNodes(){const e=this._lView,t=e[Ie];return Gy(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(e){this._lView[En]=e}get destroyed(){return 128==(128&this._lView[Je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[tn];if(vs(e)){const t=e[dl],r=t?t.indexOf(this):-1;r>-1&&(yC(e,r),Ca(t,r))}this._attachedToViewContainer=!1}bM(this._lView[Ie],this._lView)}onDestroy(e){!function MN(n,e,t,r){const i=VN(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&BN(n).push(r,i.length-1))}(this._lView[Ie],this._lView,null,e)}markForCheck(){Hy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Je]&=-65}reattach(){this._lView[Je]|=64}detectChanges(){zy(this._lView[Ie],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lq(n,e){Cp(n,e,e[tt],2,null,null)}(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class J3 extends Rp{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;zy(e[Ie],e,e[En],!1)}checkNoChanges(){}get context(){return null}}class jN extends Fd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Lt(e);return new Pp(t,this.ngModule)}}function HN(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class t9{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=al(r);const i=this.injector.get(e,VC,r);return i!==VC||t===VC?i:this.parentInjector.get(e,t,r)}}class Pp extends aN{get inputs(){return HN(this.componentDef.inputs)}get outputs(){return HN(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function o3(n){return n.map(s3).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ra?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new t9(e,s):e,a=o.get(Dp,null);if(null===a)throw new S(407,!1);const l=o.get(U4,null),u=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",f=r?function P3(n,e,t){return n.selectRootElement(e,t===_s.ShadowDom)}(u,r,this.componentDef.encapsulation):_C(u,d,function e9(n){const e=n.toLowerCase();return"svg"===e?W_:"math"===e?"math":null}(d)),m=this.componentDef.onPush?288:272,_=ZC(0,null,null,1,0,null,null,null,null,null),v=Uy(null,_,null,m,null,null,a,u,l,o,null);let T,A;_l(v);try{const M=this.componentDef;let F,P=null;M.findHostDirectiveDefs?(F=[],P=new Map,M.findHostDirectiveDefs(M,F,P),F.push(M)):F=[M];const V=function r9(n,e){const t=n[Ie],r=nn;return n[r]=e,jd(t,r,2,"#host",null)}(v,f),oe=function i9(n,e,t,r,i,s,o,a){const l=i[Ie];!function s9(n,e,t,r){for(const i of n)e.mergedAttrs=Mu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Wy(e,e.mergedAttrs,!0),null!==t&&LM(r,t,e))}(r,n,e,o);const u=s.createRenderer(e,t),d=Uy(i,xN(t),null,t.onPush?32:16,i[n.index],n,s,u,a||null,null,null);return l.firstCreatePass&&XC(l,n,r.length-1),jy(i,d),i[n.index]=d}(V,f,M,F,v,a,u);A=ad(_,nn),f&&function a9(n,e,t,r){if(r)xu(n,t,["ng-version",uN.full]);else{const{attrs:i,classes:s}=function a3(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ho(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&xu(n,t,i),s&&s.length>0&&FM(n,t,s.join(" "))}}(u,M,f,r),void 0!==t&&function l9(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(A,this.ngContentSelectors,t),T=function o9(n,e,t,r,i,s){const o=gr(),a=i[Ie],l=Qi(o,i);ON(a,i,o,t,null,r);for(let d=0;d<t.length;d++)hi(co(i,a,o.directiveStart+d,o),i);FN(a,i,o),l&&hi(l,i);const u=co(i,a,o.directiveStart+o.componentOffset,o);if(n[En]=i[En]=u,null!==s)for(const d of s)d(u,e);return qC(a,o,n),u}(oe,M,F,P,v,[u9]),GC(_,v,null)}finally{tp()}return new n9(this.componentType,T,Ld(A,v),v,A)}}class n9 extends k4{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new J3(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;n0(s[Ie],s,i,e,t),Hy(ci(this._tNode.index,s))}}get injector(){return new Ia(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function u9(){const n=gr();wa(Y()[Ie],n)}function Qt(n){let e=function zN(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Es(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=r0(n.inputs),o.declaredInputs=r0(n.declaredInputs),o.outputs=r0(n.outputs);const a=i.hostBindings;a&&f9(n,a);const l=i.viewQuery,u=i.contentQueries;if(l&&d9(n,l),u&&h9(n,u),Te(n.inputs,i.inputs),Te(n.declaredInputs,i.declaredInputs),Te(n.outputs,i.outputs),Es(i)&&i.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function c9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Mu(i.hostAttrs,t=Mu(t,i.hostAttrs))}}(r)}function r0(n){return n===ys?{}:n===Ot?[]:n}function d9(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function h9(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function f9(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function qy(n){return!!s0(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function s0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function zo(n,e,t){return n[e]=t}function pi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function es(n,e,t,r){const i=Y();return pi(i,rn(),e)&&(yt(),Ho(Sn(),i,n,e,t,r)),es}function gi(n,e,t,r,i,s,o,a){const l=Y(),u=yt(),d=n+nn,f=u.firstCreatePass?function T9(n,e,t,r,i,s,o,a,l){const u=e.consts,d=jd(e,n,4,o||null,va(u,a));YC(e,t,d,va(u,l)),wa(e,d);const f=d.tView=ZC(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}(d,u,l,e,t,r,i,s,o):u.data[d];js(f,!1);const m=l[tt].createComment("");Py(u,l,m,f),hi(m,l),jy(l,l[d]=LN(m,l,m,f)),hl(f)&&KC(u,l,f),null!=o&&QC(l,f,a)}function On(n,e,t){const r=Y();return pi(r,rn(),e)&&Is(yt(),Sn(),r,n,e,r[tt],t,!1),On}function o0(n,e,t,r,i){const o=i?"class":"style";n0(n,t,e.inputs[o],o,r)}function Re(n,e,t,r){const i=Y(),s=yt(),o=nn+n,a=i[tt],l=s.firstCreatePass?function b9(n,e,t,r,i,s){const o=e.consts,l=jd(e,n,2,r,va(o,i));return YC(e,t,l,va(o,s)),null!==l.attrs&&Wy(l,l.attrs,!1),null!==l.mergedAttrs&&Wy(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],u=i[o]=_C(a,e,function NT(){return Ke.lFrame.currentNamespace}()),d=hl(l);return js(l,!0),LM(a,u,l),32!=(32&l.flags)&&Py(s,i,u,l),0===function CT(){return Ke.lFrame.elementDepthCount}()&&hi(u,i),function bT(){Ke.lFrame.elementDepthCount++}(),d&&(KC(s,i,l),qC(s,l,i)),null!==r&&QC(i,l),Re}function Le(){let n=gr();Z_()?ld():(n=n.parent,js(n,!1));const e=n;!function AT(){Ke.lFrame.elementDepthCount--}();const t=yt();return t.firstCreatePass&&(wa(t,n),Du(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function LT(n){return 0!=(8&n.flags)}(e)&&o0(t,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function VT(n){return 0!=(16&n.flags)}(e)&&o0(t,e,Y(),e.stylesWithoutHost,!1),Le}function Nr(n,e,t,r){return Re(n,e,t,r),Le(),Nr}function Mp(n,e,t){const r=Y(),i=yt(),s=n+nn,o=i.firstCreatePass?function A9(n,e,t,r,i){const s=e.consts,o=va(s,r),a=jd(e,n,8,"ng-container",o);return null!==o&&Wy(a,o,!0),YC(e,t,a,va(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];js(o,!0);const a=r[s]=r[tt].createComment("");return Py(i,r,a,o),hi(a,r),hl(o)&&(KC(i,r,o),qC(i,o,r)),null!=t&&QC(r,o),Mp}function Np(){let n=gr();const e=yt();return Z_()?ld():(n=n.parent,js(n,!1)),e.firstCreatePass&&(wa(e,n),Du(n)&&e.queries.elementEnd(n)),Np}function a0(){return Y()}function kp(n){return!!n&&"function"==typeof n.then}function sk(n){return!!n&&"function"==typeof n.subscribe}const l0=sk;function nr(n,e,t,r){const i=Y(),s=yt(),o=gr();return function ak(n,e,t,r,i,s,o){const a=hl(r),u=n.firstCreatePass&&BN(n),d=e[En],f=VN(e);let m=!0;if(3&r.type||o){const T=Qi(r,e),A=o?o(T):T,M=f.length,F=o?V=>o(Tr(V[r.index])):r.index;let P=null;if(!o&&a&&(P=function D9(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ko],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==P)(P.__ngLastListenerFn__||P).__ngNextListenerFn__=s,P.__ngLastListenerFn__=s,m=!1;else{s=uk(r,e,d,s,!1);const V=t.listen(A,i,s);f.push(s,V),u&&u.push(i,F,M,M+1)}}else s=uk(r,e,d,s,!1);const _=r.outputs;let v;if(m&&null!==_&&(v=_[i])){const T=v.length;if(T)for(let A=0;A<T;A+=2){const oe=e[v[A]][v[A+1]].subscribe(s),le=f.length;f.push(s,oe),u&&u.push(i,r.index,le,-(le+1))}}}(s,i,i[tt],o,n,e,r),nr}function lk(n,e,t,r){try{return Ki(6,e,t),!1!==t(r)}catch(i){return $N(n,i),!1}finally{Ki(7,e,t)}}function uk(n,e,t,r,i){return function s(o){if(o===Function)return r;Hy(n.componentOffset>-1?ci(n.index,e):e);let l=lk(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)l=lk(e,t,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ts(n=1){return function np(n){return(Ke.lFrame.contextLView=function iy(n,e){for(;n>0;)e=e[Oo],n--;return e}(n,Ke.lFrame.contextLView))[En]}(n)}function Qy(n,e){return n<<17|e<<2}function Dl(n){return n>>17&32767}function c0(n){return 2|n}function Gu(n){return(131068&n)>>2}function d0(n,e){return-131069&n|e<<2}function h0(n){return 1|n}function vk(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Dl(s):Gu(s),l=!1;for(;0!==a&&(!1===l||o);){const d=n[a+1];F9(n[a],e)&&(l=!0,n[a+1]=r?h0(d):c0(d)),a=r?Dl(d):Gu(d)}l&&(n[t+1]=r?c0(s):h0(s))}function F9(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Al(n,e)>=0}const Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ek(n){return n.substring(Cr.key,Cr.keyEnd)}function wk(n,e){const t=Cr.textEnd;return t===e?-1:(e=Cr.keyEnd=function U9(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Cr.key=e,t),Xd(n,e,t))}function Xd(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Jd(n,e,t){return fo(n,e,t,!1),Jd}function Zy(n,e){return fo(n,e,null,!0),Zy}function Na(n){!function po(n,e,t,r){const i=yt(),s=uo(2);i.firstUpdatePass&&Dk(i,null,s,r);const o=Y();if(t!==nt&&pi(o,s,t)){const a=i.data[Gr()];if(xk(a,r)&&!Ak(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=$e(l,t||"")),o0(i,a,o,t,r)}else!function Z9(n,e,t,r,i,s,o,a){i===nt&&(i=Ot);let l=0,u=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;null!==d||null!==f;){const m=l<i.length?i[l+1]:void 0,_=u<s.length?s[u+1]:void 0;let T,v=null;d===f?(l+=2,u+=2,m!==_&&(v=f,T=_)):null===f||null!==d&&d<f?(l+=2,v=d):(u+=2,v=f,T=_),null!==v&&Rk(n,e,t,r,v,T,o,a),d=l<i.length?i[l]:null,f=u<s.length?s[u]:null}}(i,a,o,o[tt],o[s+1],o[s+1]=function K9(n,e,t){if(null==t||""===t)return Ot;const r=[],i=ws(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(Q9,Go,n,!0)}function Go(n,e){for(let t=function V9(n){return function Tk(n){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=n.length}(n),wk(n,Xd(n,0,Cr.textEnd))}(e);t>=0;t=wk(e,t))xi(n,Ek(e),!0)}function fo(n,e,t,r){const i=Y(),s=yt(),o=uo(2);s.firstUpdatePass&&Dk(s,n,o,r),e!==nt&&pi(i,o,e)&&Rk(s,s.data[Gr()],i,i[tt],n,i[o+1]=function Y9(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ge(ws(n)))),n}(e,t),r,o)}function Ak(n,e){return e>=n.expandoStartIndex}function Dk(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Gr()],o=Ak(n,t);xk(s,r)&&null===e&&!o&&(e=!1),e=function z9(n,e,t,r){const i=ud(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Op(t=f0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=f0(i,n,e,t,r),null===s){let l=function W9(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Gu(r))return n[Dl(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=f0(null,n,e,l[1],r),l=Op(l,e.attrs,r),function G9(n,e,t,r){n[Dl(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function q9(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Op(r,n[s].hostAttrs,t);return Op(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function k9(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Dl(o),l=Gu(o);n[r]=t;let d,u=!1;if(Array.isArray(t)?(d=t[1],(null===d||Al(t,d)>0)&&(u=!0)):d=t,i)if(0!==l){const m=Dl(n[a+1]);n[r+1]=Qy(m,a),0!==m&&(n[m+1]=d0(n[m+1],r)),n[a+1]=function M9(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Qy(a,0),0!==a&&(n[a+1]=d0(n[a+1],r)),a=r;else n[r+1]=Qy(l,0),0===a?a=r:n[l+1]=d0(n[l+1],r),l=r;u&&(n[r+1]=c0(n[r+1])),vk(n,d,r,!0),vk(n,d,r,!1),function O9(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Al(s,e)>=0&&(t[r+1]=h0(t[r+1]))}(e,d,n,r,s),o=Qy(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function f0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Op(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Op(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xi(n,o,!!t||e[++s]))}return void 0===n?null:n}function Q9(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&xi(n,r,t)}function Rk(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1],d=function N9(n){return 1==(1&n)}(u)?Pk(l,e,t,i,Gu(u),o):void 0;Yy(d)||(Yy(s)||function x9(n){return 2==(2&n)}(u)&&(s=Pk(l,null,t,i,a,o)),function qq(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:qr.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=qr.Important),n.setStyle(t,r,i,s))}}(r,o,Kf(Gr(),t),i,s))}function Pk(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],u=Array.isArray(l),d=u?l[1]:l,f=null===d;let m=t[i+1];m===nt&&(m=f?Ot:void 0);let _=f?dp(m,r):d===r?m:void 0;if(u&&!Yy(_)&&(_=dp(l,r)),Yy(_)&&(a=_,o))return a;const v=n[i+1];i=o?Dl(v):Gu(v)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=dp(l,r))}return a}function Yy(n){return void 0!==n}function xk(n,e){return 0!=(n.flags&(e?8:16))}function Qe(n,e=""){const t=Y(),r=yt(),i=n+nn,s=r.firstCreatePass?jd(r,i,1,e,null):r.data[i],o=t[i]=function mC(n,e){return n.createText(e)}(t[tt],e);Py(r,t,o,s),js(s,!1)}function Fp(n){return go("",n,""),Fp}function go(n,e,t){const r=Y(),i=function zd(n,e,t,r){return pi(n,rn(),t)?e+ne(t)+r:nt}(r,n,e,t);return i!==nt&&function Ma(n,e,t){const r=Kf(e,n);!function TM(n,e,t){n.setValue(e,t)}(n[tt],r,t)}(r,Gr(),i),go}function p0(n,e,t){const r=Y();if(pi(r,rn(),e)){const s=yt(),o=Sn();Is(s,o,r,n,e,function UN(n,e,t){return(null===n||Es(n))&&(t=function IT(n){for(;Array.isArray(n);){if("object"==typeof n[Hf])return n;n=n[$s]}return null}(t[e.index])),t[tt]}(ud(s.data),o,r),t,!0)}return p0}const qu=void 0;var _5=["en",[["a","p"],["AM","PM"],qu],[["AM","PM"],qu,qu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qu,"{1} 'at' {0}",qu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function m5(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let eh={};function Ni(n){const e=function y5(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=Yk(e);if(t)return t;const r=e.split("-")[0];if(t=Yk(r),t)return t;if("en"===r)return _5;throw new S(701,!1)}function Yk(n){return n in eh||(eh[n]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[n]),eh[n]}var Ee=(()=>((Ee=Ee||{})[Ee.LocaleId=0]="LocaleId",Ee[Ee.DayPeriodsFormat=1]="DayPeriodsFormat",Ee[Ee.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ee[Ee.DaysFormat=3]="DaysFormat",Ee[Ee.DaysStandalone=4]="DaysStandalone",Ee[Ee.MonthsFormat=5]="MonthsFormat",Ee[Ee.MonthsStandalone=6]="MonthsStandalone",Ee[Ee.Eras=7]="Eras",Ee[Ee.FirstDayOfWeek=8]="FirstDayOfWeek",Ee[Ee.WeekendRange=9]="WeekendRange",Ee[Ee.DateFormat=10]="DateFormat",Ee[Ee.TimeFormat=11]="TimeFormat",Ee[Ee.DateTimeFormat=12]="DateTimeFormat",Ee[Ee.NumberSymbols=13]="NumberSymbols",Ee[Ee.NumberFormats=14]="NumberFormats",Ee[Ee.CurrencyCode=15]="CurrencyCode",Ee[Ee.CurrencySymbol=16]="CurrencySymbol",Ee[Ee.CurrencyName=17]="CurrencyName",Ee[Ee.Currencies=18]="Currencies",Ee[Ee.Directionality=19]="Directionality",Ee[Ee.PluralCase=20]="PluralCase",Ee[Ee.ExtraData=21]="ExtraData",Ee))();const th="en-US";let Xk=th;function _0(n,e,t,r,i){if(n=fe(n),Array.isArray(n))for(let s=0;s<n.length;s++)_0(n[s],e,t,r,i);else{const s=yt(),o=Y();let a=zu(n)?n:fe(n.provide),l=oN(n);const u=gr(),d=1048575&u.providerIndexes,f=u.directiveStart,m=u.providerIndexes>>20;if(zu(n)||!n.multi){const _=new Pu(l,i,X),v=v0(a,e,i?d:d+m,f);-1===v?(ku(vd(u,o),s,a),y0(s,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(_),o.push(_)):(t[v]=_,o[v]=_)}else{const _=v0(a,e,d+m,f),v=v0(a,e,d,d+m),A=v>=0&&t[v];if(i&&!A||!i&&!(_>=0&&t[_])){ku(vd(u,o),s,a);const M=function g6(n,e,t,r,i){const s=new Pu(n,t,X);return s.multi=[],s.index=e,s.componentProviders=0,TO(s,i,r&&!t),s}(i?p6:f6,t.length,i,r,l);!i&&A&&(t[v].providerFactory=M),y0(s,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(M),o.push(M)}else y0(s,n,_>-1?_:v,TO(t[i?v:_],l,!i&&r));!i&&r&&A&&t[v].componentProviders++}}}function y0(n,e,t,r){const i=zu(e),s=function D4(n){return!!n.useClass}(e);if(i||s){const l=(s?fe(e.useClass):e).prototype.ngOnDestroy;if(l){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(t);-1===d?u.push(t,[r,l]):u[d+1].push(r,l)}else u.push(t,l)}}}function TO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function v0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function f6(n,e,t,r){return E0(this.multi,[])}function p6(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=co(t,t[Ie],this.providerFactory.index,r);s=a.slice(0,o),E0(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],E0(i,s);return s}function E0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function wn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function h6(n,e,t){const r=yt();if(r.firstCreatePass){const i=Es(n);_0(t,r.data,r.blueprint,i,!0),_0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class nh{}class CO{}class bO extends nh{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jN(this);const r=Ri(e);this._bootstrapComponents=xa(r.bootstrap),this._r3Injector=wN(e,t,[{provide:nh,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class w0 extends CO{constructor(e){super(),this.moduleType=e}create(e){return new bO(this.moduleType,e)}}class _6 extends nh{constructor(e,t,r){super(),this.componentFactoryResolver=new jN(this),this.instance=null;const i=new sN([...e,{provide:nh,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],t||Vy(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function nv(n,e,t=null){return new _6(n,e,t).injector}let y6=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=tN(0,t.type),i=r.length>0?nv([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=we({token:n,providedIn:"environment",factory:()=>new n(ae(Ra))}),n})();function rv(n){n.getStandaloneInjector=e=>e.get(y6).getOrCreateStandaloneInjector(n)}function NO(n,e,t,r,i,s){const o=e+t;return pi(n,o,i)?zo(n,o+1,s?r.call(s,i):r(i)):function jp(n,e){const t=n[e];return t===nt?void 0:t}(n,o+1)}function T0(n,e){const t=yt();let r;const i=n+nn;t.firstCreatePass?(r=function F6(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=ya(r.type)),o=oi(X);try{const a=Hs(!1),l=s();return Hs(a),function C9(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Y(),i,l),l}finally{oi(o)}}function C0(n,e,t){const r=n+nn,i=Y(),s=fl(i,r);return function Hp(n,e){return n[Ie].data[e].pure}(i,r)?NO(i,Wr(),e,s.transform,t,s):s.transform(t)}function b0(n){return e=>{setTimeout(n,void 0,e)}}const Gn=class $6 extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=b0(s),i&&(i=b0(i)),o&&(o=b0(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Rt&&e.add(a),a}};let ka=(()=>{class n{}return n.__NG_ELEMENT_ID__=W6,n})();const H6=ka,z6=class extends H6{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,i=Uy(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[ma]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Gi];return null!==o&&(i[Gi]=o.createEmbeddedView(r)),GC(r,i,e),new Rp(i)}};function W6(){return iv(gr(),Y())}function iv(n,e){return 4&n.type?new z6(e,n,Ld(n,e)):null}let mo=(()=>{class n{}return n.__NG_ELEMENT_ID__=G6,n})();function G6(){return function UO(n,e){let t;const r=e[n.index];if(vs(r))t=r;else{let i;if(8&n.type)i=Tr(r);else{const s=e[tt];i=s.createComment("");const o=Qi(n,e);ju(s,Ry(s,o),i,function zq(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=LN(r,e,i,n),jy(e,t)}return new VO(t,n,e)}(gr(),Y())}const q6=mo,VO=class extends q6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ld(this._hostTNode,this._hostLView)}get injector(){return new Ia(this._hostTNode,this._hostLView)}get parentInjector(){const e=op(this._hostTNode,this._hostLView);if(Nu(e)){const t=El(e,this._hostLView),r=vl(e);return new Ia(t[Ie].data[r+8],t)}return new Ia(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=BO(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-pr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function Ta(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,r=f.injector,i=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const l=o?e:new Pp(Lt(e)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const m=(o?u:this.parentInjector).get(Ra,null);m&&(s=m)}const d=l.create(u,i,void 0,s);return this.insert(d.hostView,a),d}insert(e,t){const r=e._lView,i=r[Ie];if(function iM(n){return vs(n[tn])}(r)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const f=r[tn],m=new VO(f,f[Mr],f[tn]);m.detach(m.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Bq(n,e,t,r){const i=pr+r,s=t.length;r>0&&(t[i-1][Wi]=e),r<s-pr?(e[Wi]=t[i],vy(t,pr+r,e)):(t.push(e),e[Wi]=null),e[tn]=t;const o=e[ma];null!==o&&t!==o&&function Uq(n,e){const t=n[Lo];e[er]!==e[tn][tn][er]&&(n[rd]=!0),null===t?n[Lo]=[e]:t.push(e)}(o,e);const a=e[Gi];null!==a&&a.insertView(n),e[Je]|=64}(i,r,o,s);const a=wC(s,o),l=r[tt],u=Ry(l,o[Fo]);return null!==u&&function Fq(n,e,t,r,i,s){r[$s]=i,r[Mr]=e,Cp(n,r,t,1,i,s)}(i,o[Mr],l,r,u,a),e.attachToViewContainerRef(),vy(D0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=BO(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=yC(this._lContainer,t);r&&(Ca(D0(this._lContainer),t),bM(r[Ie],r))}detach(e){const t=this._adjustIndex(e,-1),r=yC(this._lContainer,t);return r&&null!=Ca(D0(this._lContainer),t)?new Rp(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function BO(n){return n[dl]}function D0(n){return n[dl]||(n[dl]=[])}function QO(n,e){return iv(n,e)}function ov(...n){}const Wp=new me("Application Initializer");let av=(()=>{class n{constructor(t){this.appInits=t,this.resolve=ov,this.reject=ov,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(kp(s))t.push(s);else if(l0(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ae(Wp,8))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gp=new me("AppId",{providedIn:"root",factory:function f1(){return`${V0()}${V0()}${V0()}`}});function V0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const p1=new me("Platform Initializer"),Ku=new me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),g1=new me("AnimationModuleType");let E8=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Oa=new me("LocaleId",{providedIn:"root",factory:()=>rt(Oa,Ue.Optional|Ue.SkipSelf)||function w8(){return typeof $localize<"u"&&$localize.locale||th}()});class T8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let m1=(()=>{class n{compileModuleSync(t){return new w0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=xa(Ri(t).declarations).reduce((o,a)=>{const l=Lt(a);return l&&o.push(new Pp(l)),o},[]);return new T8(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A8=(()=>Promise.resolve(0))();function B0(n){typeof Zone>"u"?A8.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gn(!1),this.onMicrotaskEmpty=new Gn(!1),this.onStable=new Gn(!1),this.onError=new Gn(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function D8(){let n=en.requestAnimationFrame,e=en.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function P8(n){const e=()=>{!function R8(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(en,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,$0(n),n.isCheckStableRunning=!0,U0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),$0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return v1(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),E1(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return v1(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),E1(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,$0(n),U0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vt.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(Vt.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,S8,ov,ov);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const S8={};function U0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function v1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function E1(n){n._nesting--,U0(n)}class x8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gn,this.onMicrotaskEmpty=new Gn,this.onStable=new Gn,this.onError=new Gn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const w1=new me(""),lv=new me("");let z0,j0=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,z0||(function M8(n){z0=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vt.assertNotInAngularZone(),B0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(ae(Vt),ae(H0),ae(lv))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),H0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return z0?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Fa=!1;let Sl=null;const I1=new me("AllowMultipleToken"),W0=new me("PlatformDestroyListeners"),T1=new me("appBootstrapListener");class C1{constructor(e,t){this.name=e,this.token=t}}function A1(n,e,t=[]){const r=`Platform: ${e}`,i=new me(r);return(s=[])=>{let o=G0();if(!o||o.injector.get(I1,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function O8(n){if(Sl&&!Sl.get(I1,!1))throw new S(400,!1);Sl=n;const e=n.get(S1);(function b1(n){const e=n.get(p1,null);e&&e.forEach(t=>t())})(n)}(function D1(n=[],e){return fi.create({name:e,providers:[{provide:kC,useValue:"platform"},{provide:W0,useValue:new Set([()=>Sl=null])},...n]})}(a,r))}return function L8(n){const e=G0();if(!e)throw new S(401,!1);return e}()}}function G0(){return Sl?.get(S1)??null}let S1=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function P1(n,e){let t;return t="noop"===n?new x8:("zone.js"===n?void 0:n)||new Vt(e),t}(r?.ngZone,function R1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Vt,useValue:i}];return i.run(()=>{const o=fi.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Bd,null);if(!l)throw new S(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{uv(this._modules,a),u.unsubscribe()})}),function x1(n,e,t){try{const r=t();return kp(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(av);return u.runInitializers(),u.donePromise.then(()=>(function Jk(n){Hi(n,"Expected localeId to be defined"),"string"==typeof n&&(Xk=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Oa,th)||th),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=M1({},r);return function N8(n,e,t){const r=new w0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Rl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new S(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(W0,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ae(fi))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function M1(n,e){return Array.isArray(e)?e.reduce(M1,n):{...n,...e}}let Rl=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new qe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new qe(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),B0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=C(s,o.pipe(E()))}bootstrap(t,r){const i=t instanceof aN;if(!this._injector.get(av).done){!i&&function lo(n){const e=Lt(n)||kn(n)||ui(n);return null!==e&&e.standalone}(t);throw new S(405,Fa)}let o;o=i?t:this._injector.get(Fd).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function k8(n){return n.isBoundToModule}(o)?void 0:this._injector.get(nh),u=o.create(fi.NULL,[],r||o.selector,a),d=u.location.nativeElement,f=u.injector.get(w1,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),uv(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;uv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(T1,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>uv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(ae(Vt),ae(Ra),ae(Bd))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let cv=(()=>{class n{}return n.__NG_ELEMENT_ID__=B8,n})();function B8(n){return function U8(n,e,t){if(Su(n)&&!t){const r=ci(n.index,e);return new Rp(r,r)}return 47&n.type?new Rp(e[er],e):null}(gr(),Y(),16==(16&n))}class L1{constructor(){}supports(e){return qy(e)}create(e){return new G8(e)}}const W8=(n,e)=>e;class G8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||W8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<B1(r,i,s)?t:r,a=B1(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,d=l-i;if(u!=d){for(let m=0;m<u;m++){const _=m<s.length?s[m]:s[m]=0,v=_+m;d<=v&&v<u&&(s[m]=_+1)}s[o.previousIndex]=d-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!qy(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function E9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new q8(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new V1),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new V1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class q8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class K8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class V1{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new K8,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function B1(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class U1{constructor(){}supports(e){return e instanceof Map||s0(e)}create(){return new Q8}}class Q8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||s0(e)))throw new S(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new Z8(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Z8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $1(){return new fv([new L1])}let fv=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||$1()),deps:[[n,new ba,new di]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new S(901,!1)}}return n.\u0275prov=we({token:n,providedIn:"root",factory:$1}),n})();function j1(){return new sh([new U1])}let sh=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||j1()),deps:[[n,new ba,new di]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new S(901,!1)}}return n.\u0275prov=we({token:n,providedIn:"root",factory:j1}),n})();const J8=A1(null,"core",[]);let eK=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ae(Rl))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({}),n})();function oh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let X0=null;function La(){return X0}class rK{}const _r=new me("DocumentToken");let J0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return function iK(){return ae(H1)}()},providedIn:"platform"}),n})();const sK=new me("Location Initialized");let H1=(()=>{class n extends J0{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return La().getBaseHref(this._doc)}onPopState(t){const r=La().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=La().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){z1()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){z1()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ae(_r))},n.\u0275prov=we({token:n,factory:function(){return function oK(){return new H1(ae(_r))}()},providedIn:"platform"}),n})();function z1(){return!!window.history.pushState}function eb(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function W1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Va(n){return n&&"?"!==n[0]?"?"+n:n}let Zu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return rt(q1)},providedIn:"root"}),n})();const G1=new me("appBaseHref");let q1=(()=>{class n extends Zu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??rt(_r).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return eb(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Va(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Va(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Va(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(J0),ae(G1,8))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aK=(()=>{class n extends Zu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=eb(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Va(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Va(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(J0),ae(G1,8))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),tb=(()=>{class n{constructor(t){this._subject=new Gn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function cK(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(W1(K1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Va(r))}normalize(t){return n.stripTrailingSlash(function uK(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,K1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Va(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Va,n.joinWithSlash=eb,n.stripTrailingSlash=W1,n.\u0275fac=function(t){return new(t||n)(ae(Zu))},n.\u0275prov=we({token:n,factory:function(){return function lK(){return new tb(ae(Zu))}()},providedIn:"root"}),n})();function K1(n){return n.replace(/\/index.html$/,"")}var ns=(()=>((ns=ns||{})[ns.Decimal=0]="Decimal",ns[ns.Percent=1]="Percent",ns[ns.Currency=2]="Currency",ns[ns.Scientific=3]="Scientific",ns))(),je=(()=>((je=je||{})[je.Decimal=0]="Decimal",je[je.Group=1]="Group",je[je.List=2]="List",je[je.PercentSign=3]="PercentSign",je[je.PlusSign=4]="PlusSign",je[je.MinusSign=5]="MinusSign",je[je.Exponential=6]="Exponential",je[je.SuperscriptingExponent=7]="SuperscriptingExponent",je[je.PerMille=8]="PerMille",je[je.Infinity=9]="Infinity",je[je.NaN=10]="NaN",je[je.TimeSeparator=11]="TimeSeparator",je[je.CurrencyDecimal=12]="CurrencyDecimal",je[je.CurrencyGroup=13]="CurrencyGroup",je))();function Ws(n,e){const t=Ni(n),r=t[Ee.NumberSymbols][e];if(typeof r>"u"){if(e===je.CurrencyDecimal)return t[Ee.NumberSymbols][je.Decimal];if(e===je.CurrencyGroup)return t[Ee.NumberSymbols][je.Group]}return r}const FK=/^(\d+)?\.((\d+)(-(\d+))?)?$/,eF=22,Iv=".",Kp="0",LK=";",VK=",",ob="#";function ub(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class ZK{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let oF=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ZK(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),aF(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{aF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(X(mo),X(ka),X(fv))},n.\u0275dir=He({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function aF(n,e){n.context.$implicit=e.item}let Tv=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new XK,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(X(mo),X(ka))},n.\u0275dir=He({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class XK{constructor(){this.$implicit=null,this.ngIf=null}}function lF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ge(e)}'.`)}function vo(n,e){return new S(2100,!1)}class t7{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class n7{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const r7=new n7,i7=new t7;let cF=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(kp(t))return r7;if(sk(t))return i7;throw vo()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(X(cv,16))},n.\u0275pipe=li({name:"async",type:n,pure:!1,standalone:!0}),n})(),hF=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function pb(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function jK(n,e,t){return function ab(n,e,t,r,i,s,o=!1){let a="",l=!1;if(isFinite(n)){let u=function zK(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf(Iv))>-1&&(e=e.replace(Iv,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Kp;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Kp;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>eF&&(r=r.splice(0,eF-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(u=function HK(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(u));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(s){const F=s.match(FK);if(null===F)throw new Error(`${s} is not a valid digit info`);const P=F[1],V=F[3],oe=F[5];null!=P&&(d=ub(P)),null!=V&&(f=ub(V)),null!=oe?m=ub(oe):null!=V&&f>m&&(m=f)}!function WK(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=0!==s;const u=e+n.integerLen,d=r.reduceRight(function(f,m,_,v){return v[_]=(m+=f)<10?m:m-10,l&&(0===v[_]&&_>=u?v.pop():l=!1),m>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}(u,f,m);let _=u.digits,v=u.integerLen;const T=u.exponent;let A=[];for(l=_.every(F=>!F);v<d;v++)_.unshift(0);for(;v<0;v++)_.unshift(0);v>0?A=_.splice(v,_.length):(A=_,_=[0]);const M=[];for(_.length>=e.lgSize&&M.unshift(_.splice(-e.lgSize,_.length).join(""));_.length>e.gSize;)M.unshift(_.splice(-e.gSize,_.length).join(""));_.length&&M.unshift(_.join("")),a=M.join(Ws(t,r)),A.length&&(a+=Ws(t,i)+A.join("")),T&&(a+=Ws(t,je.Exponential)+"+"+T)}else a=Ws(t,je.Infinity);return a=n<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function lb(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(LK),i=r[0],s=r[1],o=-1!==i.indexOf(Iv)?i.split(Iv):[i.substring(0,i.lastIndexOf(Kp)+1),i.substring(i.lastIndexOf(Kp)+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf(ob));for(let d=0;d<l.length;d++){const f=l.charAt(d);f===Kp?t.minFrac=t.maxFrac=d+1:f===ob?t.maxFrac=d+1:t.posSuf+=f}const u=a.split(VK);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){const d=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(ob);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function nb(n,e){return Ni(n)[Ee.NumberFormats][e]}(e,ns.Decimal),Ws(e,je.MinusSign)),e,je.Group,je.Decimal,t)}(function gb(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw vo()}}}return n.\u0275fac=function(t){return new(t||n)(X(Oa,16))},n.\u0275pipe=li({name:"number",type:n,pure:!0,standalone:!0}),n})();let fF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({}),n})();const pF="browser";function gF(n){return n===pF}let b7=(()=>{class n{}return n.\u0275prov=we({token:n,providedIn:"root",factory:()=>new A7(ae(_r),window)}),n})();class A7{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function D7(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=mF(this.window.history)||mF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mF(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class tQ extends rK{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class yb extends tQ{static makeCurrent(){!function nK(n){X0||(X0=n)}(new yb)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function nQ(){return Zp=Zp||document.querySelector("base"),Zp?Zp.getAttribute("href"):null}();return null==t?null:function rQ(n){Av=Av||document.createElement("a"),Av.setAttribute("href",n);const e=Av.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qK(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Av,Zp=null;const wF=new me("TRANSITION_ID"),sQ=[{provide:Wp,useFactory:function iQ(n,e,t){return()=>{t.get(av).donePromise.then(()=>{const r=La(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[wF,_r,fi],multi:!0}];let aQ=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const Dv=new me("EventManagerPlugins");let Sv=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ae(Dv),ae(Vt))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class IF{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=La().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let TF=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Yp=(()=>{class n extends TF{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(ae(_r))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const vb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Eb=/%COMP%/g,AF=new me("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function DF(n,e){return e.flat(100).map(t=>t.replace(Eb,n))}function SF(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rv=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new wb(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof xF?i.applyToHost(t):i instanceof Ib&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case _s.Emulated:s=new xF(o,a,r,this.appId,l);break;case _s.ShadowDom:return new pQ(o,a,t,r);default:s=new Ib(o,a,r,l)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ae(Sv),ae(Yp),ae(Gp),ae(AF))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class wb{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vb[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(PF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(PF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=vb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=vb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qr.DashCase|qr.Important)?e.style.setProperty(t,r,i&qr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,SF(r)):this.eventManager.addEventListener(e,t,SF(r))}}function PF(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class pQ extends wb{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=DF(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ib extends wb{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=DF(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class xF extends Ib{constructor(e,t,r,i,s){const o=i+"-"+r.id;super(e,t,r,s,o),this.contentAttr=function dQ(n){return"_ngcontent-%COMP%".replace(Eb,n)}(o),this.hostAttr=function hQ(n){return"_nghost-%COMP%".replace(Eb,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let gQ=(()=>{class n extends IF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(ae(_r))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const MF=["alt","control","meta","shift"],mQ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_Q={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yQ=(()=>{class n extends IF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>La().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),MF.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=mQ[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),MF.forEach(o=>{o!==i&&(0,_Q[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ae(_r))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const kF=[{provide:Ku,useValue:pF},{provide:p1,useValue:function vQ(){yb.makeCurrent()},multi:!0},{provide:_r,useFactory:function wQ(){return function Xq(n){bC=n}(document),document},deps:[]}],IQ=A1(J8,"browser",kF),OF=new me(""),FF=[{provide:lv,useClass:class oQ{addToWindow(e){en.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},en.getAllAngularTestabilities=()=>e.getAllTestabilities(),en.getAllAngularRootElements=()=>e.getAllRootElements(),en.frameworkStabilizers||(en.frameworkStabilizers=[]),en.frameworkStabilizers.push(r=>{const i=en.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?La().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:w1,useClass:j0,deps:[Vt,H0,lv]},{provide:j0,useClass:j0,deps:[Vt,H0,lv]}],LF=[{provide:kC,useValue:"root"},{provide:Bd,useFactory:function EQ(){return new Bd},deps:[]},{provide:Dv,useClass:gQ,multi:!0,deps:[_r,Vt,Ku]},{provide:Dv,useClass:yQ,multi:!0,deps:[_r]},{provide:Rv,useClass:Rv,deps:[Sv,Yp,Gp,AF]},{provide:Dp,useExisting:Rv},{provide:TF,useExisting:Yp},{provide:Yp,useClass:Yp,deps:[_r]},{provide:Sv,useClass:Sv,deps:[Dv,Vt]},{provide:class S7{},useClass:aQ,deps:[]},[]];let VF=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Gp,useValue:t.appId},{provide:wF,useExisting:Gp},sQ]}}}return n.\u0275fac=function(t){return new(t||n)(ae(OF,12))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({providers:[...LF,...FF],imports:[fF,eK]}),n})(),BF=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(ae(_r))},n.\u0275prov=we({token:n,factory:function(t){let r=null;return r=t?new t:function CQ(){return new BF(ae(_r))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let jF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(t){let r=null;return r=t?new(t||n):ae(HF),r},providedIn:"root"}),n})(),HF=(()=>{class n extends jF{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case sn.NONE:return r;case sn.HTML:return jo(r,"HTML")?ws(r):KM(this._doc,String(r)).toString();case sn.STYLE:return jo(r,"Style")?ws(r):r;case sn.SCRIPT:if(jo(r,"Script"))return ws(r);throw new Error("unsafe value used in a script context");case sn.URL:return jo(r,"URL")?ws(r):ky(String(r));case sn.RESOURCE_URL:if(jo(r,"ResourceURL"))return ws(r);throw new Error(`unsafe value used in a resource URL context (see ${G})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${G})`)}}bypassSecurityTrustHtml(t){return function s4(n){return new Jq(n)}(t)}bypassSecurityTrustStyle(t){return function o4(n){return new e4(n)}(t)}bypassSecurityTrustScript(t){return function a4(n){return new t4(n)}(t)}bypassSecurityTrustUrl(t){return function l4(n){return new n4(n)}(t)}bypassSecurityTrustResourceUrl(t){return function u4(n){return new r4(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(_r))},n.\u0275prov=we({token:n,factory:function(t){let r=null;return r=t?new t:function RQ(n){return new HF(n.get(_r))}(ae(fi)),r},providedIn:"root"}),n})();function Ne(...n){return w(n,ms(n))}class Eo extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Pv=q(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:PQ}=Array,{getPrototypeOf:xQ,prototype:MQ,keys:NQ}=Object;function zF(n){if(1===n.length){const e=n[0];if(PQ(e))return{args:e,keys:null};if(function kQ(n){return n&&"object"==typeof n&&xQ(n)===MQ}(e)){const t=NQ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:OQ}=Array;function bb(n){return ue(e=>function FQ(n,e){return OQ(e)?n(...e):n(e)}(n,e))}function WF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function GF(...n){const e=ms(n),t=ji(n),{args:r,keys:i}=zF(n);if(0===r.length)return w([],e);const s=new qe(function LQ(n,e,t=bn){return r=>{qF(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)qF(e,()=>{const u=w(n[l],e);let d=!1;u.subscribe(ce(r,f=>{s[l]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>WF(i,o):bn));return t?s.pipe(bb(t)):s}function qF(n,e,t){n?Ai(t,n,e):e()}function Xp(...n){return function VQ(){return si(1)}()(w(n,ms(n)))}function xv(n){return new qe(e=>{ft(n()).subscribe(e)})}function ah(n,e){const t=b(n)?n:()=>n,r=i=>i.error(t());return new qe(e?i=>e.schedule(r,0,i):r)}function Ab(){return K((n,e)=>{let t=null;n._refCount++;const r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Db extends qe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Z(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Rt;const t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Rt.EMPTY)}return e}refCount(){return Ab()(this)}}function Ln(n,e){return K((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ce(r,l=>{i?.unsubscribe();let u=0;const d=s++;ft(n(l,d)).subscribe(i=ce(r,f=>r.next(e?e(l,f,d,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function rs(n){return n<=0?()=>An:K((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Oi(n,e){return K((t,r)=>{let i=0;t.subscribe(ce(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Mv(n){return K((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function KF(n=UQ){return K((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function UQ(){return new Pv}function Ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oi((i,s)=>n(i,s,r)):bn,rs(1),t?Mv(e):KF(()=>new Pv))}function Yu(n,e){return b(e)?Nt(n,e,1):Nt(n,1)}function kr(n,e,t){const r=b(n)||e||t?{next:n,error:e,complete:t}:n;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ce(s,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),s.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):bn}function $a(n){return K((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ce(t,void 0,void 0,o=>{s=ft(n(o,$a(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Nv(n,e){return K(function $Q(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(ce(o,d=>{const f=u++;l=a?n(l,d,f):(a=!0,d),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Sb(n){return n<=0?()=>An:K((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function QF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oi((i,s)=>n(i,s,r)):bn,Sb(1),t?Mv(e):KF(()=>new Pv))}function ZF(n){return ue(()=>n)}function Rb(n){return K((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const it="primary",Jp=Symbol("RouteTitle");class HQ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function lh(n){return new HQ(n)}function zQ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function qo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!YF(n[i],e[i]))return!1;return!0}function YF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function XF(n){return Array.prototype.concat.apply([],n)}function JF(n){return n.length>0?n[n.length-1]:null}function Kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xl(n){return l0(n)?n:kp(n)?w(Promise.resolve(n)):Ne(n)}const kv=!1,GQ={exact:function nL(n,e,t){if(!Xu(n.segments,e.segments)||!Ov(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nL(n.children[r],e.children[r],t))return!1;return!0},subset:rL},eL={exact:function qQ(n,e){return qo(n,e)},subset:function KQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>YF(n[t],e[t]))},ignored:()=>!0};function tL(n,e,t){return GQ[t.paths](n.root,e.root,t.matrixParams)&&eL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rL(n,e,t){return iL(n,e,e.segments,t)}function iL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Xu(i,t)||e.hasChildren()||!Ov(i,t,r))}if(n.segments.length===t.length){if(!Xu(n.segments,t)||!Ov(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!rL(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Xu(n.segments,i)&&Ov(n.segments,i,r)&&n.children[it])&&iL(n.children[it],e,s,r)}}function Ov(n,e,t){return e.every((r,i)=>eL[t](n[i].parameters,r.parameters))}class Ml{constructor(e=new pt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lh(this.queryParams)),this._queryParamMap}toString(){return YQ.serialize(this)}}class pt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fv(this)}}class eg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=lh(this.parameters)),this._parameterMap}toString(){return aL(this)}}function Xu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return new Pb},providedIn:"root"}),n})();class Pb{parse(e){const t=new oZ(e);return new Ml(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ng(e.root,!0)}`,r=function eZ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Lv(t)}=${Lv(i)}`).join("&"):`${Lv(t)}=${Lv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function XQ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const YQ=new Pb;function Fv(n){return n.segments.map(e=>aL(e)).join("/")}function ng(n,e){if(!n.hasChildren())return Fv(n);if(e){const t=n.children[it]?ng(n.children[it],!1):"",r=[];return Kr(n.children,(i,s)=>{s!==it&&r.push(`${s}:${ng(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ZQ(n,e){let t=[];return Kr(n.children,(r,i)=>{i===it&&(t=t.concat(e(r,i)))}),Kr(n.children,(r,i)=>{i!==it&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===it?[ng(n.children[it],!1)]:[`${i}:${ng(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[it]?`${Fv(n)}/${t[0]}`:`${Fv(n)}/(${t.join("//")})`}}function sL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lv(n){return sL(n).replace(/%3B/gi,";")}function xb(n){return sL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vv(n){return decodeURIComponent(n)}function oL(n){return Vv(n.replace(/\+/g,"%20"))}function aL(n){return`${xb(n.path)}${function JQ(n){return Object.keys(n).map(e=>`;${xb(e)}=${xb(n[e])}`).join("")}(n.parameters)}`}const tZ=/^[^\/()?;=#]+/;function Bv(n){const e=n.match(tZ);return e?e[0]:""}const nZ=/^[^=?&#]+/,iZ=/^[^&#]+/;class oZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[it]=new pt(e,t)),r}parseSegment(){const e=Bv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,kv);return this.capture(e),new eg(Vv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Bv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Bv(this.remaining);i&&(r=i,this.capture(r))}e[Vv(t)]=Vv(r)}parseQueryParam(e){const t=function rZ(n){const e=n.match(nZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function sZ(n){const e=n.match(iZ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=oL(t),s=oL(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Bv(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,kv);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=it);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[it]:new pt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,kv)}}function Mb(n){return n.segments.length>0?new pt([],{[it]:n}):n}function Uv(n){const e={};for(const r of Object.keys(n.children)){const s=Uv(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function aZ(n){if(1===n.numberOfChildren&&n.children[it]){const e=n.children[it];return new pt(n.segments.concat(e.segments),e.children)}return n}(new pt(n.segments,e))}function Ju(n){return n instanceof Ml}const Nb=!1;function lZ(n,e,t,r,i){if(0===t.length)return uh(e.root,e.root,e.root,r,i);const s=function hL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Kr(s.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new dL(t,e,r)}(t);return s.toRoot()?uh(e.root,e.root,new pt([],{}),r,i):function o(l){const u=function cZ(n,e,t,r){if(n.isAbsolute)return new ch(e.root,!0,0);if(-1===r)return new ch(t,t===e.root,0);return function fL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new S(4005,Nb&&"Invalid number of '../'");i=r.segments.length}return new ch(r,!1,i-s)}(t,r+(rg(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),d=u.processChildren?dh(u.segmentGroup,u.index,s.commands):kb(u.segmentGroup,u.index,s.commands);return uh(e.root,u.segmentGroup,d,r,i)}(n.snapshot?._lastPathIndex)}function rg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ig(n){return"object"==typeof n&&null!=n&&n.outlets}function uh(n,e,t,r,i){let o,s={};r&&Kr(r,(l,u)=>{s[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=n===e?t:cL(n,e,t);const a=Mb(Uv(o));return new Ml(a,s,i)}function cL(n,e,t){const r={};return Kr(n.children,(i,s)=>{r[s]=i===e?t:cL(i,e,t)}),new pt(n.segments,r)}class dL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rg(r[0]))throw new S(4003,Nb&&"Root segment cannot have matrix parameters");const i=r.find(ig);if(i&&i!==JF(r))throw new S(4004,Nb&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ch{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kb(n,e,t){if(n||(n=new pt([],{})),0===n.segments.length&&n.hasChildren())return dh(n,e,t);const r=function hZ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(ig(a))break;const l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!gL(l,u,o))return s;r+=2}else{if(!gL(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new pt(n.segments.slice(0,r.pathIndex),{});return s.children[it]=new pt(n.segments.slice(r.pathIndex),n.children),dh(s,0,i)}return r.match&&0===i.length?new pt(n.segments,{}):r.match&&!n.hasChildren()?Ob(n,e,t):r.match?dh(n,0,i):Ob(n,e,t)}function dh(n,e,t){if(0===t.length)return new pt(n.segments,{});{const r=function dZ(n){return ig(n[0])?n[0].outlets:{[it]:n}}(t),i={};if(!r[it]&&n.children[it]&&1===n.numberOfChildren&&0===n.children[it].segments.length){const s=dh(n.children[it],e,t);return new pt(n.segments,s.children)}return Kr(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=kb(n.children[o],e,s))}),Kr(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new pt(n.segments,i)}}function Ob(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(ig(s)){const l=fZ(s.outlets);return new pt(r,l)}if(0===i&&rg(t[0])){r.push(new eg(n.segments[e].path,pL(t[0]))),i++;continue}const o=ig(s)?s.outlets[it]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&rg(a)?(r.push(new eg(o,pL(a))),i+=2):(r.push(new eg(o,{})),i++)}return new pt(r,{})}function fZ(n){const e={};return Kr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ob(new pt([],{}),0,t))}),e}function pL(n){const e={};return Kr(n,(t,r)=>e[r]=`${t}`),e}function gL(n,e,t){return n==t.path&&qo(e,t.parameters)}const sg="imperative";class Ko{constructor(e,t){this.id=e,this.url=t}}class Fb extends Ko{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ec extends Ko{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $v extends Ko{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jv extends Ko{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Lb extends Ko{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pZ extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gZ extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mZ extends Ko{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _Z extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yZ extends Ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IZ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TZ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let DZ=(()=>{class n{createUrlTree(t,r,i,s,o,a){return lZ(t||r.root,i,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),RZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(e){return DZ.\u0275fac(e)},providedIn:"root"}),n})();class _L{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Vb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Vb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Bb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Bb(e,this._root).map(t=>t.value)}}function Vb(n,e){if(n===e.value)return e;for(const t of e.children){const r=Vb(n,t);if(r)return r}return null}function Bb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Bb(n,t);if(r.length)return r.unshift(e),r}return[]}class ja{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function hh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yL extends _L{constructor(e,t){super(e),this.snapshot=t,Ub(this,e)}toString(){return this.snapshot.toString()}}function vL(n,e){const t=function PZ(n,e){const o=new Hv([],{},{},"",{},it,e,null,n.root,-1,{});return new wL("",new ja(o,[]))}(n,e),r=new Eo([new eg("",{})]),i=new Eo({}),s=new Eo({}),o=new Eo({}),a=new Eo(""),l=new fh(r,i,o,a,s,it,e,t.root);return l.snapshot=t.root,new yL(new ja(l,[]),t)}class fh{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(ue(u=>u[Jp]))??Ne(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ue(e=>lh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ue(e=>lh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function EL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function xZ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Hv{get title(){return this.data?.[Jp]}constructor(e,t,r,i,s,o,a,l,u,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wL extends _L{constructor(e,t){super(t),this.url=e,Ub(this,t)}toString(){return IL(this._root)}}function Ub(n,e){e.value._routerState=n,e.children.forEach(t=>Ub(n,t))}function IL(n){const e=n.children.length>0?` { ${n.children.map(IL).join(", ")} } `:"";return`${n.value}${e}`}function $b(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qo(e.params,t.params)||n.params.next(t.params),function WQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jb(n,e){const t=qo(n.params,e.params)&&function QQ(n,e){return Xu(n,e)&&n.every((t,r)=>qo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jb(n.parent,e.parent))}function og(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function NZ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return og(n,r,i);return og(n,r)})}(n,e,t);return new ja(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>og(n,a)),o}}const r=function kZ(n){return new fh(new Eo(n.url),new Eo(n.params),new Eo(n.queryParams),new Eo(n.fragment),new Eo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>og(n,s));return new ja(r,i)}}const Hb="ngNavigationCancelingError";function TL(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ju(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CL(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function CL(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Hb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bL(n){return AL(n)&&Ju(n.url)}function AL(n){return n&&n[Hb]}class OZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ag,this.attachRef=null}}let ag=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new OZ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zv=!1;let DL=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=it,this.activateEvents=new Gn,this.deactivateEvents=new Gn,this.attachEvents=new Gn,this.detachEvents=new Gn,this.parentContexts=rt(ag),this.location=rt(mo),this.changeDetector=rt(cv),this.environmentInjector=rt(Ra)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,zv);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,zv);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,zv);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,zv);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new FZ(t,a,i.injector);if(r&&function LZ(n){return!!n.resolveComponentFactory}(r)){const u=r.resolveComponentFactory(o);this.activated=i.createComponent(u,i.length,l)}else this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=He({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qi]}),n})();class FZ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fh?this.route:e===ag?this.childContexts:this.parent.get(e,t)}}let zb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ai({type:n,selectors:[["ng-component"]],standalone:!0,features:[rv],decls:1,vars:0,template:function(t,r){1&t&&Nr(0,"router-outlet")},dependencies:[DL],encapsulation:2}),n})();function SL(n,e){return n.providers&&!n._injector&&(n._injector=nv(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gb(n){const e=n.children&&n.children.map(Gb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==it&&(t.component=zb),t}function qs(n){return n.outlet||it}function RL(n,e){const t=n.filter(r=>qs(r)===e);return t.push(...n.filter(r=>qs(r)!==e)),t}function lg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jZ{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$b(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=hh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Kr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=hh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=hh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=hh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new CZ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new IZ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if($b(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$b(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=lg(i.snapshot),l=a?.get(Fd)??null;o.attachRef=null,o.route=i,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class PL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Wv{constructor(e,t){this.component=e,this.route=t}}function HZ(n,e,t){const r=n._root;return ug(r,e?e._root:null,t,[r.value])}function ph(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function hT(n){return null!==il(n)}(n)?e.get(n):n:r}function ug(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=hh(e);return n.children.forEach(o=>{(function WZ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function GZ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xu(n.url,e.url)||!qo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jb(n,e)||!qo(n.queryParams,e.queryParams);default:return!jb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new PL(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ug(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wv(a.outlet.component,o))}else o&&cg(e,a,i),i.canActivateChecks.push(new PL(r)),ug(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Kr(s,(o,a)=>cg(o,t.getContext(a),i)),i}function cg(n,e,t){const r=hh(n),i=n.value;Kr(r,(s,o)=>{cg(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Wv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function dg(n){return"function"==typeof n}function qb(n){return n instanceof Pv||"EmptyError"===n?.name}const Gv=Symbol("INITIAL_VALUE");function gh(){return Ln(n=>GF(n.map(e=>e.pipe(rs(1),function BQ(...n){const e=ms(n);return K((t,r)=>{(e?Xp(n,t,e):Xp(n,t)).subscribe(r)})}(Gv)))).pipe(ue(e=>{for(const t of e)if(!0!==t){if(t===Gv)return Gv;if(!1===t||t instanceof Ml)return t}return!0}),Oi(e=>e!==Gv),rs(1)))}function xL(n){return function ds(...n){return hs(n)}(kr(e=>{if(Ju(e))throw TL(0,e)}),ue(e=>!0===e))}const Kb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ML(n,e,t,r,i){const s=Qb(n,e,t);return s.matched?function uY(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ne(i.map(o=>{const a=ph(o,n);return xl(function XZ(n){return n&&dg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(gh(),xL()):Ne(!0)}(r=SL(e,r),e,t).pipe(ue(o=>!0===o?s:{...Kb})):Ne(s)}function Qb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Kb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||zQ)(t,n,e);if(!i)return{...Kb};const s={};Kr(i.posParams,(a,l)=>{s[l]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function qv(n,e,t,r){if(t.length>0&&function hY(n,e,t){return t.some(r=>Kv(n,e,r)&&qs(r)!==it)}(n,t,r)){const s=new pt(e,function dY(n,e,t,r){const i={};i[it]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&qs(s)!==it){const o=new pt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[qs(s)]=o}return i}(n,e,r,new pt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function fY(n,e,t){return t.some(r=>Kv(n,e,r))}(n,t,r)){const s=new pt(n.segments,function cY(n,e,t,r,i){const s={};for(const o of r)if(Kv(n,t,o)&&!i[qs(o)]){const a=new pt([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[qs(o)]=a}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new pt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Kv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function NL(n,e,t,r){return!!(qs(n)===r||r!==it&&Kv(e,t,n))&&("**"===n.path||Qb(e,n,t).matched)}function kL(n,e,t){return 0===e.length&&!n.children[t]}const Qv=!1;class Zv{constructor(e){this.segmentGroup=e||null}}class OL{constructor(e){this.urlTree=e}}function hg(n){return ah(new Zv(n))}function FL(n){return ah(new OL(n))}class _Y{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=qv(this.urlTree.root,[],[],this.config).segmentGroup,t=new pt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,it).pipe(ue(s=>this.createUrlTree(Uv(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe($a(s=>{if(s instanceof OL)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Zv?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,it).pipe(ue(i=>this.createUrlTree(Uv(i),e.queryParams,e.fragment))).pipe($a(i=>{throw i instanceof Zv?this.noMatchError(i):i}))}noMatchError(e){return new S(4002,Qv)}createUrlTree(e,t,r){const i=Mb(e);return new Ml(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ue(s=>new pt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return w(i).pipe(Yu(s=>{const o=r.children[s],a=RL(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(ue(l=>({segment:l,outlet:s})))}),Nv((s,o)=>(s[o.outlet]=o.segment,s),{}),QF())}expandSegment(e,t,r,i,s,o){return w(r).pipe(Yu(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe($a(u=>{if(u instanceof Zv)return Ne(null);throw u}))),Ua(a=>!!a),$a((a,l)=>{if(qb(a))return kL(t,i,s)?Ne(new pt([],{})):hg(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return NL(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):hg(t):hg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?FL(s):this.lineralizeSegments(r,s).pipe(Nt(o=>{const a=new pt(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:d}=Qb(t,i,s);if(!a)return hg(t);const f=this.applyRedirectCommands(l,i.redirectTo,d);return i.redirectTo.startsWith("/")?FL(f):this.lineralizeSegments(i,f).pipe(Nt(m=>this.expandSegment(e,t,r,m.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=SL(r,e),r.loadChildren?(r._loadedRoutes?Ne({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ue(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new pt(i,{})))):Ne(new pt(i,{}))):ML(t,r,i,e).pipe(Ln(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(Nt(d=>{const f=d.injector??e,m=d.routes,{segmentGroup:_,slicedSegments:v}=qv(t,a,l,m),T=new pt(_.segments,_.children);if(0===v.length&&T.hasChildren())return this.expandChildren(f,m,T).pipe(ue(P=>new pt(a,P)));if(0===m.length&&0===v.length)return Ne(new pt(a,{}));const A=qs(r)===s;return this.expandSegment(f,T,m,v,A?it:s,!0).pipe(ue(F=>new pt(a.concat(F.segments),F.children)))})):hg(t)))}getChildConfig(e,t,r){return t.children?Ne({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ne({routes:t._loadedRoutes,injector:t._loadedInjector}):function lY(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ne(!0):Ne(i.map(o=>{const a=ph(o,n);return xl(function KZ(n){return n&&dg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(gh(),xL())}(e,t,r).pipe(Nt(i=>i?this.configLoader.loadChildren(e,t).pipe(kr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function gY(n){return ah(CL(Qv,3))}())):Ne({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ne(r);if(i.numberOfChildren>1||!i.children[it])return e.redirectTo,ah(new S(4e3,Qv));i=i.children[it]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ml(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Kr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Kr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new pt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new S(4001,Qv);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class vY{}class IY{constructor(e,t,r,i,s,o,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=qv(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,it).pipe(ue(t=>{if(null===t)return null;const r=new Hv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},it,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ja(r,t),s=new wL(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=EL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return w(Object.keys(r.children)).pipe(Yu(i=>{const s=r.children[i],o=RL(t,i);return this.processSegmentGroup(e,o,s,i)}),Nv((i,s)=>i&&s?(i.push(...s),i):null),function jQ(n,e=!1){return K((t,r)=>{let i=0;t.subscribe(ce(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),Mv(null),QF(),ue(i=>{if(null===i)return null;const s=VL(i);return function TY(n){n.sort((e,t)=>e.value.outlet===it?-1:t.value.outlet===it?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return w(t).pipe(Yu(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),Ua(o=>!!o),$a(o=>{if(qb(o))return kL(r,i,s)?Ne([]):Ne(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!NL(t,r,i,s))return Ne(null);let o;if("**"===t.path){const a=i.length>0?JF(i).parameters:{},l=UL(r)+i.length;o=Ne({snapshot:new Hv(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$L(t),qs(t),t.component??t._loadedComponent??null,t,BL(r),l,jL(t)),consumedSegments:[],remainingSegments:[]})}else o=ML(r,t,i,e).pipe(ue(({matched:a,consumedSegments:l,remainingSegments:u,parameters:d})=>{if(!a)return null;const f=UL(r)+l.length;return{snapshot:new Hv(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$L(t),qs(t),t.component??t._loadedComponent??null,t,BL(r),f,jL(t)),consumedSegments:l,remainingSegments:u}}));return o.pipe(Ln(a=>{if(null===a)return Ne(null);const{snapshot:l,consumedSegments:u,remainingSegments:d}=a;e=t._injector??e;const f=t._loadedInjector??e,m=function CY(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:_,slicedSegments:v}=qv(r,u,d,m.filter(A=>void 0===A.redirectTo));if(0===v.length&&_.hasChildren())return this.processChildren(f,m,_).pipe(ue(A=>null===A?null:[new ja(l,A)]));if(0===m.length&&0===v.length)return Ne([new ja(l,[])]);const T=qs(t)===s;return this.processSegment(f,m,_,v,T?it:s).pipe(ue(A=>null===A?null:[new ja(l,A)]))}))}}function bY(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function VL(n){const e=[],t=new Set;for(const r of n){if(!bY(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=VL(r.children);e.push(new ja(r.value,i))}return e.filter(r=>!t.has(r))}function BL(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function UL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function $L(n){return n.data||{}}function jL(n){return n.resolve||{}}function HL(n){return"string"==typeof n.title||null===n.title}function Zb(n){return Ln(e=>{const t=n(e);return t?w(t).pipe(ue(()=>e)):Ne(e)})}const mh=new me("ROUTES");let Yb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=rt(m1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=xl(t.loadComponent()).pipe(ue(WL),kr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Rb(()=>{this.componentLoaders.delete(t)})),i=new Db(r,()=>new z).pipe(Ab());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ue(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,u,d=!1;Array.isArray(a)?u=a:(l=a.create(t).injector,u=XF(l.get(mh,[],Ue.Self|Ue.Optional)));return{routes:u.map(Gb),injector:l}}),Rb(()=>{this.childrenLoaders.delete(r)})),o=new Db(s,()=>new z).pipe(Ab());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return xl(t()).pipe(ue(WL),Nt(r=>r instanceof CO||Array.isArray(r)?Ne(r):w(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WL(n){return function NY(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Xv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new z,this.configLoader=rt(Yb),this.environmentInjector=rt(Ra),this.urlSerializer=rt(tg),this.rootContexts=rt(ag),this.navigationId=0,this.afterPreactivation=()=>Ne(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new EZ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new vZ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Eo({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sg,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Oi(r=>0!==r.id),ue(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Ln(r=>{let i=!1,s=!1;return Ne(r).pipe(kr(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ln(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new jv(o.id,t.serializeUrl(r.rawUrl),d,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),An}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return GL(o.source)&&(t.browserUrlTree=o.extractedUrl),Ne(o).pipe(Ln(d=>{const f=this.transitions?.getValue();return this.events.next(new Fb(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?An:Promise.resolve(d)}),function yY(n,e,t,r){return Ln(i=>function mY(n,e,t,r,i){return new _Y(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(ue(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),kr(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},r.urlAfterRedirects=d.urlAfterRedirects}),function DY(n,e,t,r,i){return Nt(s=>function wY(n,e,t,r,i,s,o="emptyOnly"){return new IY(n,e,t,r,i,o,s).recognize().pipe(Ln(a=>null===a?function EY(n){return new qe(e=>e.error(n))}(new vY):Ne(a)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(ue(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),kr(d=>{if(r.targetSnapshot=d.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!d.extras.skipLocationChange){const m=t.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);t.setBrowserUrl(m,d)}t.browserUrlTree=d.urlAfterRedirects}const f=new pZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:f,source:m,restoredState:_,extras:v}=o,T=new Fb(d,this.urlSerializer.serialize(f),m,_);this.events.next(T);const A=vL(f,this.rootComponentType).snapshot;return Ne(r={...o,targetSnapshot:A,urlAfterRedirects:f,extras:{...v,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new jv(o.id,t.serializeUrl(r.extractedUrl),d,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),An}}),kr(o=>{const a=new gZ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ue(o=>r={...o,guards:HZ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function eY(n,e){return Nt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ne({...t,guardsResult:!0}):function tY(n,e,t,r){return w(n).pipe(Nt(i=>function aY(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ne(s.map(a=>{const l=lg(e)??i,u=ph(a,l);return xl(function YZ(n){return n&&dg(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):l.runInContext(()=>u(n,e,t,r))).pipe(Ua())})).pipe(gh()):Ne(!0)}(i.component,i.route,t,e,r)),Ua(i=>!0!==i,!0))}(o,r,i,n).pipe(Nt(a=>a&&function qZ(n){return"boolean"==typeof n}(a)?function nY(n,e,t,r){return w(e).pipe(Yu(i=>Xp(function iY(n,e){return null!==n&&e&&e(new wZ(n)),Ne(!0)}(i.route.parent,r),function rY(n,e){return null!==n&&e&&e(new TZ(n)),Ne(!0)}(i.route,r),function oY(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function zZ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>xv(()=>Ne(o.guards.map(l=>{const u=lg(o.node)??t,d=ph(l,u);return xl(function ZZ(n){return n&&dg(n.canActivateChild)}(d)?d.canActivateChild(r,n):u.runInContext(()=>d(r,n))).pipe(Ua())})).pipe(gh())));return Ne(s).pipe(gh())}(n,i.path,t),function sY(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ne(!0);const i=r.map(s=>xv(()=>{const o=lg(e)??t,a=ph(s,o);return xl(function QZ(n){return n&&dg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ua())}));return Ne(i).pipe(gh())}(n,i.route,t))),Ua(i=>!0!==i,!0))}(r,s,n,e):Ne(a)),ue(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),kr(o=>{if(r.guardsResult=o.guardsResult,Ju(o.guardsResult))throw TL(0,o.guardsResult);const a=new mZ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Oi(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Zb(o=>{if(o.guards.canActivateChecks.length)return Ne(o).pipe(kr(a=>{const l=new _Z(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Ln(a=>{let l=!1;return Ne(a).pipe(function SY(n,e){return Nt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ne(t);let s=0;return w(i).pipe(Yu(o=>function RY(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!HL(i)&&(s[Jp]=i.title),function PY(n,e,t,r){const i=function xY(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ne({});const s={};return w(i).pipe(Nt(o=>function MY(n,e,t,r){const i=lg(e)??r,s=ph(n,i);return xl(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ua(),kr(a=>{s[o]=a}))),Sb(1),ZF(s),$a(o=>qb(o)?An:ah(o)))}(s,n,e,r).pipe(ue(o=>(n._resolvedData=o,n.data=EL(n,t).resolve,i&&HL(i)&&(n.data[Jp]=i.title),null)))}(o.route,r,n,e)),kr(()=>s++),Sb(1),Nt(o=>s===i.length?Ne(t):An))})}(t.paramsInheritanceStrategy,this.environmentInjector),kr({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),kr(a=>{const l=new yZ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Zb(o=>{const a=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(kr(d=>{l.component=d}),ue(()=>{})));for(const d of l.children)u.push(...a(d));return u};return GF(a(o.targetSnapshot.root)).pipe(Mv(),rs(1))}),Zb(()=>this.afterPreactivation()),ue(o=>{const a=function MZ(n,e,t){const r=og(n,e._root,t?t._root:void 0);return new yL(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),kr(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>ue(r=>(new jZ(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),rs(1),kr({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ec(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Rb(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),$a(o=>{if(s=!0,AL(o)){bL(o)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new $v(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),bL(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||GL(r.source)};t.scheduleNavigation(l,sg,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new Lb(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(o))}catch(l){r.reject(l)}}return An}))}))}cancelNavigationTransition(t,r,i){const s=new $v(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GL(n){return n!==sg}let qL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===it);return r}getResolvedTitleForRoute(t){return t.data[Jp]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return rt(kY)},providedIn:"root"}),n})(),kY=(()=>{class n extends qL{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(ae(BF))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return rt(LY)},providedIn:"root"}),n})();class FY{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let LY=(()=>{class n extends FY{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mr(n)))(r||n)}}(),n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jv=new me("",{providedIn:"root",factory:()=>({})});let BY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return rt(UY)},providedIn:"root"}),n})(),UY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $Y(n){throw n}function jY(n,e,t){return e.parse("/")}const HY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ts=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=rt(E8),this.isNgZoneEnabled=!1,this.options=rt(Jv,{optional:!0})||{},this.errorHandler=this.options.errorHandler||$Y,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||jY,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=rt(BY),this.routeReuseStrategy=rt(OY),this.urlCreationStrategy=rt(RZ),this.titleStrategy=rt(qL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=XF(rt(mh,{optional:!0})??[]),this.navigationTransitions=rt(Xv),this.urlSerializer=rt(tg),this.location=rt(tb),this.isNgZoneEnabled=rt(Vt)instanceof Vt&&Vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ml,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vL(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Gb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ju(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,sg,null,r)}navigate(t,r={skipLocationChange:!1}){return function WY(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new S(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...HY}:!1===r?{...zY}:r,Ju(t))return tL(this.currentUrlTree,t,i);const s=this.parseUrl(t);return tL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u,d;return o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((f,m)=>{a=f,l=m}),d="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KL{}let KY=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Oi(t=>t instanceof ec),Yu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=nv(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return w(i).pipe(si())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ne(null);const s=i.pipe(Nt(o=>null===o?Ne(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?w([s,this.loader.loadComponent(r)]).pipe(si()):s})}}return n.\u0275fac=function(t){return new(t||n)(ae(Ts),ae(m1),ae(Ra),ae(KL),ae(Yb))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eA=new me("");let QL=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ec&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function SN(){throw new Error("invalid")}()},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();var Cs=(()=>((Cs=Cs||{})[Cs.COMPLETE=0]="COMPLETE",Cs[Cs.FAILED=1]="FAILED",Cs[Cs.REDIRECTING=2]="REDIRECTING",Cs))();const _h=!1;function Nl(n,e){return{\u0275kind:n,\u0275providers:e}}const tA=new me("",{providedIn:"root",factory:()=>!1});function YL(){const n=rt(fi);return e=>{const t=n.get(Rl);if(e!==t.components[0])return;const r=n.get(Ts),i=n.get(XL);1===n.get(nA)&&r.initialNavigation(),n.get(JL,null,Ue.Optional)?.setUpPreloading(),n.get(eA,null,Ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const XL=new me(_h?"bootstrap done indicator":"",{factory:()=>new z}),nA=new me(_h?"initial navigation":"",{providedIn:"root",factory:()=>1});function JY(){let n=[];return n=_h?[{provide:Fy,multi:!0,useFactory:()=>{const e=rt(Ts);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function bZ(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Nl(1,n)}const JL=new me(_h?"router preloader":"");function eX(n){return Nl(0,[{provide:JL,useExisting:KY},{provide:KL,useExisting:n}])}const fg=!1,eV=new me(fg?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),tX=[tb,{provide:tg,useClass:Pb},Ts,ag,{provide:fh,useFactory:function ZL(n){return n.routerState.root},deps:[Ts]},Yb,fg?{provide:tA,useValue:!0}:[]];function nX(){return new C1("Router",Ts)}let tV=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tX,fg&&r?.enableTracing?JY().\u0275providers:[],{provide:mh,multi:!0,useValue:t},{provide:eV,useFactory:oX,deps:[[Ts,new di,new ba]]},{provide:Jv,useValue:r||{}},r?.useHash?{provide:Zu,useClass:aK}:{provide:Zu,useClass:q1},{provide:eA,useFactory:()=>{const n=rt(b7),e=rt(Vt),t=rt(Jv),r=rt(Xv),i=rt(tg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QL(i,r,n,e,t)}},r?.preloadingStrategy?eX(r.preloadingStrategy).\u0275providers:[],{provide:C1,multi:!0,useFactory:nX},r?.initialNavigation?aX(r):[],[{provide:nV,useFactory:YL},{provide:T1,multi:!0,useExisting:nV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:mh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ae(eV,8))},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({imports:[zb]}),n})();function oX(n){if(fg&&n)throw new S(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function aX(n){return["disabled"===n.initialNavigation?Nl(3,[{provide:Wp,multi:!0,useFactory:()=>{const e=rt(Ts);return()=>{e.setUpLocationChangeListener()}}},{provide:nA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Nl(2,[{provide:nA,useValue:0},{provide:Wp,multi:!0,deps:[fi],useFactory:e=>{const t=e.get(sK,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ts),s=e.get(XL);(function QY(n,e){n.events.pipe(Oi(t=>t instanceof ec||t instanceof $v||t instanceof Lb||t instanceof jv),ue(t=>t instanceof ec||t instanceof jv?Cs.COMPLETE:t instanceof $v&&(0===t.code||1===t.code)?Cs.REDIRECTING:Cs.FAILED),Oi(t=>t!==Cs.REDIRECTING),rs(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Xv).afterPreactivation=()=>(r(!0),s.closed?Ne(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const nV=new me(fg?"Router Initializer":""),uX=[];let cX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=vn({type:n});static#n=this.\u0275inj=Jn({imports:[tV.forRoot(uX),tV]})}return n})();var dX=function(){function n(e,t){void 0===t&&(t=[]),this._eventType=e,this._eventFunctions=t}return n.prototype.init=function(){var e=this;this._eventFunctions.forEach(function(t){typeof window<"u"&&window.addEventListener(e._eventType,t)})},n}();const hX=dX;var fX=function(){function n(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{}}}return n.prototype.addInstance=function(e,t,r,i){if(void 0===i&&(i=!1),!this._instances[e])return console.warn("Flowbite: Component ".concat(e," does not exist.")),!1;!this._instances[e][r]||i?(i&&this._instances[e][r]&&this._instances[e][r].destroyAndRemoveInstance(),this._instances[e][r||this._generateRandomId()]=t):console.warn("Flowbite: Instance with ID ".concat(r," already exists."))},n.prototype.getAllInstances=function(){return this._instances},n.prototype.getInstances=function(e){return this._instances[e]?this._instances[e]:(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},n.prototype.getInstance=function(e,t){if(this._componentAndInstanceCheck(e,t))return this._instances[e][t]?this._instances[e][t]:void console.warn("Flowbite: Instance with ID ".concat(t," does not exist."))},n.prototype.destroyAndRemoveInstance=function(e,t){this._componentAndInstanceCheck(e,t)&&(this.destroyInstanceObject(e,t),this.removeInstance(e,t))},n.prototype.removeInstance=function(e,t){this._componentAndInstanceCheck(e,t)&&delete this._instances[e][t]},n.prototype.destroyInstanceObject=function(e,t){this._componentAndInstanceCheck(e,t)&&this._instances[e][t].destroy()},n.prototype.instanceExists=function(e,t){return!(!this._instances[e]||!this._instances[e][t])},n.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},n.prototype._componentAndInstanceCheck=function(e,t){return this._instances[e]?!!this._instances[e][t]||(console.warn("Flowbite: Instance with ID ".concat(t," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},n}(),rV=new fX;const Ht=rV;typeof window<"u"&&(window.FlowbiteInstances=rV);var eE=function(){return eE=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},eE.apply(this,arguments)},tE={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},pX={id:null,override:!0},iV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===r&&(r=tE),void 0===i&&(i=pX),this._instanceId=i.id?i.id:e.id,this._accordionEl=e,this._items=t,this._options=eE(eE({},tE),r),this._initialized=!1,this.init(),Ht.addInstance("Accordion",this,this._instanceId,i.override)}return n.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.forEach(function(t){t.active&&e.open(t.id);var r=function(){e.toggle(t.id)};t.triggerEl.addEventListener("click",r),t.clickHandler=r}),this._initialized=!0)},n.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(e){e.triggerEl.removeEventListener("click",e.clickHandler),delete e.clickHandler}),this._initialized=!1)},n.prototype.removeInstance=function(){Ht.removeInstance("Accordion",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getItem=function(e){return this._items.filter(function(t){return t.id===e})[0]},n.prototype.open=function(e){var t,r,i=this,s=this.getItem(e);this._options.alwaysOpen||this._items.map(function(o){var a,l;o!==s&&((a=o.triggerEl.classList).remove.apply(a,i._options.activeClasses.split(" ")),(l=o.triggerEl.classList).add.apply(l,i._options.inactiveClasses.split(" ")),o.targetEl.classList.add("hidden"),o.triggerEl.setAttribute("aria-expanded","false"),o.active=!1,o.iconEl&&o.iconEl.classList.remove("rotate-180"))}),(t=s.triggerEl.classList).add.apply(t,this._options.activeClasses.split(" ")),(r=s.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-expanded","true"),s.targetEl.classList.remove("hidden"),s.active=!0,s.iconEl&&s.iconEl.classList.add("rotate-180"),this._options.onOpen(this,s)},n.prototype.toggle=function(e){var t=this.getItem(e);t.active?this.close(e):this.open(e),this._options.onToggle(this,t)},n.prototype.close=function(e){var t,r,i=this.getItem(e);(t=i.triggerEl.classList).remove.apply(t,this._options.activeClasses.split(" ")),(r=i.triggerEl.classList).add.apply(r,this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded","false"),i.active=!1,i.iconEl&&i.iconEl.classList.remove("rotate-180"),this._options.onClose(this,i)},n}();function rA(){document.querySelectorAll("[data-accordion]").forEach(function(n){var e=n.getAttribute("data-accordion"),t=n.getAttribute("data-active-classes"),r=n.getAttribute("data-inactive-classes"),i=[];n.querySelectorAll("[data-accordion-target]").forEach(function(s){if(s.closest("[data-accordion]")===n){var o={id:s.getAttribute("data-accordion-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-accordion-target")),iconEl:s.querySelector("[data-accordion-icon]"),active:"true"===s.getAttribute("aria-expanded")};i.push(o)}}),new iV(n,i,{alwaysOpen:"open"===e,activeClasses:t||tE.activeClasses,inactiveClasses:r||tE.inactiveClasses})})}typeof window<"u"&&(window.Accordion=iV,window.initAccordions=rA);var nE=function(){return nE=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},nE.apply(this,arguments)},sV={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},gX={id:null,override:!0},iA=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=sV),void 0===i&&(i=gX),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=t,this._options=nE(nE({},sV),r),this._visible=!1,this._initialized=!1,this.init(),Ht.addInstance("Collapse",this,this._instanceId,i.override)}return n.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._visible=this._triggerEl.hasAttribute("aria-expanded")?"true"===this._triggerEl.getAttribute("aria-expanded"):!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){e.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){Ht.removeInstance("Collapse",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},n.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},n.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},n}();function sA(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(n){var e=n.getAttribute("data-collapse-toggle"),t=document.getElementById(e);t?Ht.instanceExists("Collapse",t.getAttribute("id"))?new iA(t,n,{},{id:t.getAttribute("id")+"_"+Ht._generateRandomId()}):new iA(t,n):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=iA,window.initCollapses=sA);var tc=function(){return tc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},tc.apply(this,arguments)},rE={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},mX={id:null,override:!0},oV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===r&&(r=rE),void 0===i&&(i=mX),this._instanceId=i.id?i.id:e.id,this._carouselEl=e,this._items=t,this._options=tc(tc(tc({},rE),r),{indicators:tc(tc({},rE.indicators),r.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Ht.addInstance("Carousel",this,this._instanceId,i.override)}return n.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.map(function(t){t.el.classList.add("absolute","inset-0","transition-transform","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(t,r){t.el.addEventListener("click",function(){e.slideTo(r)})}),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},n.prototype.removeInstance=function(){Ht.removeInstance("Carousel",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getItem=function(e){return this._items[e]},n.prototype.slideTo=function(e){var t=this._items[e];this._rotate({left:0===t.position?this._items[this._items.length-1]:this._items[t.position-1],middle:t,right:t.position===this._items.length-1?this._items[0]:this._items[t.position+1]}),this._setActiveItem(t),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},n.prototype.next=function(){var e=this._getActiveItem();this.slideTo((e.position===this._items.length-1?this._items[0]:this._items[e.position+1]).position),this._options.onNext(this)},n.prototype.prev=function(){var e=this._getActiveItem();this.slideTo((0===e.position?this._items[this._items.length-1]:this._items[e.position-1]).position),this._options.onPrev(this)},n.prototype._rotate=function(e){this._items.map(function(t){t.el.classList.add("hidden")}),e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.right.el.classList.add("translate-x-full","z-10")},n.prototype.cycle=function(){var e=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){e.next()},this._intervalDuration))},n.prototype.pause=function(){clearInterval(this._intervalInstance)},n.prototype._getActiveItem=function(){return this._activeItem},n.prototype._setActiveItem=function(e){var t,r,i=this;this._activeItem=e;var s=e.position;this._indicators.length&&(this._indicators.map(function(o){var a,l;o.el.setAttribute("aria-current","false"),(a=o.el.classList).remove.apply(a,i._options.indicators.activeClasses.split(" ")),(l=o.el.classList).add.apply(l,i._options.indicators.inactiveClasses.split(" "))}),(t=this._indicators[s].el.classList).add.apply(t,this._options.indicators.activeClasses.split(" ")),(r=this._indicators[s].el.classList).remove.apply(r,this._options.indicators.inactiveClasses.split(" ")),this._indicators[s].el.setAttribute("aria-current","true"))},n}();function oA(){document.querySelectorAll("[data-carousel]").forEach(function(n){var e=n.getAttribute("data-carousel-interval"),t="slide"===n.getAttribute("data-carousel"),r=[],i=0;n.querySelectorAll("[data-carousel-item]").length&&Array.from(n.querySelectorAll("[data-carousel-item]")).map(function(u,d){r.push({position:d,el:u}),"active"===u.getAttribute("data-carousel-item")&&(i=d)});var s=[];n.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(n.querySelectorAll("[data-carousel-slide-to]")).map(function(u){s.push({position:parseInt(u.getAttribute("data-carousel-slide-to")),el:u})});var o=new oV(n,r,{defaultPosition:i,indicators:{items:s},interval:e||rE.interval});t&&o.cycle();var a=n.querySelector("[data-carousel-next]"),l=n.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){o.next()}),l&&l.addEventListener("click",function(){o.prev()})})}typeof window<"u"&&(window.Carousel=oV,window.initCarousels=oA);var iE=function(){return iE=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},iE.apply(this,arguments)},aV={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},_X={id:null,override:!0},lV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=aV),void 0===i&&(i=_X),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=t,this._options=iE(iE({},aV),r),this._initialized=!1,this.init(),Ht.addInstance("Dismiss",this,this._instanceId,i.override)}return n.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){e.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){Ht.removeInstance("Dismiss",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){var e=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){e._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},n}();function aA(){document.querySelectorAll("[data-dismiss-target]").forEach(function(n){var e=n.getAttribute("data-dismiss-target"),t=document.querySelector(e);t?new lV(t,n):console.error('The dismiss element with id "'.concat(e,'" does not exist. Please check the data-dismiss-target attribute.'))})}function bs(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function nc(n){return n instanceof bs(n).Element||n instanceof Element}function Ks(n){return n instanceof bs(n).HTMLElement||n instanceof HTMLElement}function lA(n){return!(typeof ShadowRoot>"u")&&(n instanceof bs(n).ShadowRoot||n instanceof ShadowRoot)}typeof window<"u"&&(window.Dismiss=lV,window.initDismisses=aA);var rc=Math.max,sE=Math.min,yh=Math.round;function uA(){var n=navigator.userAgentData;return null!=n&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function uV(){return!/^((?!chrome|android).)*safari/i.test(uA())}function vh(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,s=1;e&&Ks(n)&&(i=n.offsetWidth>0&&yh(r.width)/n.offsetWidth||1,s=n.offsetHeight>0&&yh(r.height)/n.offsetHeight||1);var a=(nc(n)?bs(n):window).visualViewport,l=!uV()&&t,u=(r.left+(l&&a?a.offsetLeft:0))/i,d=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,m=r.height/s;return{width:f,height:m,top:d,right:u+f,bottom:d+m,left:u,x:u,y:d}}function cA(n){var e=bs(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Qo(n){return n?(n.nodeName||"").toLowerCase():null}function kl(n){return((nc(n)?n.ownerDocument:n.document)||window.document).documentElement}function dA(n){return vh(kl(n)).left+cA(n).scrollLeft}function Ha(n){return bs(n).getComputedStyle(n)}function hA(n){var e=Ha(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function wX(n,e,t){void 0===t&&(t=!1);var r=Ks(e),i=Ks(e)&&function EX(n){var e=n.getBoundingClientRect(),t=yh(e.width)/n.offsetWidth||1,r=yh(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),s=kl(e),o=vh(n,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&(("body"!==Qo(e)||hA(s))&&(a=function vX(n){return n!==bs(n)&&Ks(n)?function yX(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):cA(n)}(e)),Ks(e)?((l=vh(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=dA(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function fA(n){var e=vh(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function oE(n){return"html"===Qo(n)?n:n.assignedSlot||n.parentNode||(lA(n)?n.host:null)||kl(n)}function cV(n){return["html","body","#document"].indexOf(Qo(n))>=0?n.ownerDocument.body:Ks(n)&&hA(n)?n:cV(oE(n))}function pg(n,e){var t;void 0===e&&(e=[]);var r=cV(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),s=bs(r),o=i?[s].concat(s.visualViewport||[],hA(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(pg(oE(o)))}function IX(n){return["table","td","th"].indexOf(Qo(n))>=0}function dV(n){return Ks(n)&&"fixed"!==Ha(n).position?n.offsetParent:null}function gg(n){for(var e=bs(n),t=dV(n);t&&IX(t)&&"static"===Ha(t).position;)t=dV(t);return t&&("html"===Qo(t)||"body"===Qo(t)&&"static"===Ha(t).position)?e:t||function TX(n){var e=/firefox/i.test(uA());if(/Trident/i.test(uA())&&Ks(n)&&"fixed"===Ha(n).position)return null;var i=oE(n);for(lA(i)&&(i=i.host);Ks(i)&&["html","body"].indexOf(Qo(i))<0;){var s=Ha(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(n)||e}var is="top",Qs="bottom",Zs="right",ss="left",pA="auto",mg=[is,Qs,Zs,ss],Eh="start",_g="end",CX="clippingParents",hV="viewport",yg="popper",bX="reference",fV=mg.reduce(function(n,e){return n.concat([e+"-"+Eh,e+"-"+_g])},[]),pV=[].concat(mg,[pA]).reduce(function(n,e){return n.concat([e,e+"-"+Eh,e+"-"+_g])},[]),OX=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function FX(n){var e=new Map,t=new Set,r=[];function i(s){t.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return n.forEach(function(s){e.set(s.name,s)}),n.forEach(function(s){t.has(s.name)||i(s)}),r}function VX(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var gV={placement:"bottom",modifiers:[],strategy:"absolute"};function mV(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function UX(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,s=void 0===i?gV:i;return function(a,l,u){void 0===u&&(u=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},gV,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],m=!1,_={state:d,setOptions:function(M){var F="function"==typeof M?M(d.options):M;T(),d.options=Object.assign({},s,d.options,F),d.scrollParents={reference:nc(a)?pg(a):a.contextElement?pg(a.contextElement):[],popper:pg(l)};var P=function LX(n){var e=FX(n);return OX.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function BX(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,d.options.modifiers)));return d.orderedModifiers=P.filter(function(V){return V.enabled}),function v(){d.orderedModifiers.forEach(function(A){var F=A.options,V=A.effect;if("function"==typeof V){var oe=V({state:d,name:A.name,instance:_,options:void 0===F?{}:F});f.push(oe||function(){})}})}(),_.update()},forceUpdate:function(){if(!m){var M=d.elements,F=M.reference,P=M.popper;if(mV(F,P)){d.rects={reference:wX(F,gg(P),"fixed"===d.options.strategy),popper:fA(P)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(Ut){return d.modifiersData[Ut.name]=Object.assign({},Ut.data)});for(var V=0;V<d.orderedModifiers.length;V++)if(!0!==d.reset){var oe=d.orderedModifiers[V],le=oe.fn,Oe=oe.options;"function"==typeof le&&(d=le({state:d,options:void 0===Oe?{}:Oe,name:oe.name,instance:_})||d)}else d.reset=!1,V=-1}}},update:VX(function(){return new Promise(function(A){_.forceUpdate(),A(d)})}),destroy:function(){T(),m=!0}};if(!mV(a,l))return _;function T(){f.forEach(function(A){return A()}),f=[]}return _.setOptions(u).then(function(A){!m&&u.onFirstUpdate&&u.onFirstUpdate(A)}),_}}var aE={passive:!0};const jX={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function $X(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,l=bs(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(d){d.addEventListener("scroll",t.update,aE)}),a&&l.addEventListener("resize",t.update,aE),function(){s&&u.forEach(function(d){d.removeEventListener("scroll",t.update,aE)}),a&&l.removeEventListener("resize",t.update,aE)}},data:{}};function Zo(n){return n.split("-")[0]}function wh(n){return n.split("-")[1]}function gA(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function _V(n){var l,e=n.reference,t=n.element,r=n.placement,i=r?Zo(r):null,s=r?wh(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2;switch(i){case is:l={x:o,y:e.y-t.height};break;case Qs:l={x:o,y:e.y+e.height};break;case Zs:l={x:e.x+e.width,y:a};break;case ss:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?gA(i):null;if(null!=u){var d="y"===u?"height":"width";switch(s){case Eh:l[u]=l[u]-(e[d]/2-t[d]/2);break;case _g:l[u]=l[u]+(e[d]/2-t[d]/2)}}return l}const zX={name:"popperOffsets",enabled:!0,phase:"read",fn:function HX(n){var e=n.state;e.modifiersData[n.name]=_V({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var WX={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yV(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,u=n.adaptive,d=n.roundOffsets,f=n.isFixed,m=o.x,_=void 0===m?0:m,v=o.y,T=void 0===v?0:v,A="function"==typeof d?d({x:_,y:T}):{x:_,y:T};_=A.x,T=A.y;var M=o.hasOwnProperty("x"),F=o.hasOwnProperty("y"),P=ss,V=is,oe=window;if(u){var le=gg(t),Oe="clientHeight",Et="clientWidth";le===bs(t)&&"static"!==Ha(le=kl(t)).position&&"absolute"===a&&(Oe="scrollHeight",Et="scrollWidth"),(i===is||(i===ss||i===Zs)&&s===_g)&&(V=Qs,T-=(f&&le===oe&&oe.visualViewport?oe.visualViewport.height:le[Oe])-r.height,T*=l?1:-1),i!==ss&&(i!==is&&i!==Qs||s!==_g)||(P=Zs,_-=(f&&le===oe&&oe.visualViewport?oe.visualViewport.width:le[Et])-r.width,_*=l?1:-1)}var Un,Rr=Object.assign({position:a},u&&WX),ni=!0===d?function GX(n,e){var r=n.y,i=e.devicePixelRatio||1;return{x:yh(n.x*i)/i||0,y:yh(r*i)/i||0}}({x:_,y:T},bs(t)):{x:_,y:T};return _=ni.x,T=ni.y,Object.assign({},Rr,l?((Un={})[V]=F?"0":"",Un[P]=M?"0":"",Un.transform=(oe.devicePixelRatio||1)<=1?"translate("+_+"px, "+T+"px)":"translate3d("+_+"px, "+T+"px, 0)",Un):((e={})[V]=F?T+"px":"",e[P]=M?_+"px":"",e.transform="",e))}const KX={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function qX(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,s=t.adaptive,o=void 0===s||s,a=t.roundOffsets,l=void 0===a||a,u={placement:Zo(e.placement),variation:wh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,yV(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,yV(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},YX={name:"applyStyles",enabled:!0,phase:"write",fn:function QX(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Ks(s)||!Qo(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function ZX(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(l,u){return l[u]="",l},{});!Ks(i)||!Qo(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}},requires:["computeStyles"]},eJ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function JX(n){var e=n.state,r=n.name,i=n.options.offset,s=void 0===i?[0,0]:i,o=pV.reduce(function(d,f){return d[f]=function XX(n,e,t){var r=Zo(n),i=[ss,is].indexOf(r)>=0?-1:1,s="function"==typeof t?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[ss,Zs].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(f,e.rects,s),d},{}),a=o[e.placement],u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}};var tJ={left:"right",right:"left",bottom:"top",top:"bottom"};function lE(n){return n.replace(/left|right|bottom|top/g,function(e){return tJ[e]})}var nJ={start:"end",end:"start"};function vV(n){return n.replace(/start|end/g,function(e){return nJ[e]})}function EV(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&lA(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function mA(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function wV(n,e,t){return e===hV?mA(function rJ(n,e){var t=bs(n),r=kl(n),i=t.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=uV();(u||!u&&"fixed"===e)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+dA(n),y:l}}(n,t)):nc(e)?function sJ(n,e){var t=vh(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):mA(function iJ(n){var e,t=kl(n),r=cA(n),i=null==(e=n.ownerDocument)?void 0:e.body,s=rc(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=rc(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+dA(n),l=-r.scrollTop;return"rtl"===Ha(i||t).direction&&(a+=rc(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(kl(n)))}function TV(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function CV(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function vg(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,s=e.strategy,o=void 0===s?n.strategy:s,a=e.boundary,l=void 0===a?CX:a,u=e.rootBoundary,d=void 0===u?hV:u,f=e.elementContext,m=void 0===f?yg:f,_=e.altBoundary,v=void 0!==_&&_,T=e.padding,A=void 0===T?0:T,M=TV("number"!=typeof A?A:CV(A,mg)),P=n.rects.popper,V=n.elements[v?m===yg?bX:yg:m],oe=function aJ(n,e,t,r){var i="clippingParents"===e?function oJ(n){var e=pg(oE(n)),r=["absolute","fixed"].indexOf(Ha(n).position)>=0&&Ks(n)?gg(n):n;return nc(r)?e.filter(function(i){return nc(i)&&EV(i,r)&&"body"!==Qo(i)}):[]}(n):[].concat(e),s=[].concat(i,[t]),a=s.reduce(function(l,u){var d=wV(n,u,r);return l.top=rc(d.top,l.top),l.right=sE(d.right,l.right),l.bottom=sE(d.bottom,l.bottom),l.left=rc(d.left,l.left),l},wV(n,s[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(nc(V)?V:V.contextElement||kl(n.elements.popper),l,d,o),le=vh(n.elements.reference),Oe=_V({reference:le,element:P,strategy:"absolute",placement:i}),Et=mA(Object.assign({},P,Oe)),Wt=m===yg?Et:le,Ut={top:oe.top-Wt.top+M.top,bottom:Wt.bottom-oe.bottom+M.bottom,left:oe.left-Wt.left+M.left,right:Wt.right-oe.right+M.right},Rr=n.modifiersData.offset;if(m===yg&&Rr){var ni=Rr[i];Object.keys(Ut).forEach(function(Un){var ua=[Zs,Qs].indexOf(Un)>=0?1:-1,ca=[is,Qs].indexOf(Un)>=0?"y":"x";Ut[Un]+=ni[ca]*ua})}return Ut}const dJ={name:"flip",enabled:!0,phase:"main",fn:function cJ(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=void 0===i||i,o=t.altAxis,a=void 0===o||o,l=t.fallbackPlacements,u=t.padding,d=t.boundary,f=t.rootBoundary,m=t.altBoundary,_=t.flipVariations,v=void 0===_||_,T=t.allowedAutoPlacements,A=e.options.placement,M=Zo(A),P=l||(M!==A&&v?function uJ(n){if(Zo(n)===pA)return[];var e=lE(n);return[vV(n),e,vV(e)]}(A):[lE(A)]),V=[A].concat(P).reduce(function(Gt,Ro){return Gt.concat(Zo(Ro)===pA?function lJ(n,e){void 0===e&&(e={});var i=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,u=void 0===l?pV:l,d=wh(e.placement),f=d?a?fV:fV.filter(function(v){return wh(v)===d}):mg,m=f.filter(function(v){return u.indexOf(v)>=0});0===m.length&&(m=f);var _=m.reduce(function(v,T){return v[T]=vg(n,{placement:T,boundary:i,rootBoundary:s,padding:o})[Zo(T)],v},{});return Object.keys(_).sort(function(v,T){return _[v]-_[T]})}(e,{placement:Ro,boundary:d,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:T}):Ro)},[]),oe=e.rects.reference,le=e.rects.popper,Oe=new Map,Et=!0,Wt=V[0],Ut=0;Ut<V.length;Ut++){var Rr=V[Ut],ni=Zo(Rr),Un=wh(Rr)===Eh,ua=[is,Qs].indexOf(ni)>=0,ca=ua?"width":"height",pe=vg(e,{placement:Rr,boundary:d,rootBoundary:f,altBoundary:m,padding:u}),De=ua?Un?Zs:ss:Un?Qs:is;oe[ca]>le[ca]&&(De=lE(De));var Be=lE(De),ut=[];if(s&&ut.push(pe[ni]<=0),a&&ut.push(pe[De]<=0,pe[Be]<=0),ut.every(function(Gt){return Gt})){Wt=Rr,Et=!1;break}Oe.set(Rr,ut)}if(Et)for(var cs=function(Ro){var Wc=V.find(function(ur){var Ui=Oe.get(ur);if(Ui)return Ui.slice(0,Ro).every(function(Ii){return Ii})});if(Wc)return Wt=Wc,"break"},Pr=v?3:1;Pr>0&&"break"!==cs(Pr);Pr--);e.placement!==Wt&&(e.modifiersData[r]._skip=!0,e.placement=Wt,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Eg(n,e,t){return rc(n,sE(e,t))}const gJ={name:"preventOverflow",enabled:!0,phase:"main",fn:function pJ(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=void 0===i||i,o=t.altAxis,a=void 0!==o&&o,m=t.tether,_=void 0===m||m,v=t.tetherOffset,T=void 0===v?0:v,A=vg(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),M=Zo(e.placement),F=wh(e.placement),P=!F,V=gA(M),oe=function hJ(n){return"x"===n?"y":"x"}(V),le=e.modifiersData.popperOffsets,Oe=e.rects.reference,Et=e.rects.popper,Wt="function"==typeof T?T(Object.assign({},e.rects,{placement:e.placement})):T,Ut="number"==typeof Wt?{mainAxis:Wt,altAxis:Wt}:Object.assign({mainAxis:0,altAxis:0},Wt),Rr=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ni={x:0,y:0};if(le){if(s){var Un,ua="y"===V?is:ss,ca="y"===V?Qs:Zs,pe="y"===V?"height":"width",De=le[V],Be=De+A[ua],ut=De-A[ca],$n=_?-Et[pe]/2:0,cs=F===Eh?Oe[pe]:Et[pe],Pr=F===Eh?-Et[pe]:-Oe[pe],ks=e.elements.arrow,Gt=_&&ks?fA(ks):{width:0,height:0},Ro=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Wc=Ro[ua],ur=Ro[ca],Ui=Eg(0,Oe[pe],Gt[pe]),Ii=P?Oe[pe]/2-$n-Ui-Wc-Ut.mainAxis:cs-Ui-Wc-Ut.mainAxis,Mf=P?-Oe[pe]/2+$n+Ui+ur+Ut.mainAxis:Pr+Ui+ur+Ut.mainAxis,Gc=e.elements.arrow&&gg(e.elements.arrow),fq=null!=(Un=Rr?.[V])?Un:0,Ofe=De+Mf-fq,pq=Eg(_?sE(Be,De+Ii-fq-(Gc?"y"===V?Gc.clientTop||0:Gc.clientLeft||0:0)):Be,De,_?rc(ut,Ofe):ut);le[V]=pq,ni[V]=pq-De}if(a){var gq,qc=le[oe],oT="y"===oe?"height":"width",mq=qc+A["x"===V?is:ss],_q=qc-A["x"===V?Qs:Zs],jx=-1!==[is,ss].indexOf(M),yq=null!=(gq=Rr?.[oe])?gq:0,vq=jx?mq:qc-Oe[oT]-Et[oT]-yq+Ut.altAxis,Eq=jx?qc+Oe[oT]+Et[oT]-yq-Ut.altAxis:_q,wq=_&&jx?function fJ(n,e,t){var r=Eg(n,e,t);return r>t?t:r}(vq,qc,Eq):Eg(_?vq:mq,qc,_?Eq:_q);le[oe]=wq,ni[oe]=wq-qc}e.modifiersData[r]=ni}},requiresIfExists:["offset"]};const vJ={name:"arrow",enabled:!0,phase:"main",fn:function _J(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=Zo(t.placement),l=gA(a),d=[ss,Zs].indexOf(a)>=0?"height":"width";if(s&&o){var f=function(e,t){return TV("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:CV(e,mg))}(i.padding,t),m=fA(s),_="y"===l?is:ss,v="y"===l?Qs:Zs,T=t.rects.reference[d]+t.rects.reference[l]-o[l]-t.rects.popper[d],A=o[l]-t.rects.reference[l],M=gg(s),F=M?"y"===l?M.clientHeight||0:M.clientWidth||0:0,le=F/2-m[d]/2+(T/2-A/2),Oe=Eg(f[_],le,F-m[d]-f[v]);t.modifiersData[r]=((e={})[l]=Oe,e.centerOffset=Oe-le,e)}},effect:function yJ(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||EV(e.elements.popper,i)&&(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bV(n,e,t){return void 0===t&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function AV(n){return[is,Zs,Qs,ss].some(function(e){return n[e]>=0})}var wJ=[jX,zX,KX,YX,eJ,dJ,gJ,vJ,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function EJ(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=vg(e,{elementContext:"reference"}),a=vg(e,{altBoundary:!0}),l=bV(o,r),u=bV(a,i,s),d=AV(l),f=AV(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}}],_A=UX({defaultModifiers:wJ}),Ol=function(){return Ol=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Ol.apply(this,arguments)},uE=function(n,e,t){if(t||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Fl={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},IJ={id:null,override:!0},DV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=Fl),void 0===i&&(i=IJ),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=t,this._options=Ol(Ol({},Fl),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ht.addInstance("Dropdown",this,this._instanceId,i.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},n.prototype.destroy=function(){var e=this,t=this._getTriggerEvents();"click"===this._options.triggerType&&t.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._clickHandler)}),"hover"===this._options.triggerType&&(t.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hoverShowTriggerElHandler),e._targetEl.removeEventListener(r,e._hoverShowTargetElHandler)}),t.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hoverHideHandler),e._targetEl.removeEventListener(r,e._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},n.prototype.removeInstance=function(){Ht.removeInstance("Dropdown",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var e=this,t=this._getTriggerEvents();this._clickHandler=function(){e.toggle()},"click"===this._options.triggerType&&t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._clickHandler)}),this._hoverShowTriggerElHandler=function(r){"click"===r.type?e.toggle():setTimeout(function(){e.show()},e._options.delay)},this._hoverShowTargetElHandler=function(){e.show()},this._hoverHideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},e._options.delay)},"hover"===this._options.triggerType&&(t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hoverShowTriggerElHandler),e._targetEl.addEventListener(r,e._hoverShowTargetElHandler)}),t.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hoverHideHandler),e._targetEl.addEventListener(r,e._hoverHideHandler)}))},n.prototype._createPopperInstance=function(){return _A(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},n.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(t){e._handleClickOutside(t,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(e,t){var r=e.target,i=this._options.ignoreClickOutsideClass,s=!1;i&&document.querySelectorAll(".".concat(i)).forEach(function(a){a.contains(r)&&(s=!0)}),r!==t&&!t.contains(r)&&!this._triggerEl.contains(r)&&!s&&this.isVisible()&&this.hide()},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":default:return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]}}},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.isVisible=function(){return this._visible},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(e){return Ol(Ol({},e),{modifiers:uE(uE([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(e){return Ol(Ol({},e),{modifiers:uE(uE([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},n}();function yA(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(n){var e=n.getAttribute("data-dropdown-toggle"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-dropdown-placement"),i=n.getAttribute("data-dropdown-offset-skidding"),s=n.getAttribute("data-dropdown-offset-distance"),o=n.getAttribute("data-dropdown-trigger"),a=n.getAttribute("data-dropdown-delay"),l=n.getAttribute("data-dropdown-ignore-click-outside-class");new DV(t,n,{placement:r||Fl.placement,triggerType:o||Fl.triggerType,offsetSkidding:i?parseInt(i):Fl.offsetSkidding,offsetDistance:s?parseInt(s):Fl.offsetDistance,delay:a?parseInt(a):Fl.delay,ignoreClickOutsideClass:l||Fl.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(e,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=DV,window.initDropdowns=yA);var cE=function(){return cE=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},cE.apply(this,arguments)},dE={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},TJ={id:null,override:!0},SV=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=dE),void 0===r&&(r=TJ),this._eventListenerInstances=[],this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._options=cE(cE({},dE),t),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Ht.addInstance("Modal",this,this._instanceId,r.override)}return n.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(t){e._targetEl.classList.add(t)}),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},n.prototype.removeInstance=function(){Ht.removeInstance("Modal",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._createBackdrop=function(){var e;if(this._isHidden){var t=document.createElement("div");t.setAttribute("modal-backdrop",""),(e=t.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(t),this._backdropEl=t}},n.prototype._destroyBackdropEl=function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()},n.prototype._setupModalCloseEventListeners=function(){var e=this;"dynamic"===this._options.backdrop&&(this._clickOutsideEventListener=function(t){e._handleOutsideClick(t.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(t){"Escape"===t.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeModalCloseEventListeners=function(){"dynamic"===this._options.backdrop&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._handleOutsideClick=function(e){(e===this._targetEl||e===this._backdropEl&&this.isVisible())&&this.hide()},n.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}},n.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},n.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},n.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},n.prototype.isVisible=function(){return!this._isHidden},n.prototype.isHidden=function(){return this._isHidden},n.prototype.addEventListenerInstance=function(e,t,r){this._eventListenerInstances.push({element:e,type:t,handler:r})},n.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},n.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},n}();function vA(){document.querySelectorAll("[data-modal-target]").forEach(function(n){var e=n.getAttribute("data-modal-target"),t=document.getElementById(e);if(t){var r=t.getAttribute("data-modal-placement"),i=t.getAttribute("data-modal-backdrop");new SV(t,{placement:r||dE.placement,backdrop:i||dE.backdrop})}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(n){var e=n.getAttribute("data-modal-toggle");if(document.getElementById(e)){var r=Ht.getInstance("Modal",e);if(r){var i=function(){r.toggle()};n.addEventListener("click",i),r.addEventListenerInstance(n,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(n){var e=n.getAttribute("data-modal-show");if(document.getElementById(e)){var r=Ht.getInstance("Modal",e);if(r){var i=function(){r.show()};n.addEventListener("click",i),r.addEventListenerInstance(n,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(n){var e=n.getAttribute("data-modal-hide");if(document.getElementById(e)){var r=Ht.getInstance("Modal",e);if(r){var i=function(){r.hide()};n.addEventListener("click",i),r.addEventListenerInstance(n,"click",i)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=SV,window.initModals=vA);var hE=function(){return hE=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},hE.apply(this,arguments)},ic={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},CJ={id:null,override:!0},RV=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=ic),void 0===r&&(r=CJ),this._eventListenerInstances=[],this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._options=hE(hE({},ic),t),this._visible=!1,this._initialized=!1,this.init(),Ht.addInstance("Drawer",this,this._instanceId,r.override)}return n.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(t){e._targetEl.classList.add(t)}),this._handleEscapeKey=function(t){"Escape"===t.key&&e.isVisible()&&e.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},n.prototype.removeInstance=function(){Ht.removeInstance("Drawer",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(t){e._targetEl.classList.remove(t)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(t){e._targetEl.classList.add(t)})):(this._getPlacementClasses(this._options.placement).active.map(function(t){e._targetEl.classList.remove(t)}),this._getPlacementClasses(this._options.placement).inactive.map(function(t){e._targetEl.classList.add(t)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(t){e._targetEl.classList.add(t)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(t){e._targetEl.classList.remove(t)})):(this._getPlacementClasses(this._options.placement).active.map(function(t){e._targetEl.classList.add(t)}),this._getPlacementClasses(this._options.placement).inactive.map(function(t){e._targetEl.classList.remove(t)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype._createBackdrop=function(){var e,t=this;if(!this._visible){var r=document.createElement("div");r.setAttribute("drawer-backdrop",""),(e=r.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),r.addEventListener("click",function(){t.hide()})}},n.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()},n.prototype._getPlacementClasses=function(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype.addEventListenerInstance=function(e,t,r){this._eventListenerInstances.push({element:e,type:t,handler:r})},n.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},n.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},n}();function EA(){document.querySelectorAll("[data-drawer-target]").forEach(function(n){var e=n.getAttribute("data-drawer-target"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-drawer-placement"),i=n.getAttribute("data-drawer-body-scrolling"),s=n.getAttribute("data-drawer-backdrop"),o=n.getAttribute("data-drawer-edge"),a=n.getAttribute("data-drawer-edge-offset");new RV(t,{placement:r||ic.placement,bodyScrolling:i?"true"===i:ic.bodyScrolling,backdrop:s?"true"===s:ic.backdrop,edge:o?"true"===o:ic.edge,edgeOffset:a||ic.edgeOffset})}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(n){var e=n.getAttribute("data-drawer-toggle");if(document.getElementById(e)){var r=Ht.getInstance("Drawer",e);if(r){var i=function(){r.toggle()};n.addEventListener("click",i),r.addEventListenerInstance(n,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(n){var e=n.getAttribute("data-drawer-dismiss")?n.getAttribute("data-drawer-dismiss"):n.getAttribute("data-drawer-hide");if(document.getElementById(e)){var r=Ht.getInstance("Drawer",e);if(r){var i=function(){r.hide()};n.addEventListener("click",i),r.addEventListenerInstance(n,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(n){var e=n.getAttribute("data-drawer-show");if(document.getElementById(e)){var r=Ht.getInstance("Drawer",e);if(r){var i=function(){r.show()};n.addEventListener("click",i),r.addEventListenerInstance(n,"click",i)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=RV,window.initDrawers=EA);var fE=function(){return fE=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},fE.apply(this,arguments)},PV={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},bJ={id:null,override:!0},xV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===r&&(r=PV),void 0===i&&(i=bJ),this._instanceId=i.id?i.id:e.id,this._tabsEl=e,this._items=t,this._activeTab=r?this.getTab(r.defaultTabId):null,this._options=fE(fE({},PV),r),this._initialized=!1,this.init(),Ht.addInstance("Tabs",this,this._tabsEl.id,!0),Ht.addInstance("Tabs",this,this._instanceId,i.override)}return n.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(t){t.triggerEl.addEventListener("click",function(){e.show(t.id)})}))},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},n.prototype.removeInstance=function(){this.destroy(),Ht.removeInstance("Tabs",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getActiveTab=function(){return this._activeTab},n.prototype.setActiveTab=function(e){this._activeTab=e},n.prototype.getTab=function(e){return this._items.filter(function(t){return t.id===e})[0]},n.prototype.show=function(e,t){var r,i,s=this;void 0===t&&(t=!1);var o=this.getTab(e);o===this._activeTab&&!t||(this._items.map(function(a){var l,u;a!==o&&((l=a.triggerEl.classList).remove.apply(l,s._options.activeClasses.split(" ")),(u=a.triggerEl.classList).add.apply(u,s._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(r=o.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(i=o.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-selected","true"),o.targetEl.classList.remove("hidden"),this.setActiveTab(o),this._options.onShow(this,o))},n}();function wA(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(n){var e=[],t=null;n.querySelectorAll('[role="tab"]').forEach(function(r){var i="true"===r.getAttribute("aria-selected"),s={id:r.getAttribute("data-tabs-target"),triggerEl:r,targetEl:document.querySelector(r.getAttribute("data-tabs-target"))};e.push(s),i&&(t=s.id)}),new xV(n,e,{defaultTabId:t})})}typeof window<"u"&&(window.Tabs=xV,window.initTabs=wA);var Ll=function(){return Ll=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Ll.apply(this,arguments)},pE=function(n,e,t){if(t||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},gE={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},AJ={id:null,override:!0},MV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=gE),void 0===i&&(i=AJ),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=t,this._options=Ll(Ll({},gE),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ht.addInstance("Tooltip",this,this._instanceId,i.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},n.prototype.destroy=function(){var e=this;if(this._initialized){var t=this._getTriggerEvents();t.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showHandler)}),t.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},n.prototype.removeInstance=function(){Ht.removeInstance("Tooltip",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var e=this,t=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){e.hide()},t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showHandler)}),t.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hideHandler)})},n.prototype._createPopperInstance=function(){return _A(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},n.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(t){"Escape"===t.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(t){e._handleClickOutside(t,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(e,t){var r=e.target;r!==t&&!t.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return Ll(Ll({},e),{modifiers:pE(pE([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return Ll(Ll({},e),{modifiers:pE(pE([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n}();function IA(){document.querySelectorAll("[data-tooltip-target]").forEach(function(n){var e=n.getAttribute("data-tooltip-target"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-tooltip-trigger"),i=n.getAttribute("data-tooltip-placement");new MV(t,n,{placement:i||gE.placement,triggerType:r||gE.triggerType})}else console.error('The tooltip element with id "'.concat(e,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=MV,window.initTooltips=IA);var Vl=function(){return Vl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Vl.apply(this,arguments)},mE=function(n,e,t){if(t||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},wg={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},DJ={id:null,override:!0},NV=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=wg),void 0===i&&(i=DJ),this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._triggerEl=t,this._options=Vl(Vl({},wg),r),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ht.addInstance("Popover",this,i.id?i.id:this._targetEl.id,i.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},n.prototype.destroy=function(){var e=this;if(this._initialized){var t=this._getTriggerEvents();t.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showHandler),e._targetEl.removeEventListener(r,e._showHandler)}),t.hideEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._hideHandler),e._targetEl.removeEventListener(r,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},n.prototype.removeInstance=function(){Ht.removeInstance("Popover",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var e=this,t=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},100)},t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showHandler),e._targetEl.addEventListener(r,e._showHandler)}),t.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._hideHandler),e._targetEl.addEventListener(r,e._hideHandler)})},n.prototype._createPopperInstance=function(){return _A(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},n.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(t){"Escape"===t.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(t){e._handleClickOutside(t,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(e,t){var r=e.target;r!==t&&!t.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return Vl(Vl({},e),{modifiers:mE(mE([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return Vl(Vl({},e),{modifiers:mE(mE([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n}();function TA(){document.querySelectorAll("[data-popover-target]").forEach(function(n){var e=n.getAttribute("data-popover-target"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-popover-trigger"),i=n.getAttribute("data-popover-placement"),s=n.getAttribute("data-popover-offset");new NV(t,n,{placement:i||wg.placement,offset:s?parseInt(s):wg.offset,triggerType:r||wg.triggerType})}else console.error('The popover element with id "'.concat(e,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=NV,window.initPopovers=TA);var _E=function(){return _E=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},_E.apply(this,arguments)},CA={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},SJ={id:null,override:!0},kV=function(){function n(e,t,r,i,s){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=CA),void 0===s&&(s=SJ),this._instanceId=s.id?s.id:r.id,this._parentEl=e,this._triggerEl=t,this._targetEl=r,this._options=_E(_E({},CA),i),this._visible=!1,this._initialized=!1,this.init(),Ht.addInstance("Dial",this,this._instanceId,s.override)}return n.prototype.init=function(){var e=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var t=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){e.show()},t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,e._showEventHandler),e._targetEl.addEventListener(r,e._showEventHandler)}),this._hideEventHandler=function(){e._parentEl.matches(":hover")||e.hide()},t.hideEvents.forEach(function(r){e._parentEl.addEventListener(r,e._hideEventHandler)}),this._initialized=!0}},n.prototype.destroy=function(){var e=this;if(this._initialized){var t=this._getTriggerEventTypes(this._options.triggerType);t.showEvents.forEach(function(r){e._triggerEl.removeEventListener(r,e._showEventHandler),e._targetEl.removeEventListener(r,e._showEventHandler)}),t.hideEvents.forEach(function(r){e._parentEl.removeEventListener(r,e._hideEventHandler)}),this._initialized=!1}},n.prototype.removeInstance=function(){Ht.removeInstance("Dial",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this._visible?this.hide():this.show()},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype._getTriggerEventTypes=function(e){switch(e){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},n}();function bA(){document.querySelectorAll("[data-dial-init]").forEach(function(n){var e=n.querySelector("[data-dial-toggle]");if(e){var t=e.getAttribute("data-dial-toggle"),r=document.getElementById(t);if(r){var i=e.getAttribute("data-dial-trigger");new kV(n,e,r,{triggerType:i||CA.triggerType})}else console.error("Dial with id ".concat(t," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(n.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}function OV(){rA(),sA(),oA(),aA(),yA(),vA(),EA(),wA(),IA(),TA(),bA()}typeof window<"u"&&(window.Dial=kV,window.initDials=bA),typeof window<"u"&&(window.initFlowbite=OV),new hX("load",[rA,sA,oA,aA,yA,vA,EA,wA,IA,TA,bA]).init();let PJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ai({type:n,selectors:[["app-sidebar"]],decls:9,vars:0,consts:[[1,"navbarLateral"],[1,"cardIconesLateral"],["role","button",1,"material-symbols-outlined"]],template:function(r,i){1&r&&(Re(0,"nav",0)(1,"div",1)(2,"ul")(3,"li")(4,"span",2),Qe(5,"home"),Le()(),Re(6,"li")(7,"span",2),Qe(8,"settings"),Le()()()()())},styles:[".navbarLateral[_ngcontent-%COMP%]{width:5rem;height:100vh;background-color:var(--sidebar);font-family:Roboto;color:#fff}.cardIconesLateral[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;line-height:5rem;color:azure;cursor:pointer}span[_ngcontent-%COMP%]:hover{background-color:var(--hover-icons)}@media (max-width: 450px){.navbarLateral[_ngcontent-%COMP%]{display:none}}"]})}return n})(),xJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ai({type:n,selectors:[["app-card-faturas"]],decls:23,vars:0,consts:[[1,"card"],[1,"card-container"],["id","card-total-liquido",1,"cards"],[1,"titulo-card"],["id","card-fatura-atual",1,"cards"],["id","card-proxima-fatura",1,"cards"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"span",3),Qe(5,"Total l\xedquido"),Le(),Nr(6,"hr"),Re(7,"h1"),Qe(8,"R$ 2.356,99 "),Le()()(),Re(9,"div")(10,"div",4)(11,"span",3),Qe(12,"Fatura atual"),Le(),Nr(13,"hr"),Re(14,"h1"),Qe(15,"R$ 2.356,99 "),Le()()(),Re(16,"div")(17,"div",5)(18,"span",3),Qe(19,"Pr\xf3xima fatura"),Le(),Nr(20,"hr"),Re(21,"h1"),Qe(22,"R$ 356,99 "),Le()()()()())},styles:[".card[_ngcontent-%COMP%]{width:100%;height:10rem;background-color:var(--background-secondary);border-radius:10px}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:0 1rem;align-items:center;flex-wrap:wrap;width:100%;height:100%}.titulo-card[_ngcontent-%COMP%]{font-family:Roboto;color:#0b0b09;font-size:10pt;font-weight:500}#card-total-liquido[_ngcontent-%COMP%]{background-color:#56f452;padding:1rem}#card-fatura-atual[_ngcontent-%COMP%]{background-color:#75c1f3;padding:1rem}#card-proxima-fatura[_ngcontent-%COMP%]{background-color:#f9db49;padding:1rem}.cards[_ngcontent-%COMP%]{width:20rem;height:8rem;cursor:pointer}.cards[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:1px solid #3f3f3f;margin-top:.7rem}.cards[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;height:5rem;align-items:center;font-size:22pt;font-weight:500}@media (max-width: 450px){.cards[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:25px}.cards[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{height:90%;justify-content:center;align-items:center;font-size:32pt}.titulo-card[_ngcontent-%COMP%]{font-size:12pt}}"]})}return n})();var Ar=Ve(881);(0,Ar.registerVersion)("firebase","10.6.0","app");class kJ extends Rt{constructor(e,t){super()}schedule(e,t=0){return this}}const yE={setInterval(n,e,...t){const{delegate:r}=yE;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=yE;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class FV extends kJ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return yE.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&yE.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Se(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const AA={now:()=>(AA.delegate||Date).now(),delegate:void 0};class Ig{constructor(e,t=Ig.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ig.now=AA.now;class LV extends Ig{constructor(e,t=Ig.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const LJ=new class FJ extends LV{}(class OJ extends FV{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),vE=new LV(FV),VJ=vE,EE=new Vd("ANGULARFIRE2_VERSION");const DA=(n,e)=>{const t=e?[e]:(0,Ar.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class SA{constructor(){return DA(BJ)}}const BJ="app-check";function Ih(){}class BV{zone;delegate;constructor(e,t=LJ){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class UJ{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ih,{},Ih,Ih)),t.pipe(kr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wE=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new BV(Zone.current)),this.insideAngular=t.run(()=>new BV(Zone.current,vE)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ae(Vt))};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Th(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function sc(n){return Th().ngZone.run(()=>n())}function Bl(n){return function jJ(n){return function(t){return(t=t.lift(new UJ(n.ngZone))).pipe(xr(n.outsideAngular),zn(n.insideAngular))}}(Th())(n)}const HJ=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),sc(()=>n.apply(void 0,r))},IE=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=sc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ih,{},Ih,Ih))),r[s]=HJ(r[s],t));const i=function $J(n){return Th().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof qe){const s=Th();return i.pipe(xr(s.outsideAngular),zn(s.insideAngular))}return sc(()=>i)}return i instanceof qe?i.pipe(Bl):i instanceof Promise?sc(()=>new Promise((s,o)=>i.then(a=>sc(()=>s(a)),a=>sc(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:sc(()=>i)};class Tg{constructor(e){return e}}class UV{constructor(){return(0,Ar.getApps)()}}const RA=new me("angularfire2._apps"),WJ={provide:Tg,useFactory:function zJ(n){return n&&1===n.length?n[0]:new Tg((0,Ar.getApp)())},deps:[[new di,RA]]},GJ={provide:UV,deps:[[new di,RA]]};function qJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Tg(r)}}let KJ=(()=>{class n{constructor(t){(0,Ar.registerVersion)("angularfire",EE.full,"core"),(0,Ar.registerVersion)("angularfire",EE.full,"app"),(0,Ar.registerVersion)("angular",uN.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ae(Ku))};static \u0275mod=vn({type:n});static \u0275inj=Jn({providers:[WJ,GJ]})}return n})();function QJ(n,...e){return{ngModule:KJ,providers:[{provide:RA,useFactory:qJ(n),multi:!0,deps:[Vt,fi,wE,...e]}]}}const ZJ=IE(Ar.initializeApp,!0);Ve(808);var D=Ve(90),Ys=Ve(877),Ul=Ve(859);class jV{constructor(){return DA("auth")}}var _e,Pe=Ve(861),eee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wo={},MA=MA||{},et=eee||self;function TE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var NA="closure_uid_"+(1e9*Math.random()>>>0),nee=0;function ree(n,e,t){return n.call.apply(n.bind,arguments)}function iee(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return(mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ree:iee).apply(null,arguments)}function CE(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function $l(){this.s=this.s,this.o=this.o}$l.prototype.s=!1,$l.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function tee(n){Object.prototype.hasOwnProperty.call(n,NA)&&n[NA]||(n[NA]=++nee)}(this)},$l.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kA(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zV(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(TE(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function _i(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_i.prototype.h=function(){this.defaultPrevented=!0};var oee=function(){if(!et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{et.addEventListener("test",()=>{},e),et.removeEventListener("test",()=>{},e)}catch{}return n}();function bg(n){return/^[\s\xa0]*$/.test(n)}function bE(){var n=et.navigator;return n&&(n=n.userAgent)?n:""}function Yo(n){return-1!=bE().indexOf(n)}function OA(n){return OA[" "](n),n}OA[" "]=function(){};var LA,n,lee=Yo("Opera"),Ch=Yo("Trident")||Yo("MSIE"),WV=Yo("Edge"),FA=WV||Ch,GV=Yo("Gecko")&&!(-1!=bE().toLowerCase().indexOf("webkit")&&!Yo("Edge"))&&!(Yo("Trident")||Yo("MSIE"))&&!Yo("Edge"),uee=-1!=bE().toLowerCase().indexOf("webkit")&&!Yo("Edge");function qV(){var n=et.document;return n?n.documentMode:void 0}e:{var VA="",BA=(n=bE(),GV?/rv:([^\);]+)(\)|;)/.exec(n):WV?/Edge\/([\d\.]+)/.exec(n):Ch?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uee?/WebKit\/(\S+)/.exec(n):lee?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(BA&&(VA=BA?BA[1]:""),Ch){var UA=qV();if(null!=UA&&UA>parseFloat(VA)){LA=String(UA);break e}}LA=VA}var cee=et.document&&Ch&&(qV()||parseInt(LA,10))||void 0;function Ag(n,e){if(_i.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(GV){e:{try{OA(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dee[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ag.$.h.call(this)}}Or(Ag,_i);var dee={2:"touch",3:"pen",4:"mouse"};Ag.prototype.h=function(){Ag.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dg="closure_listenable_"+(1e6*Math.random()|0),hee=0;function fee(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++hee,this.fa=this.ia=!1}function AE(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function jA(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QV(n){const e={};for(const t in n)e[t]=n[t];return e}const ZV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YV(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<ZV.length;s++)t=ZV[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function DE(n){this.src=n,this.g={},this.h=0}function HA(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=HV(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(AE(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zA(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}DE.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=zA(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new fee(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var WA="closure_lm_"+(1e6*Math.random()|0),GA={};function XV(n,e,t,r,i){if(r&&r.once)return e2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)XV(n,e[s],t,r,i);return null}return t=ZA(t),n&&n[Dg]?n.O(e,t,Cg(r)?!!r.capture:!!r,i):JV(n,e,t,!1,r,i)}function JV(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Cg(i)?!!i.capture:!!i,a=KA(n);if(a||(n[WA]=a=new DE(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function gee(){const e=mee;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)oee||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(n2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function e2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)e2(n,e[s],t,r,i);return null}return t=ZA(t),n&&n[Dg]?n.P(e,t,Cg(r)?!!r.capture:!!r,i):JV(n,e,t,!0,r,i)}function t2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)t2(n,e[s],t,r,i);else r=Cg(r)?!!r.capture:!!r,t=ZA(t),n&&n[Dg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zA(s=n.g[e],t,r,i))&&(AE(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=KA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zA(e,t,r,i)),(t=-1<n?e[n]:null)&&qA(t))}function qA(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Dg])HA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(n2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=KA(e))?(HA(t,n),0==t.h&&(t.src=null,e[WA]=null)):AE(n)}}}function n2(n){return n in GA?GA[n]:GA[n]="on"+n}function mee(n,e){if(n.fa)n=!0;else{e=new Ag(e,this);var t=n.listener,r=n.la||n.src;n.ia&&qA(n),n=t.call(r,e)}return n}function KA(n){return(n=n[WA])instanceof DE?n:null}var QA="__closure_events_fn_"+(1e9*Math.random()>>>0);function ZA(n){return"function"==typeof n?n:(n[QA]||(n[QA]=function(e){return n.handleEvent(e)}),n[QA])}function Fr(){$l.call(this),this.i=new DE(this),this.S=this,this.J=null}function Qr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new _i(e,n);else if(e instanceof _i)e.target=e.target||n;else{var i=e;YV(e=new _i(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=SE(o,r,!0,e)&&i}if(i=SE(o=e.g=n,r,!0,e)&&i,i=SE(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=SE(o=e.g=t[s],r,!1,e)&&i}function SE(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&HA(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Or(Fr,$l),Fr.prototype[Dg]=!0,Fr.prototype.removeEventListener=function(n,e,t,r){t2(this,n,e,t,r)},Fr.prototype.N=function(){if(Fr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)AE(t[r]);delete n.g[e],n.h--}}this.J=null},Fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var YA=et.JSON.stringify;function yee(){var n=XA;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var r2=new class _ee{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Eee,n=>n.reset());class Eee{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wee(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Iee(n){et.setTimeout(()=>{throw n},0)}let Sg,Rg=!1,XA=new class vee{constructor(){this.h=this.g=null}add(e,t){const r=r2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},i2=()=>{const n=et.Promise.resolve(void 0);Sg=()=>{n.then(Tee)}};var Tee=()=>{for(var n;n=yee();){try{n.h.call(n.g)}catch(t){Iee(t)}var e=r2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rg=!1};function RE(n,e){Fr.call(this),this.h=n||1,this.g=e||et,this.j=mi(this.qb,this),this.l=Date.now()}function JA(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function eD(n,e,t){if("function"==typeof n)t&&(n=mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:et.setTimeout(n,e||0)}function s2(n){n.g=eD(()=>{n.g=null,n.i&&(n.i=!1,s2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(RE,Fr),(_e=RE.prototype).ga=!1,_e.T=null,_e.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Qr(this,"tick"),this.ga&&(JA(this),this.start()))}},_e.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_e.N=function(){RE.$.N.call(this),JA(this),delete this.g};class Cee extends $l{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:s2(this)}N(){super.N(),this.g&&(et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pg(n){$l.call(this),this.h=n,this.g={}}Or(Pg,$l);var o2=[];function a2(n,e,t,r){Array.isArray(t)||(t&&(o2[0]=t.toString()),t=o2);for(var i=0;i<t.length;i++){var s=XV(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function l2(n){jA(n.g,function(e,t){this.g.hasOwnProperty(t)&&qA(e)},n),n.g={}}function PE(){this.g=!0}function bh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function See(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return YA(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Pg.prototype.N=function(){Pg.$.N.call(this),l2(this)},Pg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},PE.prototype.Ea=function(){this.g=!1},PE.prototype.info=function(){};var oc={},u2=null;function xE(){return u2=u2||new Fr}function c2(n){_i.call(this,oc.Ta,n)}function xg(n){const e=xE();Qr(e,new c2(e))}function d2(n,e){_i.call(this,oc.STAT_EVENT,n),this.stat=e}function Fi(n){const e=xE();Qr(e,new d2(e,n))}function h2(n,e){_i.call(this,oc.Ua,n),this.size=e}function Mg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return et.setTimeout(function(){n()},e)}oc.Ta="serverreachability",Or(c2,_i),oc.STAT_EVENT="statevent",Or(d2,_i),oc.Ua="timingevent",Or(h2,_i);var ME={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},f2={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tD(){}function g2(){}tD.prototype.h=null;var iD,Ng={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nD(){_i.call(this,"d")}function rD(){_i.call(this,"c")}function NE(){}function kg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Pg(this),this.P=Ree,this.V=new RE(n=FA?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new m2}function m2(){this.i=null,this.g="",this.h=!1}Or(nD,_i),Or(rD,_i),Or(NE,tD),NE.prototype.g=function(){return new XMLHttpRequest},NE.prototype.i=function(){return{}},iD=new NE;var Ree=45e3,sD={},kE={};function oD(n,e,t){n.L=1,n.v=VE(za(e)),n.s=t,n.S=!0,_2(n,null)}function _2(n,e){n.G=Date.now(),Og(n),n.A=za(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),D2(t.i,"t",r),n.C=0,t=n.l.J,n.h=new m2,n.g=Y2(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Cee(mi(n.Pa,n,n.g),n.O)),a2(n.U,n.g,"readystatechange",n.nb),e=n.I?QV(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),xg(),function bee(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var d=u[0];u=u[1];var f=d.split("_");o=2<=f.length&&"type"==f[1]?o+(d+"=")+u+"&":o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function y2(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function v2(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Pee(n,t),i==kE){4==e&&(n.o=4,Fi(14),r=!1),bh(n.j,n.m,null,"[Incomplete Response]");break}if(i==sD){n.o=4,Fi(15),bh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bh(n.j,n.m,i,null),aD(n,i)}y2(n)&&i!=kE&&i!=sD&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),pD(e),e.M=!0,Fi(11))):(bh(n.j,n.m,t,"[Invalid Chunked Response]"),ac(n),Fg(n))}function Pee(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?kE:(t=Number(e.substring(t,r)),isNaN(t)?sD:(r+=1)+t>e.length?kE:(e=e.slice(r,r+t),n.C=r+t,e))}function Og(n){n.Y=Date.now()+n.P,E2(n,n.P)}function E2(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Mg(mi(n.lb,n),e)}function OE(n){n.B&&(et.clearTimeout(n.B),n.B=null)}function Fg(n){0==n.l.H||n.J||q2(n.l,n)}function ac(n){OE(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,JA(n.V),l2(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function aD(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||lD(t.i,n)))if(!n.K&&lD(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;zE(t),jE(t)}fD(t),Fi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Mg(mi(t.ib,t),6e3));if(1>=P2(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else uc(t,11)}else if((n.K||t.g==n)&&zE(t),!bg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.V=u[0],u=u[1],2==t.H)if("c"==u[0]){t.K=u[1],t.pa=u[2];const d=u[3];null!=d&&(t.ra=d,t.l.info("VER="+t.ra));const f=u[4];null!=f&&(t.Ga=f,t.l.info("SVER="+t.Ga));const m=u[5];null!=m&&"number"==typeof m&&0<m&&(t.L=r=1.5*m,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const _=n.g;if(_){const v=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||-1==v.indexOf("spdy")&&-1==v.indexOf("quic")&&-1==v.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uD(s,s.h),s.h=null))}if(r.F){const T=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,In(r.I,r.F,T))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=Z2(r,r.J?r.pa:null,r.Y),o.K){x2(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(OE(a),Og(a)),r.g=o}else W2(r);0<t.j.length&&HE(t)}else"stop"!=u[0]&&"close"!=u[0]||uc(t,7);else 3==t.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?uc(t,7):hD(t):"noop"!=u[0]&&t.h&&t.h.Aa(u),t.A=0)}xg()}catch{}}function w2(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(TE(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Mee(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(TE(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function xee(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(TE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(_e=kg.prototype).setTimeout=function(n){this.P=n},_e.nb=function(n){n=n.target;const e=this.M;e&&3==Xo(n)?e.l():this.Pa(n)},_e.Pa=function(n){try{if(n==this.g)e:{const d=Xo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>d)&&(3!=d||FA||this.g&&(this.h.h||this.g.ja()||B2(this.g)))){this.J||4!=d||7==e||xg(),OE(this);var t=this.g.da();this.ca=t;t:if(y2(this)){var r=B2(this.g);n="";var i=r.length,s=4==Xo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ac(this),Fg(this);var o="";break t}this.h.i=new et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Aee(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,d,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bg(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.o=3,Fi(12),ac(this),Fg(this);break e}bh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aD(this,t)}this.S?(v2(this,d,o),FA&&this.i&&3==d&&(a2(this.U,this.V,"tick",this.mb),this.V.start())):(bh(this.j,this.m,o,null),aD(this,o)),4==d&&ac(this),this.i&&!this.J&&(4==d?q2(this.l,this):(this.i=!1,Og(this)))}else(function Zee(n){const e={};n=(n.g&&2<=Xo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(bg(n[r]))continue;var t=wee(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function pee(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),ac(this),Fg(this)}}}catch{}},_e.mb=function(){if(this.g){var n=Xo(this.g),e=this.g.ja();this.C<e.length&&(OE(this),v2(this,n,e),this.i&&4!=n&&Og(this))}},_e.cancel=function(){this.J=!0,ac(this)},_e.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Dee(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(xg(),Fi(17)),ac(this),this.o=2,Fg(this)):E2(this,this.Y-n)};var I2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lc){this.h=n.h,FE(this,n.j),this.s=n.s,this.g=n.g,LE(this,n.m),this.l=n.l;var e=n.i,t=new Bg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),T2(this,t),this.o=n.o}else n&&(e=String(n).match(I2))?(this.h=!1,FE(this,e[1]||"",!0),this.s=Lg(e[2]||""),this.g=Lg(e[3]||"",!0),LE(this,e[4]),this.l=Lg(e[5]||"",!0),T2(this,e[6]||"",!0),this.o=Lg(e[7]||"")):(this.h=!1,this.i=new Bg(null,this.h))}function za(n){return new lc(n)}function FE(n,e,t){n.j=t?Lg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function LE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function T2(n,e,t){e instanceof Bg?(n.i=e,function Bee(n,e){e&&!n.j&&(jl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(b2(this,r),D2(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Vg(e,Lee)),n.i=new Bg(e,n.h))}function In(n,e,t){n.i.set(e,t)}function VE(n){return In(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kee),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kee(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vg(e,C2,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vg(e,C2,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vg(t,"/"==t.charAt(0)?Fee:Oee,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vg(t,Vee)),n.join("")};var C2=/[#\/\?@]/g,Oee=/[#\?:]/g,Fee=/[#\?]/g,Lee=/[#\?@]/g,Vee=/#/g;function Bg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function jl(n){n.g||(n.g=new Map,n.h=0,n.i&&function Nee(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function b2(n,e){jl(n),e=Ah(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function A2(n,e){return jl(n),e=Ah(n,e),n.g.has(e)}function D2(n,e,t){b2(n,e),0<t.length&&(n.i=null,n.g.set(Ah(n,e),kA(t)),n.h+=t.length)}function Ah(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function S2(n){this.l=n||$ee,n=et.PerformanceNavigationTiming?0<(n=et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(et.g&&et.g.Ka&&et.g.Ka()&&et.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_e=Bg.prototype).add=function(n,e){jl(this),this.i=null,n=Ah(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},_e.forEach=function(n,e){jl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},_e.ta=function(){jl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},_e.Z=function(n){jl(this);let e=[];if("string"==typeof n)A2(this,n)&&(e=e.concat(this.g.get(Ah(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},_e.set=function(n,e){return jl(this),this.i=null,A2(this,n=Ah(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},_e.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},_e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var $ee=10;function R2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function P2(n){return n.h?1:n.g?n.g.size:0}function lD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function uD(n,e){n.g?n.g.add(e):n.h=e}function x2(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function M2(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kA(n.i)}S2.prototype.cancel=function(){if(this.i=M2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var jee=class{stringify(n){return et.JSON.stringify(n,void 0)}parse(n){return et.JSON.parse(n,void 0)}};function Hee(){this.g=new jee}function zee(n,e,t){const r=t||"";try{w2(n,function(i,s){let o=i;Cg(i)&&(o=YA(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function BE(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ug(n){this.l=n.ec||null,this.j=n.ob||!1}function UE(n,e){Fr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=cD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Or(Ug,tD),Ug.prototype.g=function(){return new UE(this.l,this.j)},Ug.prototype.i=function(n){return function(){return n}}({}),Or(UE,Fr);var cD=0;function N2(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function $g(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jg(n)}function jg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(_e=UE.prototype).open=function(n,e){if(this.readyState!=cD)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jg(this)},_e.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},_e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$g(this)),this.readyState=cD},_e.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jg(this)),this.g&&(this.readyState=3,jg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;N2(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},_e.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$g(this):jg(this),3==this.readyState&&N2(this)}},_e.Za=function(n){this.g&&(this.response=this.responseText=n,$g(this))},_e.Ya=function(n){this.g&&(this.response=n,$g(this))},_e.ka=function(){this.g&&$g(this)},_e.setRequestHeader=function(n,e){this.v.append(n,e)},_e.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},_e.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(UE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Gee=et.JSON.parse;function qn(n){Fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=k2,this.L=this.M=!1}Or(qn,Fr);var k2="",qee=/^https?$/i,Kee=["POST","PUT"];function O2(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,F2(n),$E(n)}function F2(n){n.F||(n.F=!0,Qr(n,"complete"),Qr(n,"error"))}function L2(n){if(n.h&&typeof MA<"u"&&(!n.C[1]||4!=Xo(n)||2!=n.da()))if(n.v&&4==Xo(n))eD(n.La,0,n);else if(Qr(n,"readystatechange"),4==Xo(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(I2)[1]||null;!i&&et.self&&et.self.location&&(i=et.self.location.protocol.slice(0,-1)),r=!qee.test(i?i.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var s=2<Xo(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",F2(n)}}finally{$E(n)}}}function $E(n,e){if(n.g){V2(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch{}}}function V2(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(et.clearTimeout(n.A),n.A=null)}function Xo(n){return n.g?n.g.readyState:0}function B2(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case k2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function U2(n){let e="";return jA(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function dD(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=U2(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):In(n,e,t))}function Hg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $2(n){this.Ga=0,this.j=[],this.l=new PE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Hg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Hg("baseRetryDelayMs",5e3,n),this.hb=Hg("retryDelaySeedMs",1e4,n),this.eb=Hg("forwardChannelMaxRetries",2,n),this.xa=Hg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new S2(n&&n.concurrentRequestLimit),this.Ja=new Hee,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hD(n){if(j2(n),3==n.H){var e=n.W++,t=za(n.I);if(In(t,"SID",n.K),In(t,"RID",e),In(t,"TYPE","terminate"),zg(n,t),(e=new kg(n,n.l,e)).L=2,e.v=VE(za(t)),t=!1,et.navigator&&et.navigator.sendBeacon)try{t=et.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&et.Image&&((new Image).src=e.v,t=!0),t||(e.g=Y2(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Og(e)}Q2(n)}function jE(n){n.g&&(pD(n),n.g.cancel(),n.g=null)}function j2(n){jE(n),n.u&&(et.clearTimeout(n.u),n.u=null),zE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&et.clearTimeout(n.m),n.m=null)}function HE(n){if(!R2(n.i)&&!n.m){n.m=!0;var e=n.Na;Sg||i2(),Rg||(Sg(),Rg=!0),XA.add(e,n),n.C=0}}function H2(n,e){var t;t=e?e.m:n.W++;const r=za(n.I);In(r,"SID",n.K),In(r,"RID",t),In(r,"AID",n.V),zg(n,r),n.o&&n.s&&dD(r,n.o,n.s),t=new kg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=z2(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),uD(n.i,t),oD(t,r,e)}function zg(n,e){n.na&&jA(n.na,function(t,r){In(e,r,t)}),n.h&&w2({},function(t,r){In(e,r,t)})}function z2(n,e,t){t=Math.min(n.j.length,t);var r=n.h?mi(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let u=i[l].g;const d=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{zee(d,o,"req"+u+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function W2(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Sg||i2(),Rg||(Sg(),Rg=!0),XA.add(e,n),n.A=0}}function fD(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Mg(mi(n.Ma,n),K2(n,n.A)),n.A++,0))}function pD(n){null!=n.B&&(et.clearTimeout(n.B),n.B=null)}function G2(n){n.g=new kg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=za(n.wa);In(e,"RID","rpc"),In(e,"SID",n.K),In(e,"AID",n.V),In(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&In(e,"TO",n.qa),In(e,"TYPE","xmlhttp"),zg(n,e),n.o&&n.s&&dD(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=VE(za(e)),t.s=null,t.S=!0,_2(t,n)}function zE(n){null!=n.v&&(et.clearTimeout(n.v),n.v=null)}function q2(n,e){var t=null;if(n.g==e){zE(n),pD(n),n.g=null;var r=2}else{if(!lD(n.i,e))return;t=e.F,x2(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Qr(r=xE(),new h2(r,t)),HE(n)}else W2(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Yee(n,e){return!(P2(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Mg(mi(n.Na,n,e),K2(n,n.C)),n.C++,0)))}(n,e)||2==r&&fD(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:uc(n,5);break;case 4:uc(n,10);break;case 3:uc(n,6);break;default:uc(n,2)}}function K2(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function uc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=mi(n.pb,n);t||(t=new lc("//www.google.com/images/cleardot.gif"),et.location&&"http"==et.location.protocol||FE(t,"https"),VE(t)),function Wee(n,e){const t=new PE;if(et.Image){const r=new Image;r.onload=CE(BE,t,r,"TestLoadImage: loaded",!0,e),r.onerror=CE(BE,t,r,"TestLoadImage: error",!1,e),r.onabort=CE(BE,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=CE(BE,t,r,"TestLoadImage: timeout",!1,e),et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fi(2);n.H=0,n.h&&n.h.za(e),Q2(n),j2(n)}function Q2(n){if(n.H=0,n.ma=[],n.h){const e=M2(n.i);(0!=e.length||0!=n.j.length)&&(zV(n.ma,e),zV(n.ma,n.j),n.i.i.length=0,kA(n.j),n.j.length=0),n.h.ya()}}function Z2(n,e,t){var r=t instanceof lc?za(t):new lc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),LE(r,r.m);else{var i=et.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new lc(null);r&&FE(s,r),e&&(s.g=e),i&&LE(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&In(r,t,e),In(r,"VER",n.ra),zg(n,r),r}function Y2(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Ha&&!n.va?new Ug({ob:!0}):n.va)).Oa(n.J),e}function X2(){}function WE(){if(Ch&&!(10<=Number(cee)))throw Error("Environmental error: no available transport.")}function As(n,e){Fr.call(this),this.g=new $2(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!bg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dh(this)}function J2(n){nD.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function eB(){rD.call(this),this.status=1}function Dh(n){this.g=n}function Io(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gD(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Zt(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(_e=qn.prototype).Oa=function(n){this.M=n},_e.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iD.g(),this.C=function p2(n){return n.h||(n.h=n.i())}(this.u?this.u:iD),this.g.onreadystatechange=mi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void O2(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=et.FormData&&n instanceof et.FormData,!(0<=HV(Kee,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{V2(this),0<this.B&&((this.L=function Qee(n){return Ch&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.ua,this)):this.A=eD(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){O2(this,s)}},_e.ua=function(){typeof MA<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},_e.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),$E(this))},_e.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$E(this,!0)),qn.$.N.call(this)},_e.La=function(){this.s||(this.G||this.v||this.l?L2(this):this.kb())},_e.kb=function(){L2(this)},_e.isActive=function(){return!!this.g},_e.da=function(){try{return 2<Xo(this)?this.g.status:-1}catch{return-1}},_e.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},_e.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Gee(e)}},_e.Ia=function(){return this.m},_e.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(_e=$2.prototype).ra=8,_e.H=1,_e.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new kg(this,this.l,n);let s=this.s;if(this.U&&(s?(s=QV(s),YV(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=z2(this,i,e),In(t=za(this.I),"RID",n),In(t,"CVER",22),this.F&&In(t,"X-HTTP-Session-Id",this.F),zg(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(U2(s)))+"&"+e:this.o&&dD(t,this.o,s)),uD(this.i,i),this.bb&&In(t,"TYPE","init"),this.P?(In(t,"$req",e),In(t,"SID","null"),i.aa=!0,oD(i,t,null)):oD(i,t,e),this.H=2}}else 3==this.H&&(n?H2(this,n):0==this.j.length||R2(this.i)||H2(this))},_e.Ma=function(){if(this.u=null,G2(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Mg(mi(this.jb,this),n)}},_e.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fi(10),jE(this),G2(this))},_e.ib=function(){null!=this.v&&(this.v=null,jE(this),fD(this),Fi(19))},_e.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Fi(2)):(this.l.info("Failed to ping google.com"),Fi(1))},_e.isActive=function(){return!!this.h&&this.h.isActive(this)},(_e=X2.prototype).Ba=function(){},_e.Aa=function(){},_e.za=function(){},_e.ya=function(){},_e.isActive=function(){return!0},_e.Va=function(){},WE.prototype.g=function(n,e){return new As(n,e)},Or(As,Fr),As.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Fi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Z2(n,null,n.Y),HE(n)},As.prototype.close=function(){hD(this.g)},As.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=YA(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&HE(e)},As.prototype.N=function(){this.g.h=null,delete this.j,hD(this.g),delete this.g,As.$.N.call(this)},Or(J2,nD),Or(eB,rD),Or(Dh,X2),Dh.prototype.Ba=function(){Qr(this.g,"a")},Dh.prototype.Aa=function(n){Qr(this.g,new J2(n))},Dh.prototype.za=function(n){Qr(this.g,new eB)},Dh.prototype.ya=function(){Qr(this.g,"b")},Or(Io,function Xee(){this.blockSize=-1}),Io.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Io.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)gD(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){gD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){gD(this,r),i=0;break}}this.h=i,this.i+=e},Io.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Jee={};function mD(n){return-128<=n&&128>n?function aee(n,e){var t=Jee;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Zt([0|e],0>e?-1:0)}):new Zt([0|n],0>n?-1:0)}function Jo(n){if(isNaN(n)||!isFinite(n))return Sh;if(0>n)return Zr(Jo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=_D;return new Zt(e,0)}var _D=4294967296,Sh=mD(0),yD=mD(1),nB=mD(16777216);function Wa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Xs(n){return-1==n.h}function Zr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Zt(t,~n.h).add(yD)}function GE(n,e){return n.add(Zr(e))}function qE(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Wg(n,e){this.g=n,this.h=e}function KE(n,e){if(Wa(e))throw Error("division by zero");if(Wa(n))return new Wg(Sh,Sh);if(Xs(n))return e=KE(Zr(n),e),new Wg(Zr(e.g),Zr(e.h));if(Xs(e))return e=KE(n,Zr(e)),new Wg(Zr(e.g),e.h);if(30<n.g.length){if(Xs(n)||Xs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=yD,r=e;0>=r.X(n);)t=rB(t),r=rB(r);var i=Rh(t,1),s=Rh(r,1);for(r=Rh(r,2),t=Rh(t,2);!Wa(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Rh(r,1),t=Rh(t,1)}return e=GE(n,i.R(e)),new Wg(i,e)}for(i=Sh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Jo(t)).R(e);Xs(o)||0<o.X(n);)o=(s=Jo(t-=r)).R(e);Wa(s)&&(s=yD),i=i.add(s),n=GE(n,o)}return new Wg(i,n)}function rB(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Zt(t,n.h)}function Rh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Zt(i,n.h)}(_e=Zt.prototype).ea=function(){if(Xs(this))return-Zr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:_D+r)*e,e*=_D}return n},_e.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Wa(this))return"0";if(Xs(this))return"-"+Zr(this).toString(n);for(var e=Jo(Math.pow(n,6)),t=this,r="";;){var i=KE(t,e).g,s=((0<(t=GE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Wa(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},_e.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},_e.X=function(n){return Xs(n=GE(this,n))?-1:Wa(n)?0:1},_e.abs=function(){return Xs(this)?Zr(this):this},_e.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Zt(t,-2147483648&t[t.length-1]?-1:0)},_e.R=function(n){if(Wa(this)||Wa(n))return Sh;if(Xs(this))return Xs(n)?Zr(this).R(Zr(n)):Zr(Zr(this).R(n));if(Xs(n))return Zr(this.R(Zr(n)));if(0>this.X(nB)&&0>n.X(nB))return Jo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,l=65535&n.D(i);t[2*r+2*i]+=o*l,qE(t,2*r+2*i),t[2*r+2*i+1]+=s*l,qE(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,qE(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,qE(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Zt(t,0)},_e.gb=function(n){return KE(this,n).h},_e.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Zt(t,this.h&n.h)},_e.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Zt(t,this.h|n.h)},_e.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Zt(t,this.h^n.h)},WE.prototype.createWebChannel=WE.prototype.g,As.prototype.send=As.prototype.u,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,ME.NO_ERROR=0,ME.TIMEOUT=8,ME.HTTP_ERROR=6,f2.COMPLETE="complete",g2.EventType=Ng,Ng.OPEN="a",Ng.CLOSE="b",Ng.ERROR="c",Ng.MESSAGE="d",Fr.prototype.listen=Fr.prototype.O,qn.prototype.listenOnce=qn.prototype.P,qn.prototype.getLastError=qn.prototype.Sa,qn.prototype.getLastErrorCode=qn.prototype.Ia,qn.prototype.getStatus=qn.prototype.da,qn.prototype.getResponseJson=qn.prototype.Wa,qn.prototype.getResponseText=qn.prototype.ja,qn.prototype.send=qn.prototype.ha,qn.prototype.setWithCredentials=qn.prototype.Oa,Io.prototype.digest=Io.prototype.l,Io.prototype.reset=Io.prototype.reset,Io.prototype.update=Io.prototype.j,Zt.prototype.add=Zt.prototype.add,Zt.prototype.multiply=Zt.prototype.R,Zt.prototype.modulo=Zt.prototype.gb,Zt.prototype.compare=Zt.prototype.X,Zt.prototype.toNumber=Zt.prototype.ea,Zt.prototype.toString=Zt.prototype.toString,Zt.prototype.getBits=Zt.prototype.D,Zt.fromNumber=Jo,Zt.fromString=function tB(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Zr(tB(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Jo(Math.pow(e,8)),r=Sh,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=Jo(Math.pow(e,s)),r=r.R(s).add(Jo(o))):r=(r=r.R(t)).add(Jo(o))}return r};var ete=wo.createWebChannelTransport=function(){return new WE},tte=wo.getStatEventTarget=function(){return xE()},vD=wo.ErrorCode=ME,nte=wo.EventType=f2,rte=wo.Event=oc,iB=wo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ite=wo.FetchXmlHttpFactory=Ug,QE=wo.WebChannel=g2,ste=wo.XhrIo=qn,ote=wo.Md5=Io,Ph=wo.Integer=Zt;const sB="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let xh="10.5.2";const Hl=new Ys.Yd("@firebase/firestore");function Mh(){return Hl.logLevel}function re(n,...e){if(Hl.logLevel<=Ys.in.DEBUG){const t=e.map(ED);Hl.debug(`Firestore (${xh}): ${n}`,...t)}}function sr(n,...e){if(Hl.logLevel<=Ys.in.ERROR){const t=e.map(ED);Hl.error(`Firestore (${xh}): ${n}`,...t)}}function Ds(n,...e){if(Hl.logLevel<=Ys.in.WARN){const t=e.map(ED);Hl.warn(`Firestore (${xh}): ${n}`,...t)}}function ED(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function be(n="Unexpected state"){const e=`FIRESTORE (${xh}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function xe(n,e){n||be()}function de(n,e){return n}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends D.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class oB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ate{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class lte{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ute{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,Pe.Z)(function*(){yield u.promise,yield s(r.currentUser)}))},l=u=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe("string"==typeof r.accessToken),new oB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xe(null===e||"string"==typeof e),new Lr(e)}}class cte{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dte{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cte(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xe("string"==typeof t.token),this.R=t.token,new aB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fte(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class lB{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fte(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function Nh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ie(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Vn(0,0))}static max(){return new ke(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gg{constructor(e,t,r){void 0===t?t=0:t>e.length&&be(),void 0===r?r=e.length-t:r>e.length-t&&be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xt extends Gg{construct(e,t,r){return new xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new xt(t)}static emptyPath(){return new xt([])}}const pte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends Gg{construct(e,t,r){return new Rn(e,t,r)}static isValidIdentifier(e){return pte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ie(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ie(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new ie(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ie(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(t)}static emptyPath(){return new Rn([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(xt.fromString(e))}static fromName(e){return new he(xt.fromString(e).popFirst(5))}static empty(){return new he(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new xt(e.slice()))}}function dB(n){return new Ss(n.readTime,n.key,-1)}class Ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ss(ke.min(),he.empty(),-1)}static max(){return new Ss(ke.max(),he.empty(),-1)}}function ID(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=he.comparator(n.documentKey,e.documentKey),0!==t?t:Ze(n.largestBatchId,e.largestBatchId))}const hB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _te{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zl(n){return TD.apply(this,arguments)}function TD(){return TD=(0,Pe.Z)(function*(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==hB)throw n;re("LocalStore","Unexpectedly lost primary lease")}),TD.apply(this,arguments)}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):L.reject(t)}static resolve(e){return new L((t,r)=>{t(e)})}static reject(e){return new L((t,r)=>{r(e)})}static waitFor(e){return new L((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next(i=>i?L.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new L((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Wl(n){return"IndexedDbTransactionError"===n.name}let Rs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Kg(n){return null==n}function Qg(n){return 0===n&&1/n==-1/0}function wB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class hn{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new XE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new XE(this.root,e,this.comparator,!1)}getReverseIterator(){return new XE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new XE(this.root,e,this.comparator,!0)}}class XE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TB(this.data.getIterator())}getIteratorFrom(e){return new TB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class TB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class os{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new os([])}unionWith(e){let t=new Xt(Rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class CB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CB("Invalid base64 string: "+s):s}}(e);return new Sr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const Ute=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ql(n){if(xe(!!n),"string"==typeof n){let e=0;const t=Ute.exec(n);if(xe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ga(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function JE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ew(n){const e=n.mapValue.fields.__previous_value__;return JE(e)?ew(e):e}function Zg(n){const e=ql(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class $te{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class fc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}const Kl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ql(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?JE(n)?4:SB(n)?9007199254740991:10:be()}function ta(n,e){if(n===e)return!0;const t=Ql(n);if(t!==Ql(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zg(n).isEqual(Zg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ql(i.timestampValue),a=ql(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ga(n.bytesValue).isEqual(Ga(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Kn(i.geoPointValue.latitude)===Kn(s.geoPointValue.latitude)&&Kn(i.geoPointValue.longitude)===Kn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Kn(i.integerValue)===Kn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Kn(i.doubleValue),a=Kn(s.doubleValue);return o===a?Qg(o)===Qg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Nh(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wB(o)!==wB(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!ta(o[l],a[l])))return!1;return!0}(n,e);default:return be()}var s}function Yg(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function Zl(n,e){if(n===e)return 0;const t=Ql(n),r=Ql(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Kn(s.integerValue||s.doubleValue),l=Kn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return bB(n.timestampValue,e.timestampValue);case 4:return bB(Zg(n),Zg(e));case 5:return Ze(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ga(s),l=Ga(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Ze(a[u],l[u]);if(0!==d)return d}return Ze(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ze(Kn(s.latitude),Kn(o.latitude));return 0!==a?a:Ze(Kn(s.longitude),Kn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=Zl(a[u],l[u]);if(d)return d}return Ze(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Kl.mapValue&&o===Kl.mapValue)return 0;if(s===Kl.mapValue)return 1;if(o===Kl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Ze(l[f],d[f]);if(0!==m)return m;const _=Zl(a[l[f]],u[d[f]]);if(0!==_)return _}return Ze(l.length,d.length)}(n.mapValue,e.mapValue);default:throw be()}}function bB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ze(n,e);const t=ql(n),r=ql(e),i=Ze(t.seconds,r.seconds);return 0!==i?i:Ze(t.nanos,r.nanos)}function Lh(n){return AD(n)}function AD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ql(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ga(n.bytesValue).toBase64():"referenceValue"in n?he.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=AD(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${AD(t.fields[o])}`;return i+"}"}(n.mapValue):be()}function DD(n){return!!n&&"integerValue"in n}function Xg(n){return!!n&&"arrayValue"in n}function AB(n){return!!n&&"nullValue"in n}function DB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rw(n){return!!n&&"mapValue"in n}function Jg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Jg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jg(t)}setAll(e){let t=Rn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Jg(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());rw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Xr(Jg(this.value))}}function xB(n){const e=[];return Gl(n.fields,(t,r)=>{const i=new Rn([t]);if(rw(r)){const s=xB(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new os(e)}class Tn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tn(e,0,ke.min(),ke.min(),ke.min(),Xr.empty(),0)}static newFoundDocument(e,t,r,i){return new Tn(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new Tn(e,2,t,ke.min(),ke.min(),Xr.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,ke.min(),ke.min(),Xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yl{constructor(e,t){this.position=e,this.inclusive=t}}function MB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?he.comparator(he.fromName(o.referenceValue),t.key):Zl(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function NB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class em{constructor(e,t="asc"){this.field=e,this.dir=t}}function zte(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class kB{}class Dt extends kB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Wte(e,t,r):"array-contains"===t?new Kte(e,r):"in"===t?new UB(e,r):"not-in"===t?new Qte(e,r):"array-contains-any"===t?new Zte(e,r):new Dt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Gte(e,r):new qte(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zl(t,this.value)):null!==t&&Ql(this.value)===Ql(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends kB{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Yt(e,t)}matches(e){return Vh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Vh(n){return"and"===n.op}function RD(n){return function OB(n){for(const e of n.filters)if(e instanceof Yt)return!1;return!0}(n)&&Vh(n)}function PD(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+Lh(n.value);if(RD(n))return n.filters.map(e=>PD(e)).join(",");{const e=n.filters.map(t=>PD(t)).join(",");return`${n.op}(${e})`}}function FB(n,e){return n instanceof Dt?(r=n,(i=e)instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&ta(r.value,i.value)):n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&FB(o,i.filters[a]),!0)}(n,e):void be();var r,i}function VB(n){return n instanceof Dt?`${(t=n).field.canonicalString()} ${t.op} ${Lh(t.value)}`:n instanceof Yt?function(t){return t.op.toString()+" {"+t.getFilters().map(VB).join(" ,")+"}"}(n):"Filter";var t}class Wte extends Dt{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class Gte extends Dt{constructor(e,t){super(e,"in",t),this.keys=BB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qte extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=BB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class Kte extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xg(t)&&Yg(t.arrayValue,this.value)}}class UB extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yg(this.value.arrayValue,t)}}class Qte extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yg(this.value.arrayValue,t)}}class Zte extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yg(this.value.arrayValue,r))}}class Yte{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function xD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Yte(n,e,t,r,i,s,o)}function gc(n){const e=de(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>PD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Kg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lh(r)).join(",")),e.ce=t}return e.ce}function tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zte(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NB(n.startAt,e.startAt)&&NB(n.endAt,e.endAt)}function iw(n){return he.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class qa{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function Bh(n){return new qa(n)}function zB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Uh(n){const e=de(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Rn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new em(s,r))}),t.has(Rn.keyField().canonicalString())||e.le.push(new em(Rn.keyField(),r))}return e.le}function Li(n){const e=de(n);return e.he||(e.he=function WB(n,e){if("F"===n.limitType)return xD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new em(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Yl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yl(n.startAt.position,n.startAt.inclusive):null;return xD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Uh(n))),e.he}function ow(n,e,t){return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nm(n,e){return tm(Li(n),Li(e))&&n.limitType===e.limitType}function GB(n){return`${gc(Li(n))}|lt:${n.limitType}`}function $h(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>VB(i)).join(", ")}]`),Kg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Lh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Lh(i)).join(",")),`Target(${r})`}(Li(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Uh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const u=MB(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Uh(r),i)||r.endAt&&!function(o,a,l){const u=MB(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Uh(r),i)));var r,i}function KB(n){return(e,t)=>{let r=!1;for(const i of Uh(n)){const s=Xte(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Xte(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return null!==l&&null!==u?Zl(l,u):be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}class Ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IB(this.inner)}size(){return this.innerSize}}const Jte=new hn(he.comparator);function as(){return Jte}const QB=new hn(he.comparator);function im(...n){let e=QB;for(const t of n)e=e.insert(t.key,t);return e}function ZB(n){let e=QB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function na(){return sm()}function YB(){return sm()}function sm(){return new Ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const ene=new hn(he.comparator),tne=new Xt(he.comparator);function at(...n){let e=tne;for(const t of n)e=e.add(t);return e}const nne=new Xt(Ze);function XB(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qg(e)?"-0":e}}function JB(n){return{integerValue:""+n}}function eU(n,e){return function pB(n){return"number"==typeof n&&Number.isInteger(n)&&!Qg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?JB(e):XB(n,e)}class aw{constructor(){this._=void 0}}function rne(n,e,t){return n instanceof jh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&JE(s)&&(s=ew(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof mc?nU(n,e):n instanceof _c?rU(n,e):function(i,s){const o=tU(i,s),a=iU(o)+iU(i.Ie);return DD(o)&&DD(i.Ie)?JB(a):XB(i.serializer,a)}(n,e)}function ine(n,e,t){return n instanceof mc?nU(n,e):n instanceof _c?rU(n,e):t}function tU(n,e){return n instanceof Hh?DD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class jh extends aw{}class mc extends aw{constructor(e){super(),this.elements=e}}function nU(n,e){const t=sU(e);for(const r of n.elements)t.some(i=>ta(i,r))||t.push(r);return{arrayValue:{values:t}}}class _c extends aw{constructor(e){super(),this.elements=e}}function rU(n,e){let t=sU(e);for(const r of n.elements)t=t.filter(i=>!ta(i,r));return{arrayValue:{values:t}}}class Hh extends aw{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function iU(n){return Kn(n.integerValue||n.doubleValue)}function sU(n){return Xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class one{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class uw{}function oU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Wh(n.key,Pn.none()):new zh(n.key,n.data,Pn.none());{const t=n.data,r=Xr.empty();let i=new Xt(Rn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Qa(n.key,r,new os(i.toArray()),Pn.none())}}function ane(n,e,t){n instanceof zh?function(i,s,o){const a=i.value.clone(),l=uU(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Qa?function(i,s,o){if(!lw(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=uU(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(lU(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function am(n,e,t,r){return n instanceof zh?function(s,o,a,l){if(!lw(s.precondition,o))return a;const u=s.value.clone(),d=cU(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qa?function(s,o,a,l){if(!lw(s.precondition,o))return a;const u=cU(s.fieldTransforms,l,o),d=o.data;return d.setAll(lU(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):(a=t,lw(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function lne(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=tU(r.transform,i||null);null!=s&&(null===t&&(t=Xr.empty()),t.set(r.field,s))}return t||null}function aU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Nh(r,i,(s,o)=>function sne(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof mc&&i instanceof mc||r instanceof _c&&i instanceof _c?Nh(r.elements,i.elements,ta):r instanceof Hh&&i instanceof Hh?ta(r.Ie,i.Ie):r instanceof jh&&i instanceof jh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class zh extends uw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qa extends uw{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uU(n,e,t){const r=new Map;xe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ine(o,a,t[i]))}return r}function cU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,rne(s,o,e))}return r}class Wh extends uw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OD extends uw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ane(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=YB();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=oU(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),at())}isEqual(e){return this.batchId===e.batchId&&Nh(this.mutations,e.mutations,(t,r)=>aU(t,r))&&Nh(this.baseMutations,e.baseMutations,(t,r)=>aU(t,r))}}class LD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length);let i=ene;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new LD(e,t,r,i)}}class VD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cne{constructor(e,t){this.count=e,this.unchangedNames=t}}var Er,Mt;function hU(n){if(void 0===n)return sr("GRPC error has no .code"),H.UNKNOWN;switch(n){case Er.OK:return H.OK;case Er.CANCELLED:return H.CANCELLED;case Er.UNKNOWN:return H.UNKNOWN;case Er.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Er.INTERNAL:return H.INTERNAL;case Er.UNAVAILABLE:return H.UNAVAILABLE;case Er.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Er.NOT_FOUND:return H.NOT_FOUND;case Er.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Er.ABORTED:return H.ABORTED;case Er.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Er.DATA_LOSS:return H.DATA_LOSS;default:return be()}}(Mt=Er||(Er={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";const dne=new Ph([4294967295,4294967295],0);function pU(n){const e=function fU(){return new TextEncoder}().encode(n),t=new ote;return t.update(e),new Uint8Array(t.digest())}function gU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ph([t,r],0),new Ph([i,s],0)]}class BD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lm(`Invalid padding: ${t}`);if(r<0)throw new lm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new lm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new lm(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Ph.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Ph.fromNumber(r)));return 1===i.compare(dne)&&(i=new Ph([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=pU(e),[r,i]=gU(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new BD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=pU(e),[r,i]=gU(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class lm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class um{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new um(ke.min(),i,new hn(Ze),as(),at())}}class cm{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cm(r,t,at(),at(),at())}}class dw{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class mU{constructor(e,t){this.targetId=e,this.fe=t}}class _U{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class yU{constructor(){this.ge=0,this.pe=EU(),this.ye=Sr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=at(),t=at(),r=at();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:be()}}),new cm(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=EU()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class hne{constructor(e){this.Le=e,this.ke=new Map,this.qe=as(),this.Qe=vU(),this.Ke=new hn(Ze)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(iw(s))if(0===r){const o=new he(s.path);this.We(t,o,Tn.newNoDocument(o,ke.min()))}else xe(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Ga(r).toUint8Array()}catch(l){if(l instanceof CB)return Ds("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new BD(o,i,s)}catch(l){return Ds(l instanceof lm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&iw(a.target)){const l=new he(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,Tn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=at();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new um(e,t,this.Ke,this.qe,r);return this.qe=as(),this.Qe=vU(),this.Ke=new hn(Ze),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new yU,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Xt(Ze),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||re("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new yU),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function vU(){return new hn(he.comparator)}function EU(){return new hn(he.comparator)}const fne={asc:"ASCENDING",desc:"DESCENDING"},pne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gne={and:"AND",or:"OR"};class mne{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function UD(n,e){return n.useProto3Json||Kg(e)?e:{value:e}}function Gh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _ne(n,e){return Gh(n,e.toTimestamp())}function or(n){return xe(!!n),ke.fromTimestamp(function(t){const r=ql(t);return new Vn(r.seconds,r.nanos)}(n))}function $D(n,e){return(r=n,new xt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function IU(n){const e=xt.fromString(n);return xe(xU(e)),e}function dm(n,e){return $D(n.databaseId,e.path)}function ra(n,e){const t=IU(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(CU(t))}function jD(n,e){return $D(n.databaseId,e)}function hm(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CU(n){return xe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bU(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function DU(n,e){return{documents:[jD(n,e.path)]}}function zD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=jD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=jD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0!==l.length)return PU(Yt.create(l,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(u=>{return{field:Xl((f=u).field),direction:Ine(f.dir)};var f})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=UD(n,e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t;var l}function SU(n){let e=function TU(n){const e=IU(n);return 4===e.length?xt.emptyPath():CU(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xe(1===r);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){const m=RU(f);return m instanceof Yt&&RD(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(m=>{return new em(qh((v=m).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;t.limit&&(a=function(f){let m;return m="object"==typeof f?f.value:f,Kg(m)?null:m}(t.limit));let l=null;var f;t.startAt&&(l=new Yl((f=t.startAt).values||[],!!f.before));let u=null;return t.endAt&&(u=function(f){return new Yl(f.values||[],!f.before)}(t.endAt)),function HB(n,e,t,r,i,s,o,a){return new qa(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",l,u)}function RU(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qh(t.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qh(t.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qh(t.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qh(t.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(n):void 0!==n.fieldFilter?Dt.create(qh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Yt.create(t.compositeFilter.filters.map(r=>RU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(n):be();var t}function Ine(n){return fne[n]}function Tne(n){return pne[n]}function Cne(n){return gne[n]}function Xl(n){return{fieldPath:n.canonicalString()}}function qh(n){return Rn.fromServerFormat(n.fieldPath)}function PU(n){return n instanceof Dt?function(t){if("=="===t.op){if(DB(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NAN"}};if(AB(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(DB(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NAN"}};if(AB(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(t.field),op:Tne(t.op),value:t.value}}}(n):n instanceof Yt?function(t){const r=t.getFilters().map(i=>PU(i));return 1===r.length?r[0]:{compositeFilter:{op:Cne(t.op),filters:r}}}(n):be()}function bne(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Za{constructor(e,t,r,i,s=ke.min(),o=ke.min(),a=Sr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class MU{constructor(e){this.ut=e}}function WD(n){const e=SU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ow(e,e.limit,"L"):e}class wc{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Kn(e.integerValue));else if("doubleValue"in e){const r=Kn(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),Qg(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Ga(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?SB(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):be()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const i of Object.keys(r))this.At(i,t),this.Pt(r[i],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const i of r)this.Pt(i,t)}ft(e,t){this.Tt(t,37),he.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}wc.St=new wc;class Nne{constructor(){this.on=new YD}addToCollectionParentIndex(e,t){return this.on.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Ss.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class YD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xt(xt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(xt.comparator)).toArray()}}new Uint8Array(0);class vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class Tc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Tc(0)}static Nn(){return new Tc(-1)}}class Bne{constructor(){this.changes=new Ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jne{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class s${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&am(r.mutation,i,os.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,at()).next(()=>r))}getLocalViewOfDocuments(e,t,r=at()){const i=na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=im();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,at()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=as();const o=sm(),a=sm();return t.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof Qa)?s=s.insert(u.key,u):void 0!==d?(o.set(u.key,d.mutation.getFieldMask()),am(d.mutation,u,d.mutation.getFieldMask(),Vn.now())):o.set(u.key,os.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new jne(d,null!==(f=o.get(u))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=sm();let i=new hn((o,a)=>o-a),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(null===u)return;let d=r.get(l)||os.empty();d=a.applyToLocalView(u,d),r.set(l,d);const f=(i.get(a.batchId)||at()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,f=YB();d.forEach(m=>{if(!s.has(m)){const _=oU(t.get(m),r.get(m));null!==_&&f.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return he.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function MD(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):L.resolve(na());let a=-1,l=s;return o.next(u=>L.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,at())).next(d=>({batchId:a,changes:ZB(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=im();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=im();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=(f=t,m=l.child(s),new qa(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,m;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();null===o.get(d)&&(o=o.insert(d,Tn.newInvalidDocument(d)))});let a=im();return o.forEach((l,u)=>{const d=s.get(l);void 0!==d&&am(d.mutation,u,os.empty(),Vn.now()),rm(t,u)&&(a=a.insert(l,u))}),a})}}class Hne{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return L.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(i=t).id,version:i.version,createTime:or(i.createTime)}),L.resolve();var i}getNamedQuery(e,t){return L.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(i=t).name,query:WD(i.bundledQuery),readTime:or(i.readTime)}),L.resolve();var i}}class zne{constructor(){this.overlays=new hn(he.comparator),this.lr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=na();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.lt(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const i=na(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new hn((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);null===d&&(d=na(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=na(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return L.resolve(a)}lt(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VD(t,r));let s=this.lr.get(t);void 0===s&&(s=at(),this.lr.set(t,s)),this.lr.set(t,s.add(r.key))}}class XD{constructor(){this.hr=new Xt(Br.Pr),this.Ir=new Xt(Br.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new Br(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new Br(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new he(new xt([])),r=new Br(t,e),i=new Br(t,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new he(new xt([])),r=new Br(t,e),i=new Br(t,e+1);let s=at();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Br(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Br{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return he.comparator(e.key,t.key)||Ze(e.gr,t.gr)}static Tr(e,t){return Ze(e.gr,t.gr)||he.comparator(e.key,t.key)}}class Wne{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Xt(Br.Pr)}checkEmpty(e){return L.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.pr;this.pr++;const o=new FD(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Br(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Sr(t+1),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Br(t,0),i=new Br(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xt(Ze);return t.forEach(i=>{const s=new Br(i,0),o=new Br(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),L.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const o=new Br(new he(s),0);let a=new Xt(Ze);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.gr)),!0)},o),L.resolve(this.br(a))}br(e){const t=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xe(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return L.forEach(t.mutations,i=>{const s=new Br(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new Br(t,0),i=this.yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return L.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gne{constructor(e){this.Cr=e,this.docs=new hn(he.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=as();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=as();const o=t.path,a=new he(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ID(dB(d),r)<=0||(i.has(d.key)||rm(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,r,i){be()}vr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qne(this)}getSize(e){return L.resolve(this.size)}}class qne extends Bne{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Kne{constructor(e){this.persistence=e,this.Fr=new Ka(t=>gc(t),tm),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Mr=0,this.Or=new XD,this.targetCount=0,this.Nr=Tc.On()}forEachTarget(e,t){return this.Fr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),L.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Tc(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.kn(t),L.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Or.containsKey(t))}}class JD{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Rs(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Kne(this),this.indexManager=new Nne,this.remoteDocumentCache=new Gne(r=>this.referenceDelegate.Qr(r)),this.serializer=new MU(t),this.Kr=new Hne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zne,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Wne(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const i=new Qne(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,t){return L.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class Qne extends _te{constructor(e){super(),this.currentSequenceNumber=e}}class vw{constructor(e){this.persistence=e,this.Gr=new XD,this.zr=null}static jr(e){return new vw(e)}get Hr(){if(this.zr)return this.zr;throw be()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Hr,r=>{const i=he.fromPath(r);return this.Jr(e,i).next(s=>{s||t.removeEntry(i,ke.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return L.or([()=>L.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class rS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=i}static Qi(e,t){let r=at(),i=at();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new rS(e,t.fromCache,r,i)}}class Yne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class a${constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Yne;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,r,i){return r.documentReadCount<this.Ui?(Mh()<=Ys.in.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",$h(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),L.resolve()):(Mh()<=Ys.in.DEBUG&&re("QueryEngine","Query:",$h(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Mh()<=Ys.in.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",$h(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(t))):L.resolve())}zi(e,t){if(zB(t))return L.resolve(null);let r=Li(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ow(t,null,"F"),r=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=at(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Yi(t,a);return this.Zi(t,u,o,l.readTime)?this.zi(e,ow(t,null,"F")):this.Xi(e,u,t,l)}))})))}ji(e,t,r,i){return zB(t)||i.isEqual(ke.min())?L.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,r,i)?L.resolve(null):(Mh()<=Ys.in.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$h(t)),this.Xi(e,o,t,function cB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new Ss(i,he.empty(),e)}(i,-1)).next(a=>a))})}Yi(e,t){let r=new Xt(KB(e));return t.forEach((i,s)=>{rm(e,s)&&(r=r.add(s))}),r}Zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,t,r){return Mh()<=Ys.in.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",$h(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ss.min(),r)}Xi(e,t,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Xne{constructor(e,t,r,i){this.persistence=e,this.es=t,this.serializer=i,this.ts=new hn(Ze),this.ns=new Ka(s=>gc(s),tm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s$(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function u$(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,Pe.Z)(function*(n,e){const t=de(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=at();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}),iS.apply(this,arguments)}function c$(n){const e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function tre(n,e){const t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jh(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,Pe.Z)(function*(n,e,t){const r=de(n),i=r.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Wl(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),sS.apply(this,arguments)}function Iw(n,e,t){const r=de(n);let i=ke.min(),s=at();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const f=de(l),m=f.ns.get(d);return void 0!==m?L.resolve(f.ts.get(m)):f.qr.getTargetData(u,d)}(r,o,Li(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,t?i:ke.min(),t?s:at())).next(a=>(function p$(n,e,t){let r=n.rs.get(e)||ke.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.rs.set(e,r)}(r,function qB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ls:s})))}class cS{constructor(){this.activeTargetIds=function kD(){return nne}()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _${constructor(){this.eo=new cS,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new cS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ire{ro(e){}shutdown(){}}class y${constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bw=null;function hS(){return null===bw?bw=268435456+Math.round(2147483648*Math.random()):bw++,"0x"+bw.toString(16)}const sre={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ore{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ei="WebChannelConnection";class are extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(t,r,i,s,o){const a=hS(),l=this.So(t,r);re("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(t,l,u,i).then(d=>(re("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Ds("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Co(t,r,i,s,o,a){return this.wo(t,r,i,s,o)}bo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+xh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}So(t,r){return`${this.mo}/v1/${r}:${sre[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,i){const s=hS();return new Promise((o,a)=>{const l=new ste;l.setWithCredentials(!0),l.listenOnce(nte.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vD.NO_ERROR:const d=l.getResponseJson();re(Ei,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case vD.TIMEOUT:re(Ei,`RPC '${e}' ${s} timed out`),a(new ie(H.DEADLINE_EXCEEDED,"Request time out"));break;case vD.HTTP_ERROR:const f=l.getStatus();if(re(Ei,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m?.error;if(_&&_.status&&_.message){const v=function(A){const M=A.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(M)>=0?M:H.UNKNOWN}(_.status);a(new ie(v,_.message))}else a(new ie(H.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ie(H.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{re(Ei,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);re(Ei,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}vo(e,t,r){const i=hS(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ete(),a=tte(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new ite({})),this.bo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");re(Ei,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);let m=!1,_=!1;const v=new ore({co:A=>{_?re(Ei,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(re(Ei,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),re(Ei,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},lo:()=>f.close()}),T=(A,M,F)=>{A.listen(M,P=>{try{F(P)}catch(V){setTimeout(()=>{throw V},0)}})};return T(f,QE.EventType.OPEN,()=>{_||re(Ei,`RPC '${e}' stream ${i} transport opened.`)}),T(f,QE.EventType.CLOSE,()=>{_||(_=!0,re(Ei,`RPC '${e}' stream ${i} transport closed`),v.Ro())}),T(f,QE.EventType.ERROR,A=>{_||(_=!0,Ds(Ei,`RPC '${e}' stream ${i} transport errored:`,A),v.Ro(new ie(H.UNAVAILABLE,"The operation could not be completed")))}),T(f,QE.EventType.MESSAGE,A=>{var M;if(!_){const F=A.data[0];xe(!!F);const V=F.error||(null===(M=F[0])||void 0===M?void 0:M.error);if(V){re(Ei,`RPC '${e}' stream ${i} received error:`,V);const oe=V.status;let le=function(Wt){const Ut=Er[Wt];if(void 0!==Ut)return hU(Ut)}(oe),Oe=V.message;void 0===le&&(le=H.INTERNAL,Oe="Unknown error status: "+oe+" with message "+V.message),_=!0,v.Ro(new ie(le,Oe)),f.close()}else re(Ei,`RPC '${e}' stream ${i} received:`,F),v.Vo(F)}}),T(a,rte.STAT_EVENT,A=>{A.stat===iB.PROXY?re(Ei,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===iB.NOPROXY&&re(Ei,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ao()},0),v}}function Aw(){return typeof document<"u"?document:null}function wm(n){return new mne(n,!0)}class fS{constructor(e,t,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class E${constructor(e,t,r,i,s,o,a,l){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new fS(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Pe.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Pe.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,Pe.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===H.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===t&&this.s_(r,i)},r=>{e(()=>{const i=new ie(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Pe.Z)(function*(){e.state=0,e.start()}))}o_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lre extends E${constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function vne(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:be(),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(xe(void 0===d||"string"==typeof d),Sr.fromBase64String(d||"")):(xe(void 0===d||d instanceof Uint8Array),Sr.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=void 0===u.code?H.UNKNOWN:hU(u.code);return new ie(d,u.message||"")}(o);t=new _U(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ra(n,r.document.name),s=or(r.document.updateTime),o=r.document.createTime?or(r.document.createTime):ke.min(),a=new Xr({mapValue:{fields:r.document.fields}}),l=Tn.newFoundDocument(i,s,o,a);t=new dw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=ra(n,r.document),s=r.readTime?or(r.readTime):ke.min(),o=Tn.newNoDocument(i,s);t=new dw([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ra(n,r.document);t=new dw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return be();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new cne(i,s);t=new mU(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ke.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?or(o.readTime):ke.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=hm(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=iw(l)?{documents:DU(s,l)}:{query:zD(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wU(s,o.resumeToken);const u=UD(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=Gh(s,o.snapshotVersion.toTimestamp());const u=UD(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function wne(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=hm(this.serializer),t.removeTarget=e,this.e_(t)}}class ure extends E${constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function Ene(n,e){return n&&n.length>0?(xe(void 0!==e),n.map(t=>function(i,s){let o=or(i.updateTime?i.updateTime:s);return o.isEqual(ke.min())&&(o=or(s)),new one(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.I_(r,t)}return xe(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=hm(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function fm(n,e){let t;if(e instanceof zh)t={update:bU(n,e.key,e.value)};else if(e instanceof Wh)t={delete:dm(n,e.key)};else if(e instanceof Qa)t={update:bU(n,e.key,e.data),updateMask:bne(e.fieldMask)};else{if(!(e instanceof OD))return be();t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof jh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _c)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw be()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:_ne(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:be()),t;var s}(this.serializer,r))};this.e_(t)}}class cre extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ie(H.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(H.UNKNOWN,i.toString())})}Co(e,t,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(H.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class hre{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(sr(t),this.f_=!1):re("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class fre{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,Pe.Z)(function*(){var l;nu(o)&&(re("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,Pe.Z)(function*(d){const f=de(d);f.C_.add(4),yield ef(f),f.M_.set("Unknown"),f.C_.delete(4),yield Im(f)}),function u(d){return l.apply(this,arguments)})(o))}))}),this.M_=new hre(r,i)}}function Im(n){return gS.apply(this,arguments)}function gS(){return gS=(0,Pe.Z)(function*(n){if(nu(n))for(const e of n.v_)yield e(!0)}),gS.apply(this,arguments)}function ef(n){return mS.apply(this,arguments)}function mS(){return mS=(0,Pe.Z)(function*(n){for(const e of n.v_)yield e(!1)}),mS.apply(this,arguments)}function Dw(n,e){const t=de(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),vS(t)?yS(t):nf(t).Ho()&&_S(t,e))}function Tm(n,e){const t=de(n),r=nf(t);t.D_.delete(e),r.Ho()&&w$(t,e),0===t.D_.size&&(r.Ho()?r.Zo():nu(t)&&t.M_.set("Unknown"))}function _S(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nf(n).u_(e)}function w$(n,e){n.x_.Oe(e),nf(n).c_(e)}function yS(n){n.x_=new hne({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),nf(n).start(),n.M_.g_()}function vS(n){return nu(n)&&!nf(n).jo()&&n.D_.size>0}function nu(n){return 0===de(n).C_.size}function I$(n){n.x_=void 0}function pre(n){return ES.apply(this,arguments)}function ES(){return ES=(0,Pe.Z)(function*(n){n.D_.forEach((e,t)=>{_S(n,e)})}),ES.apply(this,arguments)}function gre(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,Pe.Z)(function*(n,e){I$(n),vS(n)?(n.M_.w_(e),yS(n)):n.M_.set("Unknown")}),wS.apply(this,arguments)}function mre(n,e,t){return IS.apply(this,arguments)}function IS(){return IS=(0,Pe.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof _U&&2===e.state&&e.cause)try{yield(r=(0,Pe.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.D_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.D_.delete(l),s.x_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sw(n,r)}else if(e instanceof dw?n.x_.$e(e):e instanceof mU?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(ke.min()))try{const r=yield c$(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.D_.get(u);d&&s.D_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.D_.get(l);if(!d)return;s.D_.set(l,d.withResumeToken(Sr.EMPTY_BYTE_STRING,d.snapshotVersion)),w$(s,l);const f=new Za(d.target,l,u,d.sequenceNumber);_S(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){re("RemoteStore","Failed to raise snapshot:",r),yield Sw(n,r)}var r}),IS.apply(this,arguments)}function Sw(n,e,t){return TS.apply(this,arguments)}function TS(){return TS=(0,Pe.Z)(function*(n,e,t){if(!Wl(e))throw e;n.C_.add(1),yield ef(n),n.M_.set("Offline"),t||(t=()=>c$(n.localStore)),n.asyncQueue.enqueueRetryable((0,Pe.Z)(function*(){re("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Im(n)}))}),TS.apply(this,arguments)}function T$(n,e){return e().catch(t=>Sw(n,t,e))}function tf(n){return CS.apply(this,arguments)}function CS(){return CS=(0,Pe.Z)(function*(n){const e=de(n),t=ru(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;_re(e);)try{const i=yield tre(e.localStore,r);if(null===i){0===e.b_.length&&t.Zo();break}r=i.batchId,yre(e,i)}catch(i){yield Sw(e,i)}C$(e)&&b$(e)}),CS.apply(this,arguments)}function _re(n){return nu(n)&&n.b_.length<10}function yre(n,e){n.b_.push(e);const t=ru(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function C$(n){return nu(n)&&!ru(n).jo()&&n.b_.length>0}function b$(n){ru(n).start()}function vre(n){return bS.apply(this,arguments)}function bS(){return bS=(0,Pe.Z)(function*(n){ru(n).E_()}),bS.apply(this,arguments)}function Ere(n){return AS.apply(this,arguments)}function AS(){return AS=(0,Pe.Z)(function*(n){const e=ru(n);for(const t of n.b_)e.P_(t.mutations)}),AS.apply(this,arguments)}function wre(n,e,t){return DS.apply(this,arguments)}function DS(){return DS=(0,Pe.Z)(function*(n,e,t){const r=n.b_.shift(),i=LD.from(r,e,t);yield T$(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield tf(n)}),DS.apply(this,arguments)}function Ire(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,Pe.Z)(function*(n,e){var t;e&&ru(n).h_&&(yield(t=(0,Pe.Z)(function*(i,s){if(function dU(n){switch(n){default:return be();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}(a=s.code)&&a!==H.ABORTED){const o=i.b_.shift();ru(i).Yo(),yield T$(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield tf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),C$(n)&&b$(n)}),SS.apply(this,arguments)}function A$(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,Pe.Z)(function*(n,e){const t=de(n);t.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=nu(t);t.C_.add(3),yield ef(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Im(t)}),RS.apply(this,arguments)}function xS(){return xS=(0,Pe.Z)(function*(n,e){const t=de(n);e?(t.C_.delete(2),yield Im(t)):e||(t.C_.add(2),yield ef(t),t.M_.set("Unknown"))}),xS.apply(this,arguments)}function nf(n){return n.O_||(n.O_=function(t,r,i){const s=de(t);return s.A_(),new lre(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{ho:pre.bind(null,n),Io:gre.bind(null,n),a_:mre.bind(null,n)}),n.v_.push(function(){var e=(0,Pe.Z)(function*(t){t?(n.O_.Yo(),vS(n)?yS(n):n.M_.set("Unknown")):(yield n.O_.stop(),I$(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function ru(n){return n.N_||(n.N_=function(t,r,i){const s=de(t);return s.A_(),new ure(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{ho:vre.bind(null,n),Io:Ire.bind(null,n),T_:Ere.bind(null,n),I_:wre.bind(null,n)}),n.v_.push(function(){var e=(0,Pe.Z)(function*(t){t?(n.N_.Yo(),yield tf(n)):(yield n.N_.stop(),n.b_.length>0&&(re("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class MS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new MS(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ie(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rf(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Wl(n))return new ie(H.UNAVAILABLE,`${e}: ${n}`);throw n}class sf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=im(),this.sortedSet=new hn(this.comparator)}static emptySet(e){return new sf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class D${constructor(){this.B_=new hn(he.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):be():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class af{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new af(e,t,sf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Tre{constructor(){this.k_=void 0,this.listeners=[]}}class Cre{constructor(){this.queries=new Ka(e=>GB(e),nm),this.onlineState="Unknown",this.q_=new Set}}function kS(){return kS=(0,Pe.Z)(function*(n,e){const t=de(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Tre),i)try{s.k_=yield t.onListen(r)}catch(o){const a=rf(o,`Initialization of query '${$h(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&LS(t)}),kS.apply(this,arguments)}function FS(){return FS=(0,Pe.Z)(function*(n,e){const t=de(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),FS.apply(this,arguments)}function bre(n,e){const t=de(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&LS(t)}function Are(n,e,t){const r=de(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function LS(n){n.q_.forEach(e=>{e.next()})}class VS{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new af(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=af.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class P${constructor(e){this.key=e}}class x${constructor(e){this.key=e}}class M${constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=at(),this.mutatedKeys=at(),this._a=KB(e),this.aa=new sf(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new D$,i=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),_=rm(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;m&&_?m.data.isEqual(_.data)?v!==T&&(r.track({type:3,doc:_}),A=!0):this.ha(m,_)||(r.track({type:2,doc:_}),A=!0,(l&&this._a(_,l)>0||u&&this._a(_,u)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),A=!0):m&&!_&&(r.track({type:1,doc:m}),A=!0,(l||u)&&(a=!0)),A&&(_?(o=o.add(_),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const d="F"===this.query.limitType?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((u,d)=>function(m,_){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return v(m)-v(_)}(u.type,d.type)||this._a(u.doc,d.doc)),this.Pa(r);const o=t?this.Ia():[],a=0===this.oa.size&&this.current?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new af(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new D$,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=at(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new x$(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new P$(r))}),t}da(e){this.ia=e.ls,this.oa=at();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return af.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Rre{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Pre{constructor(e){this.key=e,this.Ra=!1}}class xre{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ka(a=>GB(a),nm),this.fa=new Map,this.ga=new Set,this.pa=new hn(he.comparator),this.ya=new Map,this.wa=new XD,this.Sa={},this.ba=new Map,this.Da=Tc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Mre(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,Pe.Z)(function*(n,e){const t=function lR(n){const e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$re.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ore.bind(null,e),e.Va.a_=bre.bind(null,e.eventManager),e.Va.Fa=Are.bind(null,e.eventManager),e}(n);let r,i;const s=t.ma.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield function Xh(n,e){const t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.qr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):t.qr.allocateTargetId(r).next(o=>(i=new Za(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}(t.localStore,Li(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function US(n,e,t,r,i){return $S.apply(this,arguments)}(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&Dw(t.remoteStore,o)}return i}),BS.apply(this,arguments)}function $S(){return $S=(0,Pe.Z)(function*(n,e,t,r,i){n.va=(f,m,_)=>{return(v=(0,Pe.Z)(function*(A,M,F,P){let V=M.view.ca(F);V.Zi&&(V=yield Iw(A.localStore,M.query,!1).then(({documents:Oe})=>M.view.ca(Oe,V)));const oe=P&&P.targetChanges.get(M.targetId),le=M.view.applyChanges(V,A.isPrimaryClient,oe);return YS(A,M.targetId,le.Ta),le.snapshot}),function T(A,M,F,P){return v.apply(this,arguments)})(n,f,m,_);var v};const s=yield Iw(n.localStore,e,!0),o=new M$(e,s.ls),a=o.ca(s.documents),l=cm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,l);YS(n,t,u.Ta);const d=new Rre(e,t,o);return n.ma.set(e,d),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),u.snapshot}),$S.apply(this,arguments)}function Nre(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,Pe.Z)(function*(n,e){const t=de(n),r=t.ma.get(e),i=t.fa.get(r.targetId);if(i.length>1)return t.fa.set(r.targetId,i.filter(s=>!nm(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Tm(t.remoteStore,r.targetId),lf(t,r.targetId)}).catch(zl))):(lf(t,r.targetId),yield Jh(t.localStore,r.targetId,!0))}),jS.apply(this,arguments)}function HS(){return HS=(0,Pe.Z)(function*(n,e,t){const r=function uR(n){const e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lre.bind(null,e),e}(n);try{const i=yield function(o,a){const l=de(o),u=Vn.now(),d=a.reduce((_,v)=>_.add(v.key),at());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=as(),T=at();return l.ss.getEntries(_,d).next(A=>{v=A,v.forEach((M,F)=>{F.isValidDocument()||(T=T.add(M))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,v)).next(A=>{f=A;const M=[];for(const F of a){const P=lne(F,f.get(F.key).overlayedDocument);null!=P&&M.push(new Qa(F.key,P,xB(P.value.mapValue),Pn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,M,a)}).next(A=>{m=A;const M=A.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(_,A.batchId,M)})}).then(()=>({batchId:m.batchId,changes:ZB(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new hn(Ze)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Ya(r,i.changes),yield tf(r.remoteStore)}catch(i){const s=rf(i,"Failed to persist write");t.reject(s)}}),HS.apply(this,arguments)}function N$(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,Pe.Z)(function*(n,e){const t=de(n);try{const r=yield function ere(n,e){const t=de(n),r=e.snapshotVersion;let i=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});i=t.ts;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(t.qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.qr.addMatchingKeys(s,d.addedDocuments,f)));let _=m.withSequenceNumber(s.currentSequenceNumber);var T,A,M;null!==e.targetMismatches.get(f)?_=_.withResumeToken(Sr.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),A=_,M=d,(0===(T=m).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0)&&a.push(t.qr.updateTargetData(s,_))});let l=as(),u=at();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(function d$(n,e,t){let r=at(),i=at();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=as();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ke.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||0===l.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:i}})}(s,o,e.documentUpdates).next(d=>{l=d.us,u=d.cs})),!r.isEqual(ke.min())){const d=t.qr.getLastRemoteSnapshotVersion(s).next(f=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.ts=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.ya.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?xe(o.Ra):i.removedDocuments.size>0&&(xe(o.Ra),o.Ra=!1))}),yield Ya(t,r,e)}catch(r){yield zl(r)}}),zS.apply(this,arguments)}function k$(n,e,t){const r=de(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(const m of f.listeners)m.Q_(a)&&(u=!0)}),u&&LS(l)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ore(n,e,t){return WS.apply(this,arguments)}function WS(){return WS=(0,Pe.Z)(function*(n,e,t){const r=de(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new hn(he.comparator);o=o.insert(s,Tn.newNoDocument(s,ke.min()));const a=at().add(s),l=new um(ke.min(),new Map,new hn(Ze),o,a);yield N$(r,l),r.pa=r.pa.remove(s),r.ya.delete(e),XS(r)}else yield Jh(r.localStore,e,!1).then(()=>lf(r,e,t)).catch(zl)}),WS.apply(this,arguments)}function Fre(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,Pe.Z)(function*(n,e){const t=de(n),r=e.batch.batchId;try{const i=yield function Jne(n,e){const t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const f=u.batch,m=f.keys();let _=L.resolve();return m.forEach(v=>{_=_.next(()=>d.getEntry(l,v)).next(T=>{const A=u.docVersions.get(v);xe(null!==A),T.version.compareTo(A)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),d.addEntry(T)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=at();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);ZS(t,r,null),QS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ya(t,i)}catch(i){yield zl(i)}}),GS.apply(this,arguments)}function Lre(n,e,t){return qS.apply(this,arguments)}function qS(){return qS=(0,Pe.Z)(function*(n,e,t){const r=de(n);try{const i=yield function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(xe(null!==f),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);ZS(r,e,t),QS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ya(r,i)}catch(i){yield zl(i)}}),qS.apply(this,arguments)}function QS(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function ZS(n,e,t){const r=de(n);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function lf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||O$(n,r)})}function O$(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(Tm(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),XS(n))}function YS(n,e,t){for(const r of t)r instanceof P$?(n.wa.addReference(r.key,e),Bre(n,r)):r instanceof x$?(re("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||O$(n,r.key)):be()}function Bre(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(re("SyncEngine","New document in limbo: "+t),n.ga.add(r),XS(n))}function XS(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new he(xt.fromString(e)),r=n.Da.next();n.ya.set(r,new Pre(t)),n.pa=n.pa.insert(t,r),Dw(n.remoteStore,new Za(Li(Bh(t.path)),r,"TargetPurposeLimboResolution",Rs._e))}}function Ya(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,Pe.Z)(function*(n,e,t){const r=de(n),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const d=rS.Qi(l.targetId,u);s.push(d)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,Pe.Z)(function*(u,d){const f=de(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(d,_=>L.forEach(_.ki,v=>f.persistence.referenceDelegate.addReference(m,_.targetId,v)).next(()=>L.forEach(_.qi,v=>f.persistence.referenceDelegate.removeReference(m,_.targetId,v)))))}catch(m){if(!Wl(m))throw m;re("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const _=m.targetId;if(!m.fromCache){const v=f.ts.get(_),A=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);f.ts=f.ts.insert(_,A)}}}),function l(u,d){return a.apply(this,arguments)})(r.localStore,s))}),JS.apply(this,arguments)}function Ure(n,e){return eR.apply(this,arguments)}function eR(){return eR=(0,Pe.Z)(function*(n,e){const t=de(n);if(!t.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=yield u$(t.localStore,e);t.currentUser=e,(s=t).ba.forEach(a=>{a.forEach(l=>{l.reject(new ie(H.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ya(t,r._s)}var s}),eR.apply(this,arguments)}function $re(n,e){const t=de(n),r=t.ya.get(e);if(r&&r.Ra)return at().add(r.key);{let i=at();const s=t.fa.get(e);if(!s)return i;for(const o of s){const a=t.ma.get(o);i=i.unionWith(a.view.ua)}return i}}class Rw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Pe.Z)(function*(){t.serializer=wm(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function l$(n,e,t,r){return new Xne(n,e,t,r)}(this.persistence,new a$,e.initialUser,this.serializer)}createPersistence(e){return new JD(vw.jr,this.serializer)}createSharedClientState(e){return new _$}terminate(){var e=this;return(0,Pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uf{initialize(e,t){var r=this;return(0,Pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>k$(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ure.bind(null,r.syncEngine),yield function PS(n,e){return xS.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cre}createDatastore(e){const t=wm(e.databaseInfo.databaseId),r=new are(e.databaseInfo);return new cre(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>k$(this.syncEngine,t,0),a=y$.D()?new y$:new ire,new fre(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,u,d){const f=new xre(i,s,o,a,l,u);return d&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Pe.Z)(function*(r){const i=de(r);re("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield ef(i),i.F_.shutdown(),i.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class Pw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class eie{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Lr.UNAUTHENTICATED,this.clientId=lB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Pe.Z)(function*(a){re("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(H.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Pe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=rf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xw(n,e){return cR.apply(this,arguments)}function cR(){return cR=(0,Pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Pe.Z)(function*(s){r.isEqual(s)||(yield u$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),cR.apply(this,arguments)}function dR(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,Pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function fR(n){return pR.apply(this,arguments)}(n);re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>A$(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>A$(e.remoteStore,s)),n._onlineComponents=e}),hR.apply(this,arguments)}function pR(){return pR=(0,Pe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function $$(n){return"FirebaseError"===n.name?n.code===H.FAILED_PRECONDITION||n.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Ds("Error using user provided cache. Falling back to memory cache: "+t),yield xw(n,new Rw)}}else re("FirestoreClient","Using default OfflineComponentProvider"),yield xw(n,new Rw);return n._offlineComponents}),pR.apply(this,arguments)}function Mw(n){return gR.apply(this,arguments)}function gR(){return gR=(0,Pe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),yield dR(n,n._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),yield dR(n,new uf))),n._onlineComponents}),gR.apply(this,arguments)}function df(n){return _R.apply(this,arguments)}function _R(){return _R=(0,Pe.Z)(function*(n){const e=yield Mw(n),t=e.eventManager;return t.onListen=Mre.bind(null,e.syncEngine),t.onUnlisten=Nre.bind(null,e.syncEngine),t}),_R.apply(this,arguments)}function q$(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const K$=new Map;function yR(n,e,t){if(!t)throw new ie(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Q$(n){if(!he.isDocumentKey(n))throw new ie(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Z$(n){if(he.isDocumentKey(n))throw new ie(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nw(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":be()}function St(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nw(n);throw new ie(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class X${constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ie(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ie(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function die(n,e,t,r){if(!0===e&&!0===r)throw new ie(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=q$(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ie(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ie(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X$(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new ate;switch(r.type){case"firstParty":return new dte(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=K$.get(t);r&&(re("ComponentProvider","Removing Datastore"),K$.delete(t),r.terminate())}(this),Promise.resolve()}}class Jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class ia extends Jr{constructor(e,t,r){super(e,t,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new he(e))}withConverter(e){return new ia(this.firestore,e,this._path)}}function fie(n,e,...t){if(n=(0,D.m9)(n),yR("collection","path",e),n instanceof Cm){const r=xt.fromString(e,...t);return Z$(r),new ia(n,null,r)}{if(!(n instanceof ar||n instanceof ia))throw new ie(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return Z$(r),new ia(n.firestore,null,r)}}class gie{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new fS(this,"async_queue_retry"),this.iu=()=>{const t=Aw();t&&re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=Aw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Aw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Dr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Pe.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Wl(t))throw t;re("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,sr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const i=MS.createAndSchedule(this,e,t,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&be()}verifyOperationInProgress(){}uu(){var e=this;return(0,Pe.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function vR(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class fn extends Cm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gie,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ej(this),this._firestoreClient.terminate()}}function lr(n){return n._firestoreClient||ej(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ej(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $te(n._databaseId,l,n._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,q$(d.experimentalLongPollingOptions),d.useFetchStreams));var l,d;n._firestoreClient=new eie(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(Sr.fromBase64String(e))}catch(t){throw new ie(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ie(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rj{constructor(e){this._methodName=e}}class ER{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}const vie=/^__.*__$/;class Eie{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new zh(e,this.data,t,this.fieldTransforms)}}function sj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class kw{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new kw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Fw(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(sj(this.Iu)&&vie.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class wie{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wm(e)}pu(e,t,r,i=!1){return new kw({Iu:e,methodName:t,gu:r,path:Rn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ff(n){const e=n._freezeSettings(),t=wm(n._databaseId);return new wie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wR(n,e,t,r,i,s={}){const o=n.pu(s.merge||s.mergeFields?2:0,e,t,i);TR("Data must be an object, but it was:",o,r);const a=cj(r,o);let l,u;if(s.merge)l=new os(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=Dm(e,f,t);if(!o.contains(m))throw new ie(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hj(d,m)||d.push(m)}l=new os(d),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new Eie(new Xr(a),l,u)}function Ac(n,e){if(dj(n=(0,D.m9)(n)))return TR("Unsupported field value:",e,n),cj(n,e);if(n instanceof rj)return function(r,i){if(!sj(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ac(a,i.Vu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,D.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return eU(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Vn.fromDate(r);return{timestampValue:Gh(i.serializer,s)}}if(r instanceof Vn){const s=new Vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gh(i.serializer,s)}}if(r instanceof ER)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bc)return{bytesValue:wU(i.serializer,r._byteString)};if(r instanceof ar){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$D(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Nw(r)}`)}(n,e)}function cj(n,e){const t={};return IB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,i)=>{const s=Ac(i,e.Eu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function dj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof ER||n instanceof bc||n instanceof ar||n instanceof rj)}function TR(n,e,t){if(!dj(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Nw(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var i}function Dm(n,e,t){if((e=(0,D.m9)(e))instanceof hf)return e._internalPath;if("string"==typeof e)return Ow(n,e);throw Fw("Field path arguments must be of type string or ",n,!1,void 0,t)}const bie=new RegExp("[~\\*/\\[\\]]");function Ow(n,e,t){if(e.search(bie)>=0)throw Fw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hf(...e.split("."))._internalPath}catch{throw Fw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fw(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ie(H.INVALID_ARGUMENT,a+n+l)}function hj(n,e){return n.some(t=>t.isEqual(e))}class CR{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Aie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Aie extends CR{data(){return super.data()}}function Lw(n,e){return"string"==typeof e?Ow(n,e):e instanceof hf?e._internalPath:e._delegate._internalPath}class Sie{convertValue(e,t="none"){switch(Ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ER(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ew(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zg(e));default:return null}}convertTimestamp(e){const t=ql(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xt.fromString(e);xe(xU(r));const i=new fc(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gf extends CR{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $w(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Lw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $w extends gf{data(e={}){return super.data(e)}}class mf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Dc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $w(this._firestore,this._userDataWriter,r.key,r,new Dc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new $w(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Dc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new $w(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Dc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Pie(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Pie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}class iu extends Sie{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function xie(n,e){const t=St(n.firestore,fn),r=function pie(n,e,...t){if(n=(0,D.m9)(n),1===arguments.length&&(e=lB.newId()),yR("doc","path",e),n instanceof Cm){const r=xt.fromString(e,...t);return Q$(r),new ar(n,null,new he(r))}{if(!(n instanceof ar||n instanceof ia))throw new ie(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return Q$(r),new ar(n.firestore,n instanceof ia?n.converter:null,new he(r))}}(n),i=function AR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return function Rm(n,e){return function(r,i){const s=new Dr;return r.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function kre(n,e,t){return HS.apply(this,arguments)}(yield function mR(n){return Mw(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(lr(n),e)}(t,[wR(ff(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}!function(e,t=!0){xh=Ar.SDK_VERSION,(0,Ar._registerComponent)(new Ul.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new fn(new ute(r.getProvider("auth-internal")),new hte(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ie(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Ar.registerVersion)(sB,"4.3.2",e),(0,Ar.registerVersion)(sB,"4.3.2","esm2017")}();var zw=function(){return zw=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},zw.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var Wie={includeMetadataChanges:!1};function PR(n,e){return void 0===e&&(e=Wie),new qe(function(t){var r=function Mie(n,...e){var t,r,i;n=(0,D.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||vR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(vR(e[o])){const f=e[o];e[o]=null===(t=f.next)||void 0===t?void 0:t.bind(f),e[o+1]=null===(r=f.error)||void 0===r?void 0:r.bind(f),e[o+2]=null===(i=f.complete)||void 0===i?void 0:i.bind(f)}let l,u,d;if(n instanceof ar)u=St(n.firestore,fn),d=Bh(n._key.path),l={next:f=>{e[o]&&e[o](function DR(n,e,t){const r=t.docs.get(e._key),i=new iu(n);return new gf(n,i,e._key,r,new Dc(t.hasPendingWrites,t.fromCache),e.converter)}(u,n,f))},error:e[o+1],complete:e[o+2]};else{const f=St(n,Jr);u=St(f.firestore,fn),d=f._query;const m=new iu(u);l={next:_=>{e[o]&&e[o](new mf(u,m,f,_))},error:e[o+1],complete:e[o+2]},function fj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ie(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(m,_,v,T){const A=new Pw(T),M=new VS(_,A,v);return m.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function NS(n,e){return kS.apply(this,arguments)}(yield df(m),M)})),()=>{A.Na(),m.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function OS(n,e){return FS.apply(this,arguments)}(yield df(m),M)}))}}(lr(u),d,a,l)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Xie(n,e){return void 0===e&&(e={}),function Yie(n){return PR(n,{includeMetadataChanges:!0}).pipe(ue(function(e){return e.docs}))}(n).pipe(ue(function(t){return t.map(function(r){return function Ij(n,e){var t;void 0===e&&(e={});var r=n.data(e);return n.exists()&&"object"==typeof r&&null!==r&&e.idField?zw(zw({},r),((t={})[e.idField]=n.id,t)):r}(r,e)})}))}class Ww{constructor(e){return e}}const Aj="firestore",NR=new me("angularfire2.firestore-instances");function nse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ww(r)}}const rse={provide:class ese{constructor(){return DA(Aj)}},deps:[[new di,NR]]},ise={provide:Ww,useFactory:function tse(n,e){const t=function VV(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(Aj,n,e);return t&&new Ww(t)},deps:[[new di,NR],Tg]};let sse=(()=>{class n{constructor(){(0,Ar.registerVersion)("angularfire",EE.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vn({type:n});static \u0275inj=Jn({providers:[ise,rse]})}return n})();function ose(n,...e){return{ngModule:sse,providers:[{provide:NR,useFactory:nse(n),multi:!0,deps:[Vt,fi,wE,UV,[new di,jV],[new di,SA],...e]}]}}const ase=IE(Xie,!0),lse=IE(xie,!0),Dj=IE(fie,!0);let kR=(()=>{class n{constructor(t){this.firestore=t}obterTransacoes(){const t=Dj(this.firestore,"transacoes");return ase(t)}novaTransacao(t){const r=Dj(this.firestore,"transacoes");return w(lse(r,t)).pipe(ue(i=>{const s=i.id;return{...t,idTransacao:s}}),$a(i=>{throw console.error("Erro ao adicionar transa\xe7\xe3o:",i),i}))}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Ww))};static#t=this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function use(n,e){if(1&n&&(Re(0,"div",4)(1,"span"),Qe(2),Le(),Re(3,"span",5),Qe(4),Le(),Re(5,"span"),Qe(6),Le(),Re(7,"span"),Qe(8),Le(),Re(9,"span",6),Qe(10),T0(11,"number"),Le(),Re(12,"span",7),Qe(13,"Default"),Le()()),2&n){const t=e.$implicit;jt(2),Fp(t.nomeTransacao),jt(2),go("","S"===t.tipoCompra?"Sa\xedda":"Entrada"," "),jt(2),Fp("Pg"===t.status?"Pago":"Pendente"),jt(2),Fp("V"===t.formaPagamento?"\xc0 vista":"Cr\xe9dito"),jt(2),go("R$ ",C0(11,5,t.valor)," ")}}function cse(n,e){if(1&n&&(Re(0,"div"),gi(1,use,14,7,"div",3),T0(2,"async"),Le()),2&n){const t=ts();jt(1),On("ngForOf",C0(2,1,t.transacoes))}}function dse(n,e){1&n&&(Re(0,"span",8),Qe(1,"N\xe3o h\xe1 transa\xe7\xf5es"),Le())}let hse=(()=>{class n{constructor(t){this.transacoesService=t,this.qtdTransacoes=[]}ngOnInit(){this.transacoes=this.transacoesService.obterTransacoes(),this.verificaQtdTransacoes()}verificaQtdTransacoes(){return this.transacoesService.obterTransacoes().subscribe(t=>{this.qtdTransacoes=t}),this.qtdTransacoes}static#e=this.\u0275fac=function(r){return new(r||n)(X(kR))};static#t=this.\u0275cmp=ai({type:n,selectors:[["app-card-transacoes"]],decls:14,vars:2,consts:[[1,"cabecalho-card-transacoes"],[4,"ngIf","ngIfElse"],["semTransacoes",""],["class","card-transacoes transacoes",4,"ngFor","ngForOf"],[1,"card-transacoes","transacoes"],[1,"bg-green-900","text-green-300","text-xs","font-medium","me-2","px-2.5","py-0.5","rounded"],[1,"bg-blue-100","text-blue-800","text-xs","font-medium","me-2","px-2.5","py-0.5","rounded"],[1,"bg-gray-700","text-blue-400","text-xs","font-medium","me-2","px-2.5","py-0.5","rounded"],["id","descSemTransacao"]],template:function(r,i){if(1&r&&(Re(0,"div",0)(1,"span"),Qe(2,"Compra"),Le(),Re(3,"span"),Qe(4,"Tipo Compra"),Le(),Re(5,"span"),Qe(6,"Status"),Le(),Re(7,"span"),Qe(8,"Forma pagamento"),Le(),Re(9,"span"),Qe(10,"Valor R$"),Le()(),gi(11,cse,3,3,"div",1),gi(12,dse,2,0,"ng-template",null,2,QO)),2&r){const s=function rk(n){return fl(function sM(){return Ke.lFrame.contextLView}(),nn+n)}(13);jt(11),On("ngIf",i.qtdTransacoes.length)("ngIfElse",s)}},dependencies:[oF,Tv,cF,hF],styles:[".cabecalho-card-transacoes[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:var(--background-secondary);padding:1rem;font-family:Roboto;color:#b1b1b1;border-radius:10px;margin-bottom:.5rem}.card-transacoes[_ngcontent-%COMP%]{display:flex;background-color:var(--background-secondary);padding:1rem;border-radius:10px;margin-bottom:2px}.card-transacoes[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;font-family:Roboto;color:#b1b1b1;font-size:10pt}.transacoes[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d5d5d5}.transacoes[_ngcontent-%COMP%]:hover{background-color:#2e354866;cursor:pointer}#descSemTransacao[_ngcontent-%COMP%]{font-size:17pt;color:#fff;text-align:center;margin-top:2rem}@media (max-width: 450px){.cabecalho-card-transacoes[_ngcontent-%COMP%]{width:100%;margin-top:12rem}.cabecalho-card-transacoes[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;font-size:7.7pt}}"]})}return n})(),Sj=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(X(Pa),X(Ji))},n.\u0275dir=He({type:n}),n})(),Sc=(()=>{class n extends Sj{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mr(n)))(r||n)}}(),n.\u0275dir=He({type:n,features:[Qt]}),n})();const Co=new me("NgValueAccessor"),gse={provide:Co,useExisting:ye(()=>Gw),multi:!0},_se=new me("CompositionEventMode");let Gw=(()=>{class n extends Sj{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mse(){const n=La()?La().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(X(Pa),X(Ji),X(_se,8))},n.\u0275dir=He({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&nr("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[wn([gse]),Qt]}),n})();const yse=!1;function su(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Pj(n){return null!=n&&"number"==typeof n.length}const ei=new me("NgValidators"),ou=new me("NgAsyncValidators"),vse=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Pm{static min(e){return function xj(n){return e=>{if(su(e.value)||su(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Mj(n){return e=>{if(su(e.value)||su(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Nj(e)}static requiredTrue(e){return function kj(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Oj(n){return su(n.value)||vse.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Fj(n){return e=>su(e.value)||!Pj(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Lj(n){return e=>Pj(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return Vj(e)}static nullValidator(e){return null}static compose(e){return zj(e)}static composeAsync(e){return Wj(e)}}function Nj(n){return su(n.value)?{required:!0}:null}function Vj(n){if(!n)return qw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(su(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function qw(n){return null}function Bj(n){return null!=n}function Uj(n){const e=kp(n)?w(n):n;if(yse&&!l0(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new S(-1101,t)}return e}function $j(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jj(n,e){return e.map(t=>t(n))}function Hj(n){return n.map(e=>function Ese(n){return!n.validate}(e)?e:t=>e.validate(t))}function zj(n){if(!n)return null;const e=n.filter(Bj);return 0==e.length?null:function(t){return $j(jj(t,e))}}function OR(n){return null!=n?zj(Hj(n)):null}function Wj(n){if(!n)return null;const e=n.filter(Bj);return 0==e.length?null:function(t){return function fse(...n){const e=ji(n),{args:t,keys:r}=zF(n),i=new qe(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,u=o;for(let d=0;d<o;d++){let f=!1;ft(t[d]).subscribe(ce(s,m=>{f||(f=!0,u--),a[d]=m},()=>l--,void 0,()=>{(!l||!f)&&(u||s.next(r?WF(r,a):a),s.complete())}))}});return e?i.pipe(bb(e)):i}(jj(t,e).map(Uj)).pipe(ue($j))}}function FR(n){return null!=n?Wj(Hj(n)):null}function Gj(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qj(n){return n._rawValidators}function Kj(n){return n._rawAsyncValidators}function LR(n){return n?Array.isArray(n)?n:[n]:[]}function Kw(n,e){return Array.isArray(n)?n.includes(e):n===e}function Qj(n,e){const t=LR(e);return LR(n).forEach(i=>{Kw(t,i)||t.push(i)}),t}function Zj(n,e){return LR(e).filter(t=>!Kw(n,t))}class Yj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vi extends Yj{get formDirective(){return null}get path(){return null}}class au extends Yj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xj{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jj=(()=>{class n extends Xj{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(X(au,2))},n.\u0275dir=He({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Zy("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Qt]}),n})(),eH=(()=>{class n extends Xj{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(X(Vi,10))},n.\u0275dir=He({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Zy("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Qt]}),n})();function tH(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const UR=!1,xm="VALID",Zw="INVALID",_f="PENDING",Mm="DISABLED";function $R(n){return(Yw(n)?n.validators:n)||null}function jR(n,e){return(Yw(e)?e.asyncValidators:n)||null}function Yw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function nH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,UR?function Cse(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new S(1001,UR?function bse(n,e){return`Cannot find form control ${tH(n,e)}`}(e,t):"")}function rH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new S(1002,UR?function Ase(n,e){return`Must supply a value for form control ${tH(n,e)}`}(e,i):"")})}class Xw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xm}get invalid(){return this.status===Zw}get pending(){return this.status==_f}get disabled(){return this.status===Mm}get enabled(){return this.status!==Mm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Qj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Qj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zj(e,this._rawAsyncValidators))}hasValidator(e){return Kw(this._rawValidators,e)}hasAsyncValidator(e){return Kw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_f,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xm||this.status===_f)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mm:xm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_f,this._hasOwnPendingAsyncValidator=!0;const t=Uj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Gn,this.statusChanges=new Gn}_calculateStatus(){return this._allControlsDisabled()?Mm:this.errors?Zw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_f)?_f:this._anyControlsHaveStatus(Zw)?Zw:xm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Dse(n){return Array.isArray(n)?OR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Sse(n){return Array.isArray(n)?FR(n):n||null}(this._rawAsyncValidators)}}class Nm extends Xw{constructor(e,t,r){super($R(t),jR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rH(this,!0,e),Object.keys(e).forEach(r=>{nH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class iH extends Nm{}const Rc=new me("CallSetDisabledState",{providedIn:"root",factory:()=>km}),km="always";function Om(n,e,t=km){HR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Pse(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sH(n,e)})}(n,e),function Mse(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xse(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Rse(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function eI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),nI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function tI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HR(n,e){const t=qj(n);null!==e.validator?n.setValidators(Gj(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Kj(n);null!==e.asyncValidator?n.setAsyncValidators(Gj(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();tI(e._rawValidators,i),tI(e._rawAsyncValidators,i)}function nI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=qj(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Kj(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return tI(e._rawValidators,r),tI(e._rawAsyncValidators,r),t}function sH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function uH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yf=class extends Xw{constructor(e=null,t,r){super($R(t),jR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=uH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){uH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let pH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=He({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),mH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({}),n})();const KR=new me("NgModelWithFormControlWarning"),Gse={provide:Vi,useExisting:ye(()=>rI)};let rI=(()=>{class n extends Vi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Gn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(nI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Om(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){eI(t.control||null,t,!1),function Fse(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function aH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(eI(r||null,t),(n=>n instanceof yf)(i)&&(Om(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function oH(n,e){HR(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Nse(n,e){return nI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){HR(this.form,this),this._oldForm&&nI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(X(ei,10),X(ou,10),X(Rc,8))},n.\u0275dir=He({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&nr("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[wn([Gse]),Qt,qi]}),n})();const Qse={provide:au,useExisting:ye(()=>YR)};let YR=(()=>{class n extends au{set isDisabled(t){}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new Gn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function GR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Gw?t=s:function Ose(n){return Object.getPrototypeOf(n.constructor)===Sc}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function WR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Jw(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(X(Vi,13),X(ei,10),X(ou,10),X(Co,10),X(KR,8))},n.\u0275dir=He({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[wn([Qse]),Qt,qi]}),n})();const Zse={provide:Co,useExisting:ye(()=>iI),multi:!0};function wH(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let iI=(()=>{class n extends Sc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=wH(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Yse(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mr(n)))(r||n)}}(),n.\u0275dir=He({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&nr("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[wn([Zse]),Qt]}),n})(),IH=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(wH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(X(Ji),X(Pa),X(iI,9))},n.\u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Xse={provide:Co,useExisting:ye(()=>XR),multi:!0};function TH(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let XR=(()=>{class n extends Sc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);i.push(u)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Jse(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mr(n)))(r||n)}}(),n.\u0275dir=He({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&nr("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[wn([Xse]),Qt]}),n})(),CH=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(TH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(TH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(X(Ji),X(Pa),X(XR,9))},n.\u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Pc=(()=>{class n{constructor(){this._validator=qw}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qw,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=He({type:n,features:[qi]}),n})();const noe={provide:ei,useExisting:ye(()=>sI),multi:!0};let sI=(()=>{class n extends Pc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=oh,this.createValidator=t=>Nj}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mr(n)))(r||n)}}(),n.\u0275dir=He({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&es("required",r._enabled?"":null)},inputs:{required:"required"},features:[wn([noe]),Qt]}),n})();const aoe={provide:ei,useExisting:ye(()=>JR),multi:!0};let JR=(()=>{class n extends Pc{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>Vj(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=mr(n)))(r||n)}}(),n.\u0275dir=He({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&es("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[wn([aoe]),Qt]}),n})(),NH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({imports:[mH]}),n})();class kH extends Xw{constructor(e,t,r){super($R(t),jR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){rH(this,!1,e),e.forEach((r,i)=>{nH(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function OH(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let loe=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return OH(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Nm(i,s)}record(t,r=null){const i=this._reduceControls(t);return new iH(i,r)}control(t,r,i){let s={};return this.useNonNullable?(OH(r)?s=r:(s.validators=r,s.asyncValidators=i),new yf(t,{...s,nonNullable:!0})):new yf(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new kH(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof yf||t instanceof Xw?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rc,useValue:t.callSetDisabledState??km}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({imports:[NH]}),n})(),uoe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rc,useValue:t.callSetDisabledState??km}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({imports:[NH]}),n})();class LH{}class coe{}const Xa="*";function doe(n,e){return{type:7,name:n,definitions:e,options:{}}}function VH(n,e=null){return{type:4,styles:e,timings:n}}function BH(n,e=null){return{type:2,steps:n,options:e}}function Lm(n){return{type:6,styles:n,offset:null}}function eP(n,e,t){return{type:0,name:n,styles:e,options:t}}function UH(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function $H(n){Promise.resolve().then(n)}class Vm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$H(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jH{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?$H(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const tP="!",HH=["toast-component",""];function hoe(n,e){if(1&n){const t=a0();Re(0,"button",5),nr("click",function(){return Zf(t),pl(ts().remove())}),Re(1,"span",6),Qe(2,"\xd7"),Le()()}}function foe(n,e){if(1&n&&(Mp(0),Qe(1),Np()),2&n){const t=ts(2);jt(1),go("[",t.duplicatesCount+1,"]")}}function poe(n,e){if(1&n&&(Re(0,"div"),Qe(1),gi(2,foe,2,1,"ng-container",4),Le()),2&n){const t=ts();Na(t.options.titleClass),es("aria-label",t.title),jt(1),go(" ",t.title," "),jt(1),On("ngIf",t.duplicatesCount)}}function goe(n,e){if(1&n&&Nr(0,"div",7),2&n){const t=ts();Na(t.options.messageClass),On("innerHTML",t.message,PC)}}function moe(n,e){if(1&n&&(Re(0,"div",8),Qe(1),Le()),2&n){const t=ts();Na(t.options.messageClass),es("aria-label",t.message),jt(1),go(" ",t.message," ")}}function _oe(n,e){if(1&n&&(Re(0,"div"),Nr(1,"div",9),Le()),2&n){const t=ts();jt(1),Jd("width",t.width+"%")}}class Coe{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class boe{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class Aoe{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new z,this._activate=new z,this._manualClose=new z,this._resetTimeout=new z,this._countDuplicate=new z}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class oI{constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this._onTap=new z,this._onAction=new z,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const WH=new me("ToastConfig");class Doe extends boe{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Soe=(()=>{class n{constructor(){this._document=rt(_r)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Roe{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Poe=(()=>{class n{constructor(){this._overlayContainer=rt(Soe),this._componentFactoryResolver=rt(Fd),this._appRef=rt(Rl),this._document=rt(_r),this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new Doe(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Roe(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nP=(()=>{class n{constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===r)return a.toastRef.onDuplicate(i,s),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const l=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let u=r;r&&s.enableHtml&&(u=this.sanitizer.sanitize(sn.HTML,r));const d=new Aoe(l),f=new oI(this.index,s,u,i,t,d),_=fi.create({providers:[{provide:oI,useValue:f}],parent:this._injector}),v=new Coe(s.toastComponent,_),T=l.attach(v,s.newestOnTop);d.componentInstance=T.instance;const A={toastId:this.index,title:i||"",message:r||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:f.onTap(),onAction:f.onAction(),portal:T};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{A.toastRef.activate()})),this.toasts.push(A),A}}return n.\u0275fac=function(t){return new(t||n)(ae(WH),ae(Poe),ae(fi),ae(jF),ae(Vt))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GH=(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(X(nP),X(oI),X(Vt))},n.\u0275cmp=ai({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&nr("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(p0("@flyInOut",r.state),Na(r.toastClasses),Jd("display",r.displayStyle))},standalone:!0,features:[rv],attrs:HH,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(gi(0,hoe,3,0,"button",0),gi(1,poe,3,5,"div",1),gi(2,goe,1,3,"div",2),gi(3,moe,2,4,"div",3),gi(4,_oe,2,2,"div",4)),2&t&&(On("ngIf",r.options.closeButton),jt(1),On("ngIf",r.title),jt(1),On("ngIf",r.message&&r.options.enableHtml),jt(1),On("ngIf",r.message&&!r.options.enableHtml),jt(1),On("ngIf",r.options.progressBar))},dependencies:[Tv],encapsulation:2,data:{animation:[doe("flyInOut",[eP("inactive",Lm({opacity:0})),eP("active",Lm({opacity:1})),eP("removed",Lm({opacity:0})),UH("inactive => active",VH("{{ easeTime }}ms {{ easing }}")),UH("active => removed",VH("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const xoe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:GH},Moe=(n={})=>function C4(n){return{\u0275providers:n}}([{provide:WH,useValue:{default:xoe,config:n}}]);let Noe=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Moe(t)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({imports:[GH]}),n})(),koe=new me("currency.mask.config");class Ooe{constructor(e){this.htmlInputElement=e}setCursorAt(e){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(e,e);else if(this.htmlInputElement.createTextRange){let t=this.htmlInputElement.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}}updateValueAndCursor(e,t,r){this.rawValue=e,this.setCursorAt(r-=t-e.length)}get canInputMoreNumbers(){let e=!(this.rawValue.length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),t=this.inputSelection.selectionStart,r=this.inputSelection.selectionEnd,i=!(t==r||!this.htmlInputElement.value.substring(t,r).match(/\d/)),s="0"==this.htmlInputElement.value.substring(0,1);return e||i||s}get inputSelection(){let e=0,t=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)e=this.htmlInputElement.selectionStart,t=this.htmlInputElement.selectionEnd;else{let r=document.getSelection().anchorNode;if(r&&r.firstChild==this.htmlInputElement){let i=this.htmlInputElement.value.length,s=this.htmlInputElement.value.replace(/\r\n/g,"\n"),o=this.htmlInputElement.createTextRange(),a=this.htmlInputElement.createTextRange();a.collapse(!1),o.compareEndPoints("StartToEnd",a)>-1?e=t=i:(e=-o.moveStart("character",-i),e+=s.slice(0,e).split("\n").length-1,o.compareEndPoints("EndToEnd",a)>-1?t=i:(t=-o.moveEnd("character",-i),t+=s.slice(0,t).split("\n").length-1))}}return{selectionStart:e,selectionEnd:t}}get rawValue(){return this.htmlInputElement&&this.htmlInputElement.value}set rawValue(e){this._storedRawValue=e,this.htmlInputElement&&(this.htmlInputElement.value=e)}get storedRawValue(){return this._storedRawValue}}class Foe{constructor(e,t){this.htmlInputElement=e,this.options=t,this.inputManager=new Ooe(e)}addNumber(e){this.rawValue||(this.rawValue=this.applyMask(!1,"0"));let t=String.fromCharCode(e),r=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd;this.rawValue=this.rawValue.substring(0,r)+t+this.rawValue.substring(i,this.rawValue.length),this.updateFieldValue(r+1)}applyMask(e,t){let{allowNegative:r,decimal:i,precision:s,prefix:o,suffix:a,thousands:l}=this.options,u=(t=e?new Number(t).toFixed(s):t).replace(/[^0-9]/g,"");if(!u)return"";let d=u.slice(0,u.length-s).replace(/^0*/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,l);""==d&&(d="0");let f=d,m=u.slice(u.length-s);s>0&&(m="0".repeat(s-m.length)+m,f+=i+m);let _=0==parseInt(d)&&(0==parseInt(m)||""==m);return(t.indexOf("-")>-1&&r&&!_?"-":"")+o+f+a}clearMask(e){if(null==e||""==e)return null;let t=e.replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(t=t.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(t=t.replace(this.options.decimal,".")),parseFloat(t)}changeToNegative(){if(this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value){let e=this.inputSelection.selectionStart;this.rawValue="-"+this.rawValue,this.updateFieldValue(e+1)}}changeToPositive(){let e=this.inputSelection.selectionStart;this.rawValue=this.rawValue.replace("-",""),this.updateFieldValue(e-1)}fixCursorPosition(e){let t=this.inputSelection.selectionStart;t>this.getRawValueWithoutSuffixEndPosition()||e?this.inputManager.setCursorAt(this.getRawValueWithoutSuffixEndPosition()):t<this.getRawValueWithoutPrefixStartPosition()&&this.inputManager.setCursorAt(this.getRawValueWithoutPrefixStartPosition())}getRawValueWithoutSuffixEndPosition(){return this.rawValue.length-this.options.suffix.length}getRawValueWithoutPrefixStartPosition(){return null!=this.value&&this.value<0?this.options.prefix.length+1:this.options.prefix.length}removeNumber(e){let{decimal:t,thousands:r}=this.options,i=this.inputSelection.selectionEnd,s=this.inputSelection.selectionStart;s>this.rawValue.length-this.options.suffix.length&&(i=this.rawValue.length-this.options.suffix.length,s=this.rawValue.length-this.options.suffix.length),i==s&&((46==e||63272==e)&&/^\d+$/.test(this.rawValue.substring(s,i+1))&&(i+=1),(46==e||63272==e)&&(this.rawValue.substring(s,i+1)==t||this.rawValue.substring(s,i+1)==r)&&(i+=2,s+=1),8==e&&/^\d+$/.test(this.rawValue.substring(s-1,i))&&(s-=1),8==e&&(this.rawValue.substring(s-1,i)==t||this.rawValue.substring(s-1,i)==r)&&(s-=2,i-=1)),this.rawValue=this.rawValue.substring(0,s)+this.rawValue.substring(i,this.rawValue.length),this.updateFieldValue(s)}updateFieldValue(e){let t=this.applyMask(!1,this.rawValue||"");this.inputManager.updateValueAndCursor(t,this.rawValue.length,e=e??this.rawValue.length)}updateOptions(e){let t=this.value;this.options=e,this.value=t}get canInputMoreNumbers(){return this.inputManager.canInputMoreNumbers}get inputSelection(){return this.inputManager.inputSelection}get rawValue(){return this.inputManager.rawValue}set rawValue(e){this.inputManager.rawValue=e}get storedRawValue(){return this.inputManager.storedRawValue}get value(){return this.clearMask(this.rawValue)}set value(e){this.rawValue=this.applyMask(!0,""+e)}}class Loe{constructor(e,t){this.inputService=new Foe(e,t),this.htmlInputElement=e}handleClick(e,t){0==Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)&&!isNaN(this.inputService.value)&&this.inputService.fixCursorPosition(t)}handleCut(e){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},0)}handleInput(e){if(this.isReadOnly())return;let t=this.getNewKeyCode(this.inputService.storedRawValue,this.inputService.rawValue),r=this.inputService.rawValue.length,i=this.inputService.inputSelection.selectionEnd,s=this.inputService.getRawValueWithoutSuffixEndPosition(),o=this.inputService.storedRawValue.length;if(this.inputService.rawValue=this.inputService.storedRawValue,i==s&&1==Math.abs(r-o)||0==o){if(r<o&&(0!=this.inputService.value?this.inputService.removeNumber(8):this.setValue(null)),r>o)switch(t){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:if(!this.inputService.canInputMoreNumbers||isNaN(this.inputService.value)&&null==String.fromCharCode(t).match(/\d/))return;this.inputService.addNumber(t)}this.setCursorPosition(e),this.onModelChange(this.inputService.value)}else this.setCursorPosition(e)}handleKeydown(e){if(this.isReadOnly())return;let t=e.which||e.charCode||e.keyCode;if(8==t||46==t||63272==t){e.preventDefault();let r=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart);(r==this.inputService.rawValue.length||0==this.inputService.value)&&(this.setValue(null),this.onModelChange(this.inputService.value)),0==r&&!isNaN(this.inputService.value)&&(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value)),(8===t||46===t)&&0!=r&&!isNaN(this.inputService.value)&&(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value))}}handleKeypress(e){if(this.isReadOnly())return;let t=e.which||e.charCode||e.keyCode;if(null!=t&&-1==[9,13].indexOf(t)&&!this.isArrowEndHomeKeyInFirefox(e)){switch(t){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:this.inputService.canInputMoreNumbers&&(!isNaN(this.inputService.value)||null!=String.fromCharCode(t).match(/\d/))&&this.inputService.addNumber(t)}e.preventDefault(),this.onModelChange(this.inputService.value)}}handleKeyup(e){this.inputService.fixCursorPosition()}handlePaste(e){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},1)}updateOptions(e){this.inputService.updateOptions(e)}getOnModelChange(){return this.onModelChange}setOnModelChange(e){this.onModelChange=e}getOnModelTouched(){return this.onModelTouched}setOnModelTouched(e){this.onModelTouched=e}setValue(e){this.inputService.value=e}getNewKeyCode(e,t){if(e.length>t.length)return null;for(let r=0;r<t.length;r++)if(e.length==r||e[r]!=t[r])return t.charCodeAt(r);return null}isArrowEndHomeKeyInFirefox(e){return-1!=[35,36,37,38,39,40].indexOf(e.keyCode)&&(null==e.charCode||0==e.charCode)}isReadOnly(){return this.htmlInputElement&&this.htmlInputElement.readOnly}setCursorPosition(e){let t=this.inputService.getRawValueWithoutSuffixEndPosition();const r=e.target;setTimeout(function(){r.setSelectionRange(t,t)},0)}}const Voe={provide:Co,useExisting:ye(()=>qH),multi:!0};let qH=(()=>{class n{constructor(t,r,i){this.currencyMaskConfig=t,this.elementRef=r,this.keyValueDiffers=i,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:","},t&&(this.optionsTemplate=t),this.keyValueDiffer=i.find({}).create()}ngAfterViewInit(){this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align}ngDoCheck(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}ngOnInit(){this.inputHandler=new Loe(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}handleBlur(t){this.inputHandler.getOnModelTouched().apply(t)}handleClick(t){this.inputHandler.handleClick(t,this.isChromeAndroid())}handleCut(t){this.isChromeAndroid()||this.inputHandler.handleCut(t)}handleInput(t){this.isChromeAndroid()&&this.inputHandler.handleInput(t)}handleKeydown(t){this.isChromeAndroid()||this.inputHandler.handleKeydown(t)}handleKeypress(t){this.isChromeAndroid()||this.inputHandler.handleKeypress(t)}handleKeyup(t){this.isChromeAndroid()||this.inputHandler.handleKeyup(t)}handlePaste(t){this.isChromeAndroid()||this.inputHandler.handlePaste(t)}isChromeAndroid(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}registerOnChange(t){this.inputHandler.setOnModelChange(t)}registerOnTouched(t){this.inputHandler.setOnModelTouched(t)}setDisabledState(t){this.elementRef.nativeElement.disabled=t}validate(t){let r={};return t.value>this.max&&(r.max=!0),t.value<this.min&&(r.min=!0),r!={}?r:null}writeValue(t){this.inputHandler.setValue(t)}}return n.\u0275fac=function(t){return new(t||n)(X(koe,8),X(Ji),X(sh))},n.\u0275dir=He({type:n,selectors:[["","currencyMask",""]],hostBindings:function(t,r){1&t&&nr("blur",function(s){return r.handleBlur(s)})("click",function(s){return r.handleClick(s)})("cut",function(s){return r.handleCut(s)})("input",function(s){return r.handleInput(s)})("keydown",function(s){return r.handleKeydown(s)})("keypress",function(s){return r.handleKeypress(s)})("keyup",function(s){return r.handleKeyup(s)})("paste",function(s){return r.handlePaste(s)})},inputs:{max:"max",min:"min",options:"options"},features:[wn([Voe,{provide:ei,useExisting:n,multi:!0}])]}),n})(),Boe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({imports:[[fF,FH]]}),n})();const Uoe=function(){return{prefix:"R$ ",thousands:".",decimal:",",nullable:!0,precision:2,allowNegative:!1,max:999.99,align:"center"}};let $oe=(()=>{class n{constructor(t,r,i){this.transacoesService=t,this.toastr=r,this.fb=i,this.formValorTransacao=new yf,this.submitted=!1,this.valor=0,this.nomeTransacao="",this.tipoCompra="",this.status="",this.formaPagamento="",this.criarTransacaoGroup=this.fb.group({nomeTransacao:["",Pm.required],tipoCompra:["Selecione",Pm.required],status:["Selecione",Pm.required],formaPagamento:["Selecione",Pm.required],valor:["",Pm.required]})}ngOnInit(){this.obterTransacoes()}obterTransacoes(){return this.transacoesService.obterTransacoes().subscribe(r=>{this.transacoes=r})}novaTransacao(){if(this.criarTransacaoGroup.invalid)return;const t=this.criarTransacaoGroup.value;this.transacoesService.novaTransacao({valor:t.valor,nomeTransacao:t.nomeTransacao,tipoCompra:t.tipoCompra,status:t.status,formaPagamento:t.formaPagamento}).subscribe(()=>{this.toastr.success("A transa\xe7\xe3o foi criada com sucesso!")},()=>{this.toastr.error("Houve um problema ao criar a transa\xe7\xe3o")}),this.obterTransacoes()}static#e=this.\u0275fac=function(r){return new(r||n)(X(kR),X(nP),X(loe))};static#t=this.\u0275cmp=ai({type:n,selectors:[["app-botao-nova-transacao"]],decls:58,vars:6,consts:[[1,"btn-nova-transacao"],["data-modal-target","nova-transacao","data-modal-toggle","nova-transacao","type","button"],["id","nova-transacao","tabindex","-1","aria-hidden","true",1,"hidden","overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","z-50","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","p-4","w-full","max-w-md","max-h-full"],[1,"relative","bg-[#1B1B1E]","rounded-lg","shadow","dark:bg-gray-700"],[1,"flex","items-center","bg-[#1957A0]","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-lg","text-white","dark:text-white"],["type","button","data-modal-toggle","nova-transacao",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5",3,"formGroup","ngSubmit"],[1,"grid","gap-4","mb-4","grid-cols-2"],[1,"col-span-2"],["for","valor",1,"block","text-sm","text-[#B9B8B8]","dark:text-[#B9B8B8]"],["currencyMask","","formControlName","valor","id","valor","type","tel","inputmode","numeric","pattern","[0-9]*","placeholder","R$ 0,00","required","",1,"bg-[#383838]","text-center","border-gray-400","text-[#B9B8B8]","text-3xl","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-10","dark:bg-[#383838]","dark:focus:border-primary-500",3,"options"],["for","nomeTransacao",1,"block","text-sm","text-[#B9B8B8]","dark:text-[#B9B8B8]"],["type","text","formControlName","nomeTransacao","id","nomeTransacao","placeholder","Ex: Restaurante","required","",1,"bg-[#383838]","border-gray-400","text-[#B9B8B8]","text-md","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[1,"col-span-2","sm:col-span-1"],["for","tipoCompra",1,"block","text-sm","text-[#B9B8B8]","dark:text-white"],["id","tipoCompra","formControlName","tipoCompra",1,"bg-[#383838]","border-gray-400","text-[#B9B8B8]","text-md","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","ngModelChange"],["value","Selecione","disabled","","selected",""],["value","E"],["value","S"],["for","formaPagamento",1,"block","text-sm","text-[#B9B8B8]","dark:text-white"],["id","formaPagamento","formControlName","formaPagamento",1,"bg-[#383838]","border-gray-400","text-[#B9B8B8]","text-md","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","ngModelChange"],["value","V"],["value","C"],["for","status",1,"block","text-sm","text-[#B9B8B8]","dark:text-white"],["id","status","formControlName","status",1,"bg-[#383838]","border-gray-400","text-[#B9B8B8]","text-md","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"ngModel","ngModelChange"],["value","Pg"],["value","Pd"],["type","submit",1,"text-white","inline-flex","items-center","bg-[#1957A0]","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],["fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"me-1","-ms-1","w-5","h-5"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"button",1),Qe(2," Nova transa\xe7\xe3o "),Le()(),Re(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3",6),Qe(8," Nova transa\xe7\xe3o "),Le(),Re(9,"button",7),hd(),Re(10,"svg",8),Nr(11,"path",9),Le(),function sy(){!function MT(){Ke.lFrame.currentNamespace=null}()}(),Re(12,"span",10),Qe(13,"X"),Le()()(),Re(14,"form",11),nr("ngSubmit",function(){return i.novaTransacao()}),Re(15,"div",12)(16,"div",13)(17,"label",14),Qe(18,"Valor da transa\xe7\xe3o"),Le(),Nr(19,"input",15),Le(),Re(20,"div",13)(21,"label",16),Qe(22,"Nome da transa\xe7\xe3o"),Le(),Nr(23,"input",17),Le(),Re(24,"div",18)(25,"label",19),Qe(26,"Tipo da Transa\xe7\xe3o"),Le(),Re(27,"select",20),nr("ngModelChange",function(o){return i.tipoCompra=o}),Re(28,"option",21),Qe(29,"Selecione"),Le(),Re(30,"option",22),Qe(31,"Entrada"),Le(),Re(32,"option",23),Qe(33,"Sa\xedda"),Le()()(),Re(34,"div",18)(35,"label",24),Qe(36,"Forma de pagamento"),Le(),Re(37,"select",25),nr("ngModelChange",function(o){return i.formaPagamento=o}),Re(38,"option",21),Qe(39,"Selecione"),Le(),Re(40,"option",26),Qe(41,"\xc0 vista"),Le(),Re(42,"option",27),Qe(43,"Cr\xe9dito"),Le()()(),Re(44,"div",18)(45,"label",28),Qe(46,"Status"),Le(),Re(47,"select",29),nr("ngModelChange",function(o){return i.status=o}),Re(48,"option",21),Qe(49,"Selecione"),Le(),Re(50,"option",30),Qe(51,"Pago"),Le(),Re(52,"option",31),Qe(53,"Pendente"),Le()()()(),Re(54,"button",32),hd(),Re(55,"svg",33),Nr(56,"path",34),Le(),Qe(57," Criar transa\xe7\xe3o "),Le()()()()()),2&r&&(jt(14),On("formGroup",i.criarTransacaoGroup),jt(5),On("options",function MO(n,e,t){const r=Wr()+n,i=Y();return i[r]===nt?zo(i,r,t?e.call(t):e()):function xp(n,e){return n[e]}(i,r)}(5,Uoe)),jt(8),On("ngModel",i.tipoCompra),jt(10),On("ngModel",i.formaPagamento),jt(10),On("ngModel",i.status))},dependencies:[qH,pH,IH,CH,Gw,iI,Jj,eH,sI,JR,rI,YR],styles:[".btn-nova-transacao[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:end}.btn-nova-transacao[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:135px;height:35px;border-radius:10px;font-size:10pt;background-color:#1957a0;color:#fff;border:1px solid #B9B8B8;cursor:pointer;margin-bottom:10px}button[_ngcontent-%COMP%]:hover{background-color:#114c8f}@media (max-width: 450px){.btn-nova-transacao[_ngcontent-%COMP%]{position:relative;top:12rem}.btn-nova-transacao[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;height:30px;font-size:9pt}}"]})}return n})(),joe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ai({type:n,selectors:[["app-home"]],decls:7,vars:0,template:function(r,i){1&r&&(Re(0,"header"),Nr(1,"app-sidebar"),Re(2,"nav"),Nr(3,"app-card-faturas"),Re(4,"section"),Nr(5,"app-botao-nova-transacao")(6,"app-card-transacoes"),Le()()())},dependencies:[PJ,xJ,hse,$oe],styles:["header[_ngcontent-%COMP%]{display:flex}nav[_ngcontent-%COMP%]{width:100%;padding:5rem 1.5rem 0}section[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;margin-top:5rem}"]})}return n})(),Hoe=(()=>{class n{constructor(){this.title="Finance"}ngOnInit(){OV()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ai({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Nr(0,"app-home")},dependencies:[joe]})}return n})();var Bm=Ve(942);Bm.Z.registerVersion("firebase","10.6.0","app-compat");const Goe=["ngOnDestroy"];class KH{constructor(e){return e}}const rP=new me("angularfire2.app.options"),iP=new me("angularfire2.app.name");function sP(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Bm.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bm.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Qoe("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new KH(o)}const Qoe=(n,...e)=>{};function QH(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Zoe(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(ZH("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Yoe?" You may need to reload as Firebase is not HMR aware.":""}`),ZH("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Yoe=typeof module<"u"&&!!module.hot,ZH=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ve(568);class Xoe extends z{constructor(e=1/0,t=1/0,r=AA){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function YH(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,E({connector:()=>new Xoe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function XH(n,e){return b(e)?Ln(()=>n,e):Ln(()=>n)}const JH=new me("angularfire2.auth.use-emulator"),ez=new me("angularfire2.auth.settings"),tz=new me("angularfire2.auth.tenant-id"),nz=new me("angularfire2.auth.langugage-code"),rz=new me("angularfire2.auth.use-device-language"),iz=new me("angularfire.auth.persistence"),sz=(n,e,t,r,i,s,o,a)=>QH(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[u,d]of Object.entries(o))l.settings[u]=d;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let oz=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,u,d,f,m,_){const v=new z,T=Ne(void 0).pipe(zn(o.outsideAngular),Ln(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ve.bind(Ve,568)))),ue(()=>sP(t,s,r)),ue(A=>sz(A,s,a,u,d,f,l,m)),YH({bufferSize:1,refCount:!1}));if(function C7(n){return"server"===n}(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ne(null);else{T.pipe(Ua()).subscribe();const A=T.pipe(Ln(P=>P.getRedirectResult().then(V=>V,()=>null)),Bl,YH({bufferSize:1,refCount:!1})),M=T.pipe(Ln(P=>new qe(V=>({unsubscribe:s.runOutsideAngular(()=>P.onAuthStateChanged(oe=>V.next(oe),oe=>V.error(oe),()=>V.complete()))})))),F=T.pipe(Ln(P=>new qe(V=>({unsubscribe:s.runOutsideAngular(()=>P.onIdTokenChanged(oe=>V.next(oe),oe=>V.error(oe),()=>V.complete()))}))));this.authState=A.pipe(XH(M),xr(o.outsideAngular),zn(o.insideAngular)),this.user=A.pipe(XH(F),xr(o.outsideAngular),zn(o.insideAngular)),this.idToken=this.user.pipe(Ln(P=>P?w(P.getIdToken()):Ne(null))),this.idTokenResult=this.user.pipe(Ln(P=>P?w(P.getIdTokenResult()):Ne(null))),this.credential=C(A,v,this.authState.pipe(Oi(P=>!P))).pipe(ue(P=>P?.user?P:null),xr(o.outsideAngular),zn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Goe.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(d=>{const f=d?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,f),f})})})}))(this,T,s,{spy:{apply:(A,M,F)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&F.then(P=>v.next(P))}}})}static \u0275fac=function(r){return new(r||n)(ae(rP),ae(iP,8),ae(Ku),ae(Vt),ae(wE),ae(JH,8),ae(ez,8),ae(tz,8),ae(nz,8),ae(rz,8),ae(iz,8),ae(SA,8))};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function rae(n,e){return n===e}const az="@firebase/database";let oP="";function aP(n){oP=n}class iae{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,D.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,D.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sae{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,D.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const uz=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iae(e)}}catch{}return new sae},xc=uz("localStorage"),lP=uz("sessionStorage"),vf=new Ys.Yd("@firebase/database"),cz=function(){let n=1;return function(){return n++}}(),dz=function(n){const e=(0,D.dS)(n),t=new D.gQ;t.update(e);const r=t.digest();return D.US.encodeByteArray(r)},Um=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Um.apply(null,r):e+="object"==typeof r?(0,D.Wl)(r):r,e+=" "}return e};let Mc=null,hz=!0;const fz=function(n,e){(0,D.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(vf.logLevel=Ys.in.VERBOSE,Mc=vf.log.bind(vf),e&&lP.set("logging_enabled",!0)):"function"==typeof n?Mc=n:(Mc=null,lP.remove("logging_enabled"))},Ur=function(...n){if(!0===hz&&(hz=!1,null===Mc&&!0===lP.get("logging_enabled")&&fz(!0)),Mc){const e=Um.apply(null,n);Mc(e)}},$m=function(n){return function(...e){Ur(n,...e)}},uP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Um(...n);vf.error(e)},sa=function(...n){const e=`FIREBASE FATAL ERROR: ${Um(...n)}`;throw vf.error(e),new Error(e)},wi=function(...n){const e="FIREBASE WARNING: "+Um(...n);vf.warn(e)},aI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lu="[MIN_NAME]",Ja="[MAX_NAME]",Nc=function(n,e){if(n===e)return 0;if(n===lu||e===Ja)return-1;if(e===lu||n===Ja)return 1;{const t=mz(n),r=mz(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},lae=function(n,e){return n===e?0:n<e?-1:1},jm=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,D.Wl)(e))},cP=function(n){if("object"!=typeof n||null===n)return(0,D.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,D.Wl)(e[r]),t+=":",t+=cP(n[e[r]]);return t+="}",t},pz=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function $r(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const gz=function(n){(0,D.hu)(!aI(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let f="";for(l=0;l<64;l+=8){let m=parseInt(d.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),f+=m}return f.toLowerCase()},hae=new RegExp("^-?(0*)\\d{1,10}$"),mz=function(n){if(hae.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Ef=function(n){try{n()}catch(e){setTimeout(()=>{throw wi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},gae=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hm=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class mae{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){wi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _ae{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wi(e)}}let zm=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cz="websocket",bz="long_polling";class hP{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Az(n,e,t){let r;if((0,D.hu)("string"==typeof e,"typeof type must == string"),(0,D.hu)("object"==typeof t,"typeof params must == object"),e===Cz)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==bz)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function yae(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return $r(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class vae{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,D.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,D.p$)(this.counters_)}}const fP={},pP={};function gP(n){const e=n.toString();return fP[e]||(fP[e]=new vae),fP[e]}class wae{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ef(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uu{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$m(e),this.stats_=gP(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Az(t,bz,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wae(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,D.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mP((...s)=>{const[o,a,l,u,d]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&wz.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uu.forceAllow_=!0}static forceDisallow(){uu.forceDisallow_=!0}static isAvailable(){return!((0,D.Yr)()||!uu.forceAllow_&&(uu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,D.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,D.h$)(t),i=pz(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,D.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,D.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class mP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,D.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=cz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=mP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ur("frame writing exception"),a.stack&&Ur(a.stack),Ur(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ur("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,D.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ur("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let uI=null;typeof MozWebSocket<"u"?uI=MozWebSocket:typeof WebSocket<"u"&&(uI=WebSocket);let wf=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$m(this.connId),this.stats_=gP(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,D.Yr)()&&typeof location<"u"&&location.hostname&&wz.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),Az(t,Cz,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xc.set("previous_websocket_failure",!0);try{let i;if((0,D.Yr)()){i={headers:{"User-Agent":`Firebase/5/${oP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new uI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==uI&&!n.forceDisallow_}static previouslyFailed(){return xc.isInMemoryStorage||!0===xc.get("previous_websocket_failure")}markConnectionHealthy(){xc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,D.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,D.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,D.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=pz(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Nz=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[uu,wf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=wf&&wf.isAvailable();let i=r&&!wf.previouslyFailed();if(t.webSocketOnly&&(r||wi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[wf];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Uz{constructor(e,t,r,i,s,o,a,l,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$m("c:"+this.id+":"),this.transportManager_=new Nz(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Hm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=jm("t",e),r=jm("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=jm("t",e),r=jm("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=jm("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?uP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&wi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Hm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $z{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class jz{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,D.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,D.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class cI extends jz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,D.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cI}getInitialEvent(e){return(0,D.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Hz=32,zz=768;class zt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bt(){return new zt("")}function gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function cu(n){return n.pieces_.length-n.pieceNum_}function on(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new zt(n.pieces_,e)}function yP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Wm(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Wz(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new zt(e,0)}function xn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof zt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new zt(t,0)}function mt(n){return n.pieceNum_>=n.pieces_.length}function Bi(n,e){const t=gt(n),r=gt(e);if(null===t)return e;if(t===r)return Bi(on(n),on(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Hae(n,e){const t=Wm(n,0),r=Wm(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Nc(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function vP(n,e){if(cu(n)!==cu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Js(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(cu(n)>cu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class zae{constructor(e,t){this.errorPrefix_=t,this.parts_=Wm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,D.ug)(this.parts_[r]);Gz(this)}}function Gz(n){if(n.byteLength_>zz)throw new Error(n.errorPrefix_+"has a key path longer than "+zz+" bytes ("+n.byteLength_+").");if(n.parts_.length>Hz)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hz+") or object contains a cycle "+kc(n))}function kc(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EP extends jz{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new EP}getInitialEvent(e){return(0,D.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Gm=1e3;let hI,Oc=(()=>{class n extends $z{constructor(t,r,i,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=$m("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!(0,D.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&cI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,D.Wl)(o)),(0,D.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new D.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,D.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,D.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const u=l.d,d=l.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==d&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,D.r3)(t,"w")){const i=(0,D.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();wi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,D.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,D.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,D.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,D.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):uP("Unrecognized action received from server: "+(0,D.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,D.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gm,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Gm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Pe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,s())};t.realtime_={close:d,sendRequest:function(_){(0,D.hu)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,v]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);l?Ur("getToken() completed but was canceled"):(Ur("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=v&&v.token,u=new Uz(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{wi(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(_){t.log_("Failed to get token: "+_),l||(t.repoInfo_.nodeAdmin&&wi(_),d())}}})()}interrupt(t){Ur("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ur("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,D.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>cP(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new zt(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ur("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ur("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,D.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+oP.replace(/\./g,"-")]=1,(0,D.uI)()?t["framework.cordova"]=1:(0,D.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=cI.getInstance().currentlyOnline();return(0,D.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class vt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new vt(e,t)}}class dI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new vt(lu,e),i=new vt(lu,t);return 0!==this.compare(r,i)}minPost(){return vt.MIN}}class Qz extends dI{static get __EMPTY_NODE(){return hI}static set __EMPTY_NODE(e){hI=e}compare(e,t){return Nc(e.name,t.name)}isDefinedOn(e){throw(0,D.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return vt.MIN}maxPost(){return new vt(Ja,hI)}makePost(e,t){return(0,D.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new vt(e,hI)}toString(){return".key"}}const oa=new Qz;class fI{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let IP,bo=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ls.EMPTY_NODE,this.right=o??ls.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ls.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ls.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ls{constructor(e,t=ls.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ls(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,bo.BLACK,null,null))}remove(e){return new ls(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new fI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new fI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new fI(this.root_,null,this.comparator_,!0,e)}}function Xae(n,e){return Nc(n.name,e.name)}function wP(n,e){return Nc(n,e)}ls.EMPTY_NODE=new class Yae{copy(e,t,r,i,s){return this}insert(e,t,r){return new bo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Zz=function(n){return"number"==typeof n?"number:"+gz(n):"string:"+n},Yz=function(n){if(n.isLeafNode()){const e=n.val();(0,D.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,D.r3)(e,".sv"),"Priority must be a string or number.")}else(0,D.hu)(n===IP||n.isEmpty(),"priority of unexpected type.");(0,D.hu)(n===IP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Xz,Jz,eW,If=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,D.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yz(this.priorityNode_)}static set __childrenNodeConstructor(t){Xz=t}static get __childrenNodeConstructor(){return Xz}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mt(t)?this:".priority"===gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,D.hu)(".priority"!==i||1===cu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(on(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Zz(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?gz(this.value_):this.value_,this.lazyHash_=dz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,D.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,D.hu)(s>=0,"Unknown leaf type: "+r),(0,D.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const pn=new class nle extends dI{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Nc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return vt.MIN}maxPost(){return new vt(Ja,new If("[PRIORITY-POST]",eW))}makePost(e,t){const r=Jz(e);return new vt(t,new If("[PRIORITY-POST]",r))}toString(){return".priority"}},rle=Math.log(2);class ile{constructor(e){this.count=parseInt(Math.log(e+1)/rle,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pI=function(n,e,t,r){n.sort(e);const i=function(l,u){const d=u-l;let f,m;if(0===d)return null;if(1===d)return f=n[l],m=t?t(f):f,new bo(m,f.node,bo.BLACK,null,null);{const _=parseInt(d/2,10)+l,v=i(l,_),T=i(_+1,u);return f=n[_],m=t?t(f):f,new bo(m,f.node,bo.BLACK,v,T)}},a=function(l){let u=null,d=null,f=n.length;const m=function(v,T){const A=f-v,M=f;f-=v;const F=i(A+1,M),P=n[A],V=t?t(P):P;_(new bo(V,P.node,T,null,F))},_=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<l.count;++v){const T=l.nextBitIsOne(),A=Math.pow(2,l.count-(v+1));T?m(A,bo.BLACK):(m(A,bo.BLACK),m(A,bo.RED))}return d}(new ile(n.length));return new ls(r||e,a)};let TP;const Tf={};class el{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,D.hu)(Tf&&pn,"ChildrenNode.ts has not been loaded"),TP=TP||new el({".priority":Tf},{".priority":pn}),TP}get(e){const t=(0,D.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ls?t:null}hasIndex(e){return(0,D.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,D.hu)(e!==oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(vt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?pI(r,e.getCompare()):Tf;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new el(d,u)}addToIndexes(e,t){const r=(0,D.UI)(this.indexes_,(i,s)=>{const o=(0,D.DV)(this.indexSet_,s);if((0,D.hu)(o,"Missing index implementation for "+s),i===Tf){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(vt.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),pI(a,o.getCompare())}return Tf}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new vt(e.name,a))),l.insert(e,e.node)}});return new el(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,D.UI)(this.indexes_,i=>{if(i===Tf)return i;{const s=t.get(e.name);return s?i.remove(new vt(e.name,s)):i}});return new el(r,this.indexSet_)}}let qm,st=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Yz(this.priorityNode_),this.children_.isEmpty()&&(0,D.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qm||(qm=new n(new ls(wP),null,el.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qm}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?qm:r}}getChild(t){const r=gt(t);return null===r?this:this.getImmediateChild(r).getChild(on(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,D.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new vt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?qm:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=gt(t);if(null===i)return r;{(0,D.hu)(".priority"!==gt(t)||1===cu(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(on(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(pn,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Zz(this.getPriority().val())+":"),this.forEachChild(pn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":dz(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new vt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new vt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new vt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,vt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,vt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Km?-1:0}withIndex(t){if(t===oa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===oa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(pn),s=r.getIterator(pn);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===oa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Km=new class sle extends st{constructor(){super(new ls(wP),st.EMPTY_NODE,el.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(vt,{MIN:{value:new vt(lu,st.EMPTY_NODE)},MAX:{value:new vt(Ja,Km)}}),Qz.__EMPTY_NODE=st.EMPTY_NODE,If.__childrenNodeConstructor=st,function Jae(n){IP=n}(Km),function tle(n){eW=n}(Km);const ole=!0;function Bn(n,e=null){if(null===n)return st.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,D.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new If(n,Bn(e));if(n instanceof Array||!ole){let t=st.EMPTY_NODE;return $r(n,(r,i)=>{if((0,D.r3)(n,r)&&"."!==r.substring(0,1)){const s=Bn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Bn(e))}{const t=[];let r=!1;if($r(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Bn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new vt(o,l)))}}),0===t.length)return st.EMPTY_NODE;const s=pI(t,Xae,o=>o.name,wP);if(r){const o=pI(t,pn.getCompare());return new st(s,Bn(e),new el({".priority":o},{".priority":pn}))}return new st(s,Bn(e),el.Default)}}!function ele(n){Jz=n}(Bn);class CP extends dI{constructor(e){super(),this.indexPath_=e,(0,D.hu)(!mt(e)&&".priority"!==gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Nc(e.name,t.name):s}makePost(e,t){const r=Bn(e),i=st.EMPTY_NODE.updateChild(this.indexPath_,r);return new vt(t,i)}maxPost(){const e=st.EMPTY_NODE.updateChild(this.indexPath_,Km);return new vt(Ja,e)}toString(){return Wm(this.indexPath_,0).join("/")}}const bP=new class ale extends dI{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Nc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return vt.MIN}maxPost(){return vt.MAX}makePost(e,t){const r=Bn(e);return new vt(t,r)}toString(){return".value"}};function tW(n){return{type:"value",snapshotNode:n}}function Cf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Qm(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zm(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class AP{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,D.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Qm(t,a)):(0,D.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Cf(t,r)):o.trackChildChange(Zm(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(pn,(i,s)=>{t.hasChild(i)||r.trackChildChange(Qm(i,s))}),t.isLeafNode()||t.forEachChild(pn,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Zm(i,s,o))}else r.trackChildChange(Cf(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?st.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ym{constructor(e){this.indexedFilter_=new AP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ym.getStartPost_(e),this.endPost_=Ym.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new vt(t,r))||(r=st.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=st.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(st.EMPTY_NODE);const s=this;return t.forEachChild(pn,(o,a)=>{s.matches(new vt(o,a))||(i=i.updateImmediateChild(o,st.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ule{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ym(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new vt(t,r))||(r=st.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=st.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=st.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(st.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,st.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const f=this.index_.getCompare();o=(m,_)=>f(_,m)}else o=this.index_.getCompare();const a=e;(0,D.hu)(a.numChildren()===this.limit_,"");const l=new vt(t,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){const f=a.getImmediateChild(t);let m=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=m&&(m.name===t||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const _=null==m?1:o(m,l);if(d&&!r.isEmpty()&&_>=0)return s?.trackChildChange(Zm(t,r,f)),a.updateImmediateChild(t,r);{s?.trackChildChange(Qm(t,f));const T=a.updateImmediateChild(t,st.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Cf(m.name,m.node)),T.updateImmediateChild(m.name,m.node)):T}}return r.isEmpty()?e:d&&o(u,l)>=0?(null!=s&&(s.trackChildChange(Qm(u.name,u.node)),s.trackChildChange(Cf(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,st.EMPTY_NODE)):e}}class gI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,D.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,D.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,D.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,D.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ja}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,D.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pn}copy(){const e=new gI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function SP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function mI(n,e){const t=n.copy();return t.index_=e,t}function nW(n){const e={};if(n.isDefault())return e;let t;if(n.index_===pn?t="$priority":n.index_===bP?t="$value":n.index_===oa?t="$key":((0,D.hu)(n.index_ instanceof CP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,D.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,D.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,D.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,D.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,D.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function rW(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==pn&&(e.i=n.index_.toString()),e}class _I extends $z{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$m("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,D.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=_I.getListenId_(e,r),a={};this.listens_[o]=a;const l=nW(e._queryParams);this.restRequest_(s+".json",l,(u,d)=>{let f=d;if(404===u&&(f=null,u=null),null===u&&this.onDataUpdate_(s,f,!1,r),(0,D.DV)(this.listens_,o)===a){let m;m=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(m,null)}})}unlisten(e,t){const r=_I.getListenId_(e,t);delete this.listens_[r]}get(e){const t=nW(e._queryParams),r=e._path.toString(),i=new D.BH;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,D.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,D.cI)(a.responseText)}catch{wi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&wi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class gle{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yI(){return{value:null,children:new Map}}function bf(n,e,t){if(mt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=gt(e);n.children.has(r)||n.children.set(r,yI()),bf(n.children.get(r),e=on(e),t)}}function RP(n,e){if(mt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(pn,(r,i)=>{bf(n,new zt(r),i)}),RP(n,e)}}if(n.children.size>0){const t=gt(e);return e=on(e),n.children.has(t)&&RP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function PP(n,e,t){null!==n.value?t(e,n.value):function mle(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{PP(i,new zt(e.toString()+"/"+r),t)})}class _le{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$r(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Ele{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _le(e);const r=1e4+2e4*Math.random();Hm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;$r(e,(i,s)=>{s>0&&(0,D.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Hm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var eo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(eo||(eo={})),eo))();function NP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class vI{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=eo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mt(this.path)){if(null!=this.affectedTree.value)return(0,D.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new zt(e));return new vI(Bt(),t,this.revert)}}return(0,D.hu)(gt(this.path)===e,"operationForChild called for unrelated child."),new vI(on(this.path),this.affectedTree,this.revert)}}class Xm{constructor(e,t){this.source=e,this.path=t,this.type=eo.LISTEN_COMPLETE}operationForChild(e){return mt(this.path)?new Xm(this.source,Bt()):new Xm(this.source,on(this.path))}}class Fc{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=eo.OVERWRITE}operationForChild(e){return mt(this.path)?new Fc(this.source,Bt(),this.snap.getImmediateChild(e)):new Fc(this.source,on(this.path),this.snap)}}class Af{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=eo.MERGE}operationForChild(e){if(mt(this.path)){const t=this.children.subtree(new zt(e));return t.isEmpty()?null:t.value?new Fc(this.source,Bt(),t.value):new Af(this.source,Bt(),t)}return(0,D.hu)(gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Af(this.source,on(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class du{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mt(e))return this.isFullyInitialized()&&!this.filtered_;const t=gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class wle{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Jm(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function Cle(n,e,t){if(null==e.childName||null==t.childName)throw(0,D.g5)("Should only compare child_ events.");const r=new vt(e.childName,e.snapshotNode),i=new vt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Tle(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function EI(n,e){return{eventCache:n,serverCache:e}}function e_(n,e,t,r){return EI(new du(e,t,r),n.serverCache)}function sW(n,e,t,r){return EI(n.eventCache,new du(e,t,r))}function wI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kP;class gn{constructor(e,t=(()=>(kP||(kP=new ls(lae)),kP))()){this.value=e,this.children=t}static fromObject(e){let t=new gn(null);return $r(e,(r,i)=>{t=t.set(new zt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bt(),value:this.value};if(mt(e))return null;{const r=gt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(on(e),t);return null!=s?{path:xn(new zt(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(mt(e))return this;{const t=gt(e),r=this.children.get(t);return null!==r?r.subtree(on(e)):new gn(null)}}set(e,t){if(mt(e))return new gn(t,this.children);{const r=gt(e),s=(this.children.get(r)||new gn(null)).set(on(e),t),o=this.children.insert(r,s);return new gn(this.value,o)}}remove(e){if(mt(e))return this.children.isEmpty()?new gn(null):new gn(null,this.children);{const t=gt(e),r=this.children.get(t);if(r){const i=r.remove(on(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new gn(null):new gn(this.value,s)}return this}}get(e){if(mt(e))return this.value;{const t=gt(e),r=this.children.get(t);return r?r.get(on(e)):null}}setTree(e,t){if(mt(e))return t;{const r=gt(e),s=(this.children.get(r)||new gn(null)).setTree(on(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new gn(this.value,o)}}fold(e){return this.fold_(Bt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(xn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(mt(e))return null;{const s=gt(e),o=this.children.get(s);return o?o.findOnPath_(on(e),xn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bt(),t)}foreachOnPath_(e,t,r){if(mt(e))return this;{this.value&&r(t,this.value);const i=gt(e),s=this.children.get(i);return s?s.foreachOnPath_(on(e),xn(t,i),r):new gn(null)}}foreach(e){this.foreach_(Bt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(xn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ao{constructor(e){this.writeTree_=e}static empty(){return new Ao(new gn(null))}}function t_(n,e,t){if(mt(e))return new Ao(new gn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Bi(i,e);return s=s.updateChild(o,t),new Ao(n.writeTree_.set(i,s))}{const i=new gn(t),s=n.writeTree_.setTree(e,i);return new Ao(s)}}}function OP(n,e,t){let r=n;return $r(t,(i,s)=>{r=t_(r,xn(e,i),s)}),r}function oW(n,e){if(mt(e))return Ao.empty();{const t=n.writeTree_.setTree(e,new gn(null));return new Ao(t)}}function FP(n,e){return null!=Vc(n,e)}function Vc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Bi(t.path,e)):null}function aW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(pn,(r,i)=>{e.push(new vt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new vt(r,i.value))}),e}function hu(n,e){if(mt(e))return n;{const t=Vc(n,e);return new Ao(null!=t?new gn(t):n.writeTree_.subtree(e))}}function LP(n){return n.writeTree_.isEmpty()}function Df(n,e){return lW(Bt(),n.writeTree_,e)}function lW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,D.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=lW(xn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(xn(n,".priority"),r)),t}}function II(n,e){return fW(e,n)}function Ple(n,e){if(n.snap)return Js(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Js(xn(n.path,t),e))return!0;return!1}function Mle(n){return n.visible}function uW(n,e,t){let r=Ao.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Js(t,o)?(a=Bi(t,o),r=t_(r,a,s.snap)):Js(o,t)&&(a=Bi(o,t),r=t_(r,Bt(),s.snap.getChild(a)));else{if(!s.children)throw(0,D.g5)("WriteRecord should have .snap or .children");if(Js(t,o))a=Bi(t,o),r=OP(r,a,s.children);else if(Js(o,t))if(a=Bi(o,t),mt(a))r=OP(r,Bt(),s.children);else{const l=(0,D.DV)(s.children,gt(a));if(l){const u=l.getChild(on(a));r=t_(r,Bt(),u)}}}}}return r}function cW(n,e,t,r,i){if(r||i){const s=hu(n.visibleWrites,e);return!i&&LP(s)?t:i||null!=t||FP(s,Bt())?Df(uW(n.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Js(u.path,e)||Js(e,u.path))},e),t||st.EMPTY_NODE):null}{const s=Vc(n.visibleWrites,e);if(null!=s)return s;{const o=hu(n.visibleWrites,e);return LP(o)?t:null!=t||FP(o,Bt())?Df(o,t||st.EMPTY_NODE):null}}}function TI(n,e,t,r){return cW(n.writeTree,n.treePath,e,t,r)}function VP(n,e){return function Nle(n,e,t){let r=st.EMPTY_NODE;const i=Vc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=hu(n.visibleWrites,e);return t.forEachChild(pn,(o,a)=>{const l=Df(hu(s,new zt(o)),a);r=r.updateImmediateChild(o,l)}),aW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return aW(hu(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function dW(n,e,t,r){return function kle(n,e,t,r,i){(0,D.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=xn(e,t);if(FP(n.visibleWrites,s))return null;{const o=hu(n.visibleWrites,s);return LP(o)?i.getChild(t):Df(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function CI(n,e){return function Fle(n,e){return Vc(n.visibleWrites,e)}(n.writeTree,xn(n.treePath,e))}function BP(n,e,t){return function Ole(n,e,t,r){const i=xn(e,t),s=Vc(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Df(hu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function hW(n,e){return fW(xn(n.treePath,e),n.writeTree)}function fW(n,e){return{treePath:n,writeTree:e}}class Ule{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,D.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,D.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Zm(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Qm(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Cf(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,D.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Zm(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const pW=new class $le{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class UP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new du(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Lc(this.viewCache_),s=function Ble(n,e,t,r,i,s){return function Lle(n,e,t,r,i,s,o){let a;const l=hu(n.visibleWrites,e),u=Vc(l,Bt());if(null!=u)a=u;else{if(null==t)return[];a=Df(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const d=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=m.getNext();for(;_&&d.length<i;)0!==f(_,r)&&d.push(_),_=m.getNext();return d}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function gW(n,e,t,r,i,s){const o=e.eventCache;if(null!=CI(r,t))return e;{let a,l;if(mt(t))if((0,D.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Lc(e),f=VP(r,u instanceof st?u:st.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const u=TI(r,Lc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=gt(t);if(".priority"===u){(0,D.hu)(1===cu(t),"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const f=dW(r,t,d,l);a=null!=f?n.filter.updatePriority(d,f):o.getNode()}else{const d=on(t);let f;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const m=dW(r,t,o.getNode(),l);f=null!=m?o.getNode().getImmediateChild(u).updateChild(d,m):o.getNode().getImmediateChild(u)}else f=BP(r,u,e.serverCache);a=null!=f?n.filter.updateChild(o.getNode(),u,f,d,i,s):o.getNode()}}return e_(e,a,o.isFullyInitialized()||mt(t),n.filter.filtersNodes())}}function bI(n,e,t,r,i,s,o,a){const l=e.serverCache;let u;const d=o?n.filter:n.filter.getIndexedFilter();if(mt(t))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(t,r);u=d.updateFullNode(l.getNode(),_,null)}else{const _=gt(t);if(!l.isCompleteForPath(t)&&cu(t)>1)return e;const v=on(t),A=l.getNode().getImmediateChild(_).updateChild(v,r);u=".priority"===_?d.updatePriority(l.getNode(),A):d.updateChild(l.getNode(),_,A,v,pW,null)}const f=sW(e,u,l.isFullyInitialized()||mt(t),d.filtersNodes());return gW(n,f,t,i,new UP(i,f,s),a)}function $P(n,e,t,r,i,s,o){const a=e.eventCache;let l,u;const d=new UP(i,e,s);if(mt(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=e_(e,u,!0,n.filter.filtersNodes());else{const f=gt(t);if(".priority"===f)u=n.filter.updatePriority(e.eventCache.getNode(),r),l=e_(e,u,a.isFullyInitialized(),a.isFiltered());else{const m=on(t),_=a.getNode().getImmediateChild(f);let v;if(mt(m))v=r;else{const T=d.getCompleteChild(f);v=null!=T?".priority"===yP(m)&&T.getChild(Wz(m)).isEmpty()?T:T.updateChild(m,r):st.EMPTY_NODE}l=_.equals(v)?e:e_(e,n.filter.updateChild(a.getNode(),f,v,m,d,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function mW(n,e){return n.eventCache.isCompleteForChild(e)}function _W(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jP(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=mt(t)?r:new gn(null).setTree(t,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){const v=_W(0,e.serverCache.getNode().getImmediateChild(f),m);l=bI(n,l,new zt(f),v,i,s,o,a)}}),u.children.inorderTraversal((f,m)=>{const _=!e.serverCache.isCompleteForChild(f)&&null===m.value;if(!d.hasChild(f)&&!_){const T=_W(0,e.serverCache.getNode().getImmediateChild(f),m);l=bI(n,l,new zt(f),T,i,s,o,a)}}),l}class Zle{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new AP(r.getIndex()),s=function cle(n){return n.loadsAllData()?new AP(n.getIndex()):n.hasLimit()?new ule(n):new Ym(n)}(r);this.processor_=function jle(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(st.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(st.EMPTY_NODE,a.getNode(),null),d=new du(l,o.isFullyInitialized(),i.filtersNodes()),f=new du(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=EI(f,d),this.eventGenerator_=new wle(this.query_)}get query(){return this.query_}}function Jle(n,e){const t=Lc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!mt(e)&&!t.getImmediateChild(gt(e)).isEmpty())?t.getChild(e):null}function yW(n){return 0===n.eventRegistrations_.length}function vW(n,e,t){const r=[];if(t){(0,D.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function EW(n,e,t,r){e.type===eo.MERGE&&null!==e.source.queryId&&((0,D.hu)(Lc(n.viewCache_),"We should always have a full cache before handling merges"),(0,D.hu)(wI(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function zle(n,e,t,r,i){const s=new Ule;let o,a;if(t.type===eo.OVERWRITE){const u=t;u.source.fromUser?o=$P(n,e,u.path,u.snap,r,i,s):((0,D.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!mt(u.path),o=bI(n,e,u.path,u.snap,r,i,a,s))}else if(t.type===eo.MERGE){const u=t;u.source.fromUser?o=function Gle(n,e,t,r,i,s,o){let a=e;return r.foreach((l,u)=>{const d=xn(t,l);mW(e,gt(d))&&(a=$P(n,a,d,u,i,s,o))}),r.foreach((l,u)=>{const d=xn(t,l);mW(e,gt(d))||(a=$P(n,a,d,u,i,s,o))}),a}(n,e,u.path,u.children,r,i,s):((0,D.hu)(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=jP(n,e,u.path,u.children,r,i,a,s))}else if(t.type===eo.ACK_USER_WRITE){const u=t;o=u.revert?function Qle(n,e,t,r,i,s){let o;if(null!=CI(r,t))return e;{const a=new UP(r,e,i),l=e.eventCache.getNode();let u;if(mt(t)||".priority"===gt(t)){let d;if(e.serverCache.isFullyInitialized())d=TI(r,Lc(e));else{const f=e.serverCache.getNode();(0,D.hu)(f instanceof st,"serverChildren would be complete if leaf node"),d=VP(r,f)}u=n.filter.updateFullNode(l,d,s)}else{const d=gt(t);let f=BP(r,d,e.serverCache);null==f&&e.serverCache.isCompleteForChild(d)&&(f=l.getImmediateChild(d)),u=null!=f?n.filter.updateChild(l,d,f,on(t),a,s):e.eventCache.getNode().hasChild(d)?n.filter.updateChild(l,d,st.EMPTY_NODE,on(t),a,s):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=TI(r,Lc(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=CI(r,Bt()),e_(e,u,o,n.filter.filtersNodes())}}(n,e,u.path,r,i,s):function qle(n,e,t,r,i,s,o){if(null!=CI(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(mt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return bI(n,e,t,l.getNode().getChild(t),i,s,a,o);if(mt(t)){let u=new gn(null);return l.getNode().forEachChild(oa,(d,f)=>{u=u.set(new zt(d),f)}),jP(n,e,t,u,i,s,a,o)}return e}{let u=new gn(null);return r.foreach((d,f)=>{const m=xn(t,d);l.isCompleteForPath(m)&&(u=u.set(d,l.getNode().getChild(m)))}),jP(n,e,t,u,i,s,a,o)}}(n,e,u.path,u.affectedTree,r,i,s)}else{if(t.type!==eo.LISTEN_COMPLETE)throw(0,D.g5)("Unknown operation type: "+t.type);o=function Kle(n,e,t,r,i){const s=e.serverCache;return gW(n,sW(e,s.getNode(),s.isFullyInitialized()||mt(t),s.isFiltered()),t,r,pW,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function Wle(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=wI(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(tW(wI(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function Hle(n,e){(0,D.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,D.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,D.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,wW(n,s.changes,s.viewCache.eventCache.getNode(),null)}function wW(n,e,t,r){return function Ile(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function lle(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Jm(n,i,"child_removed",e,r,t),Jm(n,i,"child_added",e,r,t),Jm(n,i,"child_moved",s,r,t),Jm(n,i,"child_changed",e,r,t),Jm(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let AI,SI;class IW{constructor(){this.views=new Map}}function HP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,D.hu)(null!=s,"SyncTree gave us an op for an invalid query."),EW(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(EW(o,e,t,r));return s}}function TW(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=TI(t,i?r:null),l=!1;a?l=!0:r instanceof st?(a=VP(t,r),l=!1):(a=st.EMPTY_NODE,l=!1);const u=EI(new du(a,l,!1),new du(r,i,!1));return new Zle(e,u)}return o}function CW(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fu(n,e){let t=null;for(const r of n.views.values())t=t||Jle(r,e);return t}function bW(n,e){return e._queryParams.loadsAllData()?DI(n):n.views.get(e._queryIdentifier)}function AW(n,e){return null!=bW(n,e)}function pu(n){return null!=DI(n)}function DI(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let uue=1;class DW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gn(null),this.pendingWriteTree_=function Vle(){return{visibleWrites:Ao.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zP(n,e,t,r,i){return function Ale(n,e,t,r,i){(0,D.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=t_(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Sf(n,new Fc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gu(n,e,t=!1){const r=function Sle(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Rle(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,D.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Ple(a,r.path)?i=!1:Js(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function xle(n){n.visibleWrites=uW(n.allWrites,Mle,Bt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=oW(n.visibleWrites,r.path):$r(r.children,l=>{n.visibleWrites=oW(n.visibleWrites,xn(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new gn(null);return null!=r.snap?s=s.set(Bt(),!0):$r(r.children,o=>{s=s.set(new zt(o),!0)}),Sf(n,new vI(r.path,s,t))}return[]}function n_(n,e,t){return Sf(n,new Fc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function RI(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||AW(o,e))){const l=function oue(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=pu(n);if("default"===i)for(const[l,u]of n.views.entries())o=o.concat(vW(u,t,r)),yW(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=n.views.get(i);l&&(o=o.concat(vW(l,t,r)),yW(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!pu(n)&&s.push(new(function rue(){return(0,D.hu)(AI,"Reference.ts has not been loaded"),AI}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function iue(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const d=-1!==u.findIndex(m=>m._queryParams.loadsAllData()),f=n.syncPointTree_.findOnPath(s,(m,_)=>pu(_));if(d&&!f){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const _=function mue(n){return n.fold((e,t,r)=>{if(t&&pu(t))return[DI(t)];{let i=[];return t&&(i=CW(t)),$r(r,(s,o)=>{i=i.concat(o)}),i}})}(m);for(let v=0;v<_.length;++v){const T=_[v],A=T.query,M=xW(n,T);n.listenProvider_.startListening(i_(A),r_(n,A),M.hashFn,M.onComplete)}}}!f&&u.length>0&&!r&&(d?n.listenProvider_.stopListening(i_(e),null):u.forEach(m=>{const _=n.queryToTagMap.get(xI(m));n.listenProvider_.stopListening(i_(m),_)}))}!function _ue(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=xI(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,u)}return a}function SW(n,e,t,r){const i=GP(n,r);if(null!=i){const s=qP(i),o=s.path,a=s.queryId,l=Bi(o,e);return KP(n,o,new Fc(NP(a),l,t))}return[]}function WP(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(m,_)=>{const v=Bi(m,i);s=s||fu(_,v),o=o||pu(_)});let l,a=n.syncPointTree_.get(i);a?(o=o||pu(a),s=s||fu(a,Bt())):(a=new IW,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=st.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((_,v)=>{const T=fu(v,Bt());T&&(s=s.updateImmediateChild(_,T))}));const u=AW(a,e);if(!u&&!e._queryParams.loadsAllData()){const m=xI(e);(0,D.hu)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const _=function yue(){return uue++}();n.queryToTagMap.set(m,_),n.tagToQueryMap.set(_,m)}let f=function sue(n,e,t,r,i,s){const o=TW(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function eue(n,e){n.eventRegistrations_.push(e)}(o,t),function tue(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(pn,(s,o)=>{r.push(Cf(s,o))}),t.isFullyInitialized()&&r.push(tW(t.getNode())),wW(n,r,t.getNode(),e)}(o,t)}(a,e,t,II(n.pendingWriteTree_,i),s,l);if(!u&&!o&&!r){const m=bW(a,e);f=f.concat(function vue(n,e,t){const r=e._path,i=r_(n,e),s=xW(n,t),o=n.listenProvider_.startListening(i_(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,D.hu)(!pu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,d,f)=>{if(!mt(u)&&d&&pu(d))return[DI(d).query];{let m=[];return d&&(m=m.concat(CW(d).map(_=>_.query))),$r(f,(_,v)=>{m=m.concat(v)}),m}});for(let u=0;u<l.length;++u){const d=l[u];n.listenProvider_.stopListening(i_(d),r_(n,d))}}return o}(n,e,m))}return f}function PI(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const u=fu(a,Bi(o,e));if(u)return u});return cW(i,e,s,t,!0)}function Sf(n,e){return RW(e,n.syncPointTree_,null,II(n.pendingWriteTree_,Bt()))}function RW(n,e,t,r){if(mt(n.path))return PW(n,e,t,r);{const i=e.get(Bt());null==t&&null!=i&&(t=fu(i,Bt()));let s=[];const o=gt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const u=t?t.getImmediateChild(o):null,d=hW(r,o);s=s.concat(RW(a,l,u,d))}return i&&(s=s.concat(HP(i,n,r,t))),s}}function PW(n,e,t,r){const i=e.get(Bt());null==t&&null!=i&&(t=fu(i,Bt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,u=hW(r,o),d=n.operationForChild(o);d&&(s=s.concat(PW(d,a,l,u)))}),i&&(s=s.concat(HP(i,n,r,t))),s}function xW(n,e){const t=e.query,r=r_(n,t);return{hashFn:()=>(function Yle(n){return n.viewCache_.serverCache.getNode()}(e)||st.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function fue(n,e,t){const r=GP(n,t);if(r){const i=qP(r),s=i.path,o=i.queryId,a=Bi(s,e);return KP(n,s,new Xm(NP(o),a))}return[]}(n,t._path,r):function hue(n,e){return Sf(n,new Xm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function dae(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return RI(n,t,null,s)}}}}function r_(n,e){const t=xI(e);return n.queryToTagMap.get(t)}function xI(n){return n._path.toString()+"$"+n._queryIdentifier}function GP(n,e){return n.tagToQueryMap.get(e)}function qP(n){const e=n.indexOf("$");return(0,D.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new zt(n.substr(0,e))}}function KP(n,e,t){const r=n.syncPointTree_.get(e);return(0,D.hu)(r,"Missing sync point for query tag that we're tracking"),HP(r,t,II(n.pendingWriteTree_,e),null)}function i_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function lue(){return(0,D.hu)(SI,"Reference.ts has not been loaded"),SI}())(n._repo,n._path):n}class QP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new QP(t)}node(){return this.node_}}class ZP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xn(this.path_,e);return new ZP(this.syncTree_,t)}node(){return PI(this.syncTree_,this.path_)}}const Eue=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},MW=function(n,e,t){return n&&"object"==typeof n?((0,D.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?wue(n[".sv"],e,t):"object"==typeof n[".sv"]?Iue(n[".sv"],e):void(0,D.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},wue=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,D.hu)(!1,"Unexpected server value: "+n)},Iue=function(n,e,t){n.hasOwnProperty("increment")||(0,D.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,D.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,D.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},NW=function(n,e,t,r){return XP(e,new ZP(t,n),r)},YP=function(n,e,t){return XP(n,new QP(e),t)};function XP(n,e,t){const r=n.getPriority().val(),i=MW(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=MW(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new If(a,Bn(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new If(i))),o.forEachChild(pn,(a,l)=>{const u=XP(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}class JP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function MI(n,e){let t=e instanceof zt?e:new zt(e),r=n,i=gt(t);for(;null!==i;){const s=(0,D.DV)(r.node.children,i)||{children:{},childCount:0};r=new JP(i,r,s),t=on(t),i=gt(t)}return r}function Bc(n){return n.node.value}function ex(n,e){n.node.value=e,tx(n)}function kW(n){return n.node.childCount>0}function NI(n,e){$r(n.node.children,(t,r)=>{e(new JP(t,n,r))})}function OW(n,e,t,r){t&&!r&&e(n),NI(n,i=>{OW(i,e,!0,r)}),t&&r&&e(n)}function s_(n){return new zt(null===n.parent?n.name:s_(n.parent)+"/"+n.name)}function tx(n){null!==n.parent&&function bue(n,e,t){const r=function Tue(n){return void 0===Bc(n)&&!kW(n)}(t),i=(0,D.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,tx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,tx(n))}(n.parent,n.name,n)}const Aue=/[\[\].#$\/\u0000-\u001F\u007F]/,Due=/[\[\].#$\u0000-\u001F\u007F]/,nx=10485760,kI=function(n){return"string"==typeof n&&0!==n.length&&!Aue.test(n)},FW=function(n){return"string"==typeof n&&0!==n.length&&!Due.test(n)},o_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!aI(n)||n&&"object"==typeof n&&(0,D.r3)(n,".sv")},aa=function(n,e,t,r){r&&void 0===e||a_((0,D.gK)(n,"value"),e,t)},a_=function(n,e,t){const r=t instanceof zt?new zae(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+kc(r));if("function"==typeof e)throw new Error(n+"contains a function "+kc(r)+" with contents = "+e.toString());if(aI(e))throw new Error(n+"contains "+e.toString()+" "+kc(r));if("string"==typeof e&&e.length>nx/3&&(0,D.ug)(e)>nx)throw new Error(n+"contains a string greater than "+nx+" utf8 bytes "+kc(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if($r(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!kI(o)))throw new Error(n+" contains an invalid key ("+o+") "+kc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Wae(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,D.ug)(e),Gz(n)})(r,o),a_(n,a,r),function Gae(n){const e=n.parts_.pop();n.byteLength_-=(0,D.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+kc(r)+" in addition to actual children.")}},LW=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,D.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];$r(e,(o,a)=>{const l=new zt(o);if(a_(i,a,xn(t,l)),".priority"===yP(l)&&!o_(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Wm(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!kI(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Hae);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Js(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},rx=function(n,e,t){if(!t||void 0!==e){if(aI(e))throw new Error((0,D.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!o_(e))throw new Error((0,D.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},l_=function(n,e,t,r){if(!(r&&void 0===t||kI(t)))throw new Error((0,D.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},u_=function(n,e,t,r){if(!(r&&void 0===t||FW(t)))throw new Error((0,D.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Pue=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),u_(n,e,t,r)},to=function(n,e){if(".info"===gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},VW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!kI(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FW(n)}(t))throw new Error((0,D.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function OI(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!vP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function BW(n,e,t){OI(n,t),UW(n,r=>vP(r,e))}function Ps(n,e,t){OI(n,t),UW(n,r=>Js(r,e)||Js(e,r))}function UW(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Mue(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Mue(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Mc&&Ur("event: "+t.toString()),Ef(r)}}}const $W="repo_interrupt",Nue=25;class kue{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yI(),this.transactionQueueTree_=new JP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jW(n){const t=n.infoData_.getNode(new zt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function c_(n){return Eue({timestamp:jW(n)})}function HW(n,e,t,r,i){n.dataUpdateCount++;const s=new zt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,D.UI)(t,u=>Bn(u));o=function pue(n,e,t,r){const i=GP(n,r);if(i){const s=qP(i),o=s.path,a=s.queryId,l=Bi(o,e),u=gn.fromObject(t);return KP(n,o,new Af(NP(a),l,u))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Bn(t);o=SW(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,D.UI)(t,u=>Bn(u));o=function due(n,e,t){const r=gn.fromObject(t);return Sf(n,new Af({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Bn(t);o=n_(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Pf(n,s)),Ps(n.eventQueue_,a,o)}function zW(n,e){ix(n,"connected",e),!1===e&&function Bue(n){Rf(n,"onDisconnectEvents");const e=c_(n),t=yI();PP(n.onDisconnect_,Bt(),(i,s)=>{const o=NW(i,s,n.serverSyncTree_,e);bf(t,i,o)});let r=[];PP(t,Bt(),(i,s)=>{r=r.concat(n_(n.serverSyncTree_,i,s));const o=lx(n,i);Pf(n,o)}),n.onDisconnect_=yI(),Ps(n.eventQueue_,Bt(),r)}(n)}function ix(n,e,t){const r=new zt("/.info/"+e),i=Bn(t);n.infoData_.updateSnapshot(r,i);const s=n_(n.infoSyncTree_,r,i);Ps(n.eventQueue_,r,s)}function FI(n){return n.nextWriteId_++}function sx(n,e,t,r,i){Rf(n,"set",{path:e.toString(),value:t,priority:r});const s=c_(n),o=Bn(t,r),a=PI(n.serverSyncTree_,e),l=YP(o,a,s),u=FI(n),d=zP(n.serverSyncTree_,e,l,u,!0);OI(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(m,_)=>{const v="ok"===m;v||wi("set at "+e+" failed: "+m);const T=gu(n.serverSyncTree_,u,!v);Ps(n.eventQueue_,e,T),mu(0,i,m,_)});const f=lx(n,e);Pf(n,f),Ps(n.eventQueue_,f,[])}function Uue(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&RP(n.onDisconnect_,e),mu(0,t,r,i)})}function WW(n,e,t,r){const i=Bn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&bf(n.onDisconnect_,e,i),mu(0,r,s,o)})}function ox(n,e,t){let r;r=".info"===gt(e._path)?RI(n.infoSyncTree_,e,t):RI(n.serverSyncTree_,e,t),BW(n.eventQueue_,e._path,r)}function GW(n){n.persistentConnection_&&n.persistentConnection_.interrupt($W)}function Rf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ur(t,...e)}function mu(n,e,t,r){e&&Ef(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function ax(n,e,t){return PI(n.serverSyncTree_,e,t)||st.EMPTY_NODE}function LI(n,e=n.transactionQueueTree_){if(e||VI(n,e),Bc(e)){const t=KW(n,e);(0,D.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Gue(n,e,t){const r=t.map(u=>u.currentWriteId),i=ax(n,e,r);let s=i;const o=i.hash();for(let u=0;u<t.length;u++){const d=t[u];(0,D.hu)(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Bi(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{Rf(n,"transaction put response",{path:l.toString(),status:u});let d=[];if("ok"===u){const f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(gu(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();VI(n,MI(n.transactionQueueTree_,e)),LI(n,n.transactionQueueTree_),Ps(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)Ef(f[m])}else{if("datastale"===u)for(let f=0;f<t.length;f++)t[f].status=3===t[f].status?4:0;else{wi("transaction at "+l.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}Pf(n,e)}},o)}(n,s_(e),t)}else kW(e)&&NI(e,t=>{LI(n,t)})}function Pf(n,e){const t=qW(n,e),r=s_(t);return function que(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Bi(t,l.path);let f,d=!1;if((0,D.hu)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,f=l.abortReason,i=i.concat(gu(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Nue)d=!0,f="maxretry",i=i.concat(gu(n.serverSyncTree_,l.currentWriteId,!0));else{const m=ax(n,l.path,o);l.currentInputSnapshot=m;const _=e[a].update(m.val());if(void 0!==_){a_("transaction failed: Data returned ",_,l.path);let v=Bn(_);"object"==typeof _&&null!=_&&(0,D.r3)(_,".priority")||(v=v.updatePriority(m.getPriority()));const A=l.currentWriteId,M=c_(n),F=YP(v,m,M);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=F,l.currentWriteId=FI(n),o.splice(o.indexOf(A),1),i=i.concat(zP(n.serverSyncTree_,l.path,F,l.currentWriteId,l.applyLocally)),i=i.concat(gu(n.serverSyncTree_,A,!0))}else d=!0,f="nodata",i=i.concat(gu(n.serverSyncTree_,l.currentWriteId,!0))}Ps(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===f?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(f),!1,null)))}VI(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Ef(r[a]);LI(n,n.transactionQueueTree_)}(n,KW(n,t),r),r}function qW(n,e){let t,r=n.transactionQueueTree_;for(t=gt(e);null!==t&&void 0===Bc(r);)r=MI(r,t),t=gt(e=on(e));return r}function KW(n,e){const t=[];return QW(n,e,t),t.sort((r,i)=>r.order-i.order),t}function QW(n,e,t){const r=Bc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);NI(e,i=>{QW(n,i,t)})}function VI(n,e){const t=Bc(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,ex(e,t.length>0?t:void 0)}NI(e,r=>{VI(n,r)})}function lx(n,e){const t=s_(qW(n,e)),r=MI(n.transactionQueueTree_,e);return function Cue(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ux(n,i)}),ux(n,r),OW(r,i=>{ux(n,i)}),t}function ux(n,e){const t=Bc(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,D.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,D.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gu(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ex(e,void 0):t.length=s+1,Ps(n.eventQueue_,s_(e),i);for(let o=0;o<r.length;o++)Ef(r[o])}}const cx=function(n,e){const t=Zue(n),r=t.namespace;return"firebase.com"===t.domain&&sa(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&sa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new zt(t.pathString)}},Zue=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");-1===d&&(d=n.length);let f=n.indexOf("?");-1===f&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=function Kue(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(d,f)));const m=function Que(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):wi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),t=e.substring(v+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},ZW="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yue=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ZW.charAt(t%64),t=Math.floor(t/64);(0,D.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=ZW.charAt(e[i]);return(0,D.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class YW{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,D.Wl)(this.snapshot.exportVal())}}class XW{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class dx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,D.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class JW{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new D.BH;return Uue(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){to("OnDisconnect.remove",this._path);const e=new D.BH;return WW(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){to("OnDisconnect.set",this._path),aa("OnDisconnect.set",e,this._path,!1);const t=new D.BH;return WW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){to("OnDisconnect.setWithPriority",this._path),aa("OnDisconnect.setWithPriority",e,this._path,!1),rx("OnDisconnect.setWithPriority",t,!1);const r=new D.BH;return function $ue(n,e,t,r,i){const s=Bn(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&bf(n.onDisconnect_,e,s),mu(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){to("OnDisconnect.update",this._path),LW("OnDisconnect.update",e,this._path,!1);const t=new D.BH;return function jue(n,e,t,r){if((0,D.xb)(t))return Ur("onDisconnect().update() called with empty data.  Don't do anything."),void mu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&$r(t,(o,a)=>{const l=Bn(a);bf(n.onDisconnect_,xn(e,o),l)}),mu(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class us{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return mt(this._path)?null:yP(this._path)}get ref(){return new no(this._repo,this._path)}get _queryIdentifier(){const e=rW(this._queryParams),t=cP(e);return"{}"===t?"default":t}get _queryObject(){return rW(this._queryParams)}isEqual(e){if(!((e=(0,D.m9)(e))instanceof us))return!1;const t=this._repo===e._repo,r=vP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function jae(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function BI(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _u(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===oa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==lu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ja)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===pn){if(null!=e&&!o_(e)||null!=t&&!o_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,D.hu)(n.getIndex()instanceof CP||n.getIndex()===bP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function UI(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class no extends us{constructor(e,t){super(e,t,new gI,!1)}get parent(){const e=Wz(this._path);return null===e?null:new no(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Uc{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new zt(e),r=$c(this.ref,e);return new Uc(this._node.getChild(t),r,pn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Uc(i,$c(this.ref,r),pn)))}hasChild(e){const t=new zt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function eG(n,e){return(n=(0,D.m9)(n))._checkNotDeleted("ref"),void 0!==e?$c(n._root,e):n._root}function tG(n,e){(n=(0,D.m9)(n))._checkNotDeleted("refFromURL");const t=cx(e,n._repo.repoInfo_.nodeAdmin);VW("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&sa("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),eG(n,t.path.toString())}function $c(n,e){return null===gt((n=(0,D.m9)(n))._path)?Pue("child","path",e,!1):u_("child","path",e,!1),new no(n._repo,xn(n._path,e))}function hx(n,e){n=(0,D.m9)(n),to("set",n._path),aa("set",e,n._path,!1);const t=new D.BH;return sx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nce(n,e){LW("update",e,n._path,!1);const t=new D.BH;return function Vue(n,e,t,r){Rf(n,"update",{path:e.toString(),value:t});let i=!0;const s=c_(n),o={};if($r(t,(a,l)=>{i=!1,o[a]=NW(xn(e,a),Bn(l),n.serverSyncTree_,s)}),i)Ur("update() called with empty data.  Don't do anything."),mu(0,r,"ok",void 0);else{const a=FI(n),l=function cue(n,e,t,r){!function Dle(n,e,t,r){(0,D.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=OP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=gn.fromObject(t);return Sf(n,new Af({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);OI(n.eventQueue_,l),n.server_.merge(e.toString(),t,(u,d)=>{const f="ok"===u;f||wi("update at "+e+" failed: "+u);const m=gu(n.serverSyncTree_,a,!f),_=m.length>0?Pf(n,e):e;Ps(n.eventQueue_,_,m),mu(0,r,u,d)}),$r(t,u=>{const d=lx(n,xn(e,u));Pf(n,d)}),Ps(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function rce(n){n=(0,D.m9)(n);const e=new dx(()=>{}),t=new d_(e);return function Lue(n,e,t){const r=function gue(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(u,d)=>{const f=Bi(u,t);r=r||fu(d,f)});let i=n.syncPointTree_.get(t);i?r=r||fu(i,Bt()):(i=new IW,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new du(r,!0,!1):null;return function Xle(n){return wI(n.viewCache_)}(TW(i,e,II(n.pendingWriteTree_,e._path),s?o.getNode():st.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Bn(i).withIndex(e._queryParams.getIndex());let o;if(WP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=n_(n.serverSyncTree_,e._path,s);else{const a=r_(n.serverSyncTree_,e);o=SW(n.serverSyncTree_,e._path,s,a)}return Ps(n.eventQueue_,e._path,o),RI(n.serverSyncTree_,e,t,null,!0),s},i=>(Rf(n,"get for query "+(0,D.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Uc(r,new no(n._repo,n._path),n._queryParams.getIndex()))}class d_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new YW("value",this,new Uc(e.snapshotNode,new no(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new XW(this,e,t):null}matches(e){return e instanceof d_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class $I{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new XW(this,e,t):null}createEvent(e,t){(0,D.hu)(null!=e.childName,"Child events should have a childName.");const r=$c(new no(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new YW(e.type,this,new Uc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof $I&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function h_(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,u=(d,f)=>{ox(n._repo,n,a),l(d,f)};u.userCallback=t.userCallback,u.context=t.context,t=u}const o=new dx(t,s||void 0),a="value"===e?new d_(o):new $I(e,o);return function Hue(n,e,t){let r;r=".info"===gt(e._path)?WP(n.infoSyncTree_,e,t):WP(n.serverSyncTree_,e,t),BW(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>ox(n._repo,n,a)}function fx(n,e,t,r){return h_(n,"value",e,t,r)}function nG(n,e,t,r){return h_(n,"child_added",e,t,r)}function rG(n,e,t,r){return h_(n,"child_changed",e,t,r)}function iG(n,e,t,r){return h_(n,"child_moved",e,t,r)}function sG(n,e,t,r){return h_(n,"child_removed",e,t,r)}function oG(n,e,t){let r=null;const i=t?new dx(t):null;"value"===e?r=new d_(i):e&&(r=new $I(e,i)),ox(n._repo,n,r)}class Do{}class aG extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){aa("endAt",this._value,e._path,!0);const t=SP(e._queryParams,this._value,this._key);if(UI(t),_u(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class sce extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){aa("endBefore",this._value,e._path,!1);const t=function ple(n,e,t){let r;return r=SP(n,e,n.index_===oa||t?t:lu),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(UI(t),_u(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class lG extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){aa("startAt",this._value,e._path,!0);const t=DP(e._queryParams,this._value,this._key);if(UI(t),_u(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class lce extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){aa("startAfter",this._value,e._path,!1);const t=function fle(n,e,t){let r;return r=DP(n,e,n.index_===oa||t?t:Ja),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(UI(t),_u(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new us(e._repo,e._path,t,e._orderByCalled)}}class cce extends Do{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new us(e._repo,e._path,function dle(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class hce extends Do{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new us(e._repo,e._path,function hle(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class pce extends Do{constructor(e){super(),this._path=e}_apply(e){BI(e,"orderByChild");const t=new zt(this._path);if(mt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new CP(t),i=mI(e._queryParams,r);return _u(i),new us(e._repo,e._path,i,!0)}}class mce extends Do{_apply(e){BI(e,"orderByKey");const t=mI(e._queryParams,oa);return _u(t),new us(e._repo,e._path,t,!0)}}class yce extends Do{_apply(e){BI(e,"orderByPriority");const t=mI(e._queryParams,pn);return _u(t),new us(e._repo,e._path,t,!0)}}class Ece extends Do{_apply(e){BI(e,"orderByValue");const t=mI(e._queryParams,bP);return _u(t),new us(e._repo,e._path,t,!0)}}class Ice extends Do{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(aa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new aG(this._value,this._key)._apply(new lG(this._value,this._key)._apply(e))}}function So(n,...e){let t=(0,D.m9)(n);for(const r of e)t=r._apply(t);return t}(function nue(n){(0,D.hu)(!AI,"__referenceConstructor has already been defined"),AI=n})(no),function aue(n){(0,D.hu)(!SI,"__referenceConstructor has already been defined"),SI=n}(no);const Cce="FIREBASE_DATABASE_EMULATOR_HOST",px={};let uG=!1;function gx(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||sa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ur("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,u,o=cx(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(u=process.env[Cce]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=cx(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const d=i&&l?new zm(zm.OWNER):new _ae(n.name,n.options,e);VW("Invalid Firebase Database URL",o),mt(o.path)||sa("Database URL must point to the root of a Firebase Database (not including a child path).");const f=function Dce(n,e,t,r){let i=px[e.name];i||(i={},px[e.name]=i);let s=i[n.toURLString()];return s&&sa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new kue(n,uG,t,r),i[n.toURLString()]=s,s}(a,n,d,new mae(n.name,t));return new Rce(f,n)}class Rce{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Oue(n,e,t){if(n.stats_=gP(n.repoInfo_),n.forceRestClient_||gae())n.server_=new _I(n.repoInfo_,(r,i,s,o)=>{HW(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>zW(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,D.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Oc(n.repoInfo_,e,(r,i,s,o)=>{HW(n,r,i,s,o)},r=>{zW(n,r)},r=>{!function Fue(n,e){$r(e,(t,r)=>{ix(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Eae(n,e){const t=n.toString();return pP[t]||(pP[t]=e()),pP[t]}(n.repoInfo_,()=>new Ele(n.stats_,n.server_)),n.infoData_=new gle,n.infoSyncTree_=new DW({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=n_(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ix(n,"connected",!1),n.serverSyncTree_=new DW({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Ps(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new no(this._repo,Bt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ace(n,e){const t=px[e];(!t||t[n.key]!==n)&&sa(`Database ${e}(${n.repoInfo_}) has already been deleted.`),GW(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&sa("Cannot call "+e+" on a deleted database.")}}function cG(){Nz.IS_TRANSPORT_INITIALIZED&&wi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Pce(){cG(),uu.forceDisallow()}function xce(){cG(),wf.forceDisallow(),uu.forceAllow()}function kce(n,e){fz(n,e)}const Fce={".sv":"timestamp"};class Bce{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Oc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Oc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Oce(n){aP(Ar.SDK_VERSION),(0,Ar._registerComponent)(new Ul.wA("database",(e,{instanceIdentifier:t})=>gx(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ar.registerVersion)(az,"1.0.1",n),(0,Ar.registerVersion)(az,"1.0.1","esm2017")}();const Hce=new Ys.Yd("@firebase/database-compat"),hG=function(n){Hce.warn("FIREBASE WARNING: "+n)};class Gce{constructor(e){this._delegate=e}cancel(e){(0,D.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,D.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,D.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,D.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,D.Dv)("OnDisconnect.set",1,2,arguments.length),(0,D.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,D.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,D.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,D.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,hG("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,D.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class qce{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,D.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class yu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,D.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,D.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,D.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,D.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,D.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),u_("DataSnapshot.child","path",e,!1),new yu(this._database,this._delegate.child(e))}hasChild(e){return(0,D.Dv)("DataSnapshot.hasChild",1,1,arguments.length),u_("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,D.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,D.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,D.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new yu(this._database,t)))}hasChildren(){return(0,D.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,D.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,D.Dv)("DataSnapshot.ref",0,0,arguments.length),new xs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ti{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,D.Dv)("Query.on",2,4,arguments.length),(0,D.Wj)("Query.on","callback",t,!1);const o=ti.getCancelAndContextArgs_("Query.on",r,i),a=(u,d)=>{t.call(o.context,new yu(this.database,u),d)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return fx(this._delegate,a,l),t;case"child_added":return nG(this._delegate,a,l),t;case"child_removed":return sG(this._delegate,a,l),t;case"child_changed":return rG(this._delegate,a,l),t;case"child_moved":return iG(this._delegate,a,l),t;default:throw new Error((0,D.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,D.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,D.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,D.Wj)("Query.off","callback",t,!0),(0,D.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,oG(this._delegate,e,i)}else oG(this._delegate,e)}get(){return rce(this._delegate).then(e=>new yu(this.database,e))}once(e,t,r,i){(0,D.Dv)("Query.once",1,4,arguments.length),(0,D.Wj)("Query.once","callback",t,!0);const s=ti.getCancelAndContextArgs_("Query.once",r,i),o=new D.BH,a=(u,d)=>{const f=new yu(this.database,u);t&&t.call(s.context,f,d),o.resolve(f)};a.userCallback=t,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":fx(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":nG(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":sG(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":rG(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":iG(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,D.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,D.Dv)("Query.limitToFirst",1,1,arguments.length),new ti(this.database,So(this._delegate,function dce(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cce(n)}(e)))}limitToLast(e){return(0,D.Dv)("Query.limitToLast",1,1,arguments.length),new ti(this.database,So(this._delegate,function fce(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new hce(n)}(e)))}orderByChild(e){return(0,D.Dv)("Query.orderByChild",1,1,arguments.length),new ti(this.database,So(this._delegate,function gce(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return u_("orderByChild","path",n,!1),new pce(n)}(e)))}orderByKey(){return(0,D.Dv)("Query.orderByKey",0,0,arguments.length),new ti(this.database,So(this._delegate,function _ce(){return new mce}()))}orderByPriority(){return(0,D.Dv)("Query.orderByPriority",0,0,arguments.length),new ti(this.database,So(this._delegate,function vce(){return new yce}()))}orderByValue(){return(0,D.Dv)("Query.orderByValue",0,0,arguments.length),new ti(this.database,So(this._delegate,function wce(){return new Ece}()))}startAt(e=null,t){return(0,D.Dv)("Query.startAt",0,2,arguments.length),new ti(this.database,So(this._delegate,function ace(n=null,e){return l_("startAt","key",e,!0),new lG(n,e)}(e,t)))}startAfter(e=null,t){return(0,D.Dv)("Query.startAfter",0,2,arguments.length),new ti(this.database,So(this._delegate,function uce(n,e){return l_("startAfter","key",e,!0),new lce(n,e)}(e,t)))}endAt(e=null,t){return(0,D.Dv)("Query.endAt",0,2,arguments.length),new ti(this.database,So(this._delegate,function ice(n,e){return l_("endAt","key",e,!0),new aG(n,e)}(e,t)))}endBefore(e=null,t){return(0,D.Dv)("Query.endBefore",0,2,arguments.length),new ti(this.database,So(this._delegate,function oce(n,e){return l_("endBefore","key",e,!0),new sce(n,e)}(e,t)))}equalTo(e,t){return(0,D.Dv)("Query.equalTo",1,2,arguments.length),new ti(this.database,So(this._delegate,function Tce(n,e){return l_("equalTo","key",e,!0),new Ice(n,e)}(e,t)))}toString(){return(0,D.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,D.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,D.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ti))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,D.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,D.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,D.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new xs(this.database,new no(this._delegate._repo,this._delegate._path))}}class xs extends ti{constructor(e,t){super(e,new us(t._repo,t._path,new gI,!1)),this.database=e,this._delegate=t}getKey(){return(0,D.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,D.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new xs(this.database,$c(this._delegate,e))}getParent(){(0,D.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new xs(this.database,e):null}getRoot(){return(0,D.Dv)("Reference.root",0,0,arguments.length),new xs(this.database,this._delegate.root)}set(e,t){(0,D.Dv)("Reference.set",1,2,arguments.length),(0,D.Wj)("Reference.set","onComplete",t,!0);const r=hx(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,D.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,hG("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}to("Reference.update",this._delegate._path),(0,D.Wj)("Reference.update","onComplete",t,!0);const r=nce(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,D.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,D.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function tce(n,e,t){if(to("setWithPriority",n._path),aa("setWithPriority",e,n._path,!1),rx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new D.BH;return sx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,D.Dv)("Reference.remove",0,1,arguments.length),(0,D.Wj)("Reference.remove","onComplete",e,!0);const t=function Jue(n){return to("remove",n._path),hx(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,D.Dv)("Reference.transaction",1,3,arguments.length),(0,D.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,D.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,D.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Uce(n,e,t){var r;if(n=(0,D.m9)(n),to("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new D.BH,a=fx(n,()=>{});return function Wue(n,e,t,r,i,s){Rf(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:cz(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=ax(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{a_("transaction failed: Data returned ",l,o.path),o.status=0;const u=MI(n.transactionQueueTree_,e),d=Bc(u)||[];let f;d.push(o),ex(u,d),"object"==typeof l&&null!==l&&(0,D.r3)(l,".priority")?(f=(0,D.DV)(l,".priority"),(0,D.hu)(o_(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(PI(n.serverSyncTree_,e)||st.EMPTY_NODE).getPriority().val();const m=c_(n),_=Bn(l,f),v=YP(_,a,m);o.currentOutputSnapshotRaw=_,o.currentOutputSnapshotResolved=v,o.currentWriteId=FI(n);const T=zP(n.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);Ps(n.eventQueue_,e,T),LI(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,u,d)=>{let f=null;l?s.reject(l):(f=new Uc(d,new no(n._repo,n._path),pn),s.resolve(new Bce(u,f)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new qce(s.committed,new yu(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,D.Dv)("Reference.setPriority",1,2,arguments.length),(0,D.Wj)("Reference.setPriority","onComplete",t,!0);const r=function ece(n,e){n=(0,D.m9)(n),to("setPriority",n._path),rx("setPriority",e,!1);const t=new D.BH;return sx(n._repo,xn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,D.Dv)("Reference.push",0,2,arguments.length),(0,D.Wj)("Reference.push","onComplete",t,!0);const r=function Xue(n,e){n=(0,D.m9)(n),to("push",n._path),aa("push",e,n._path,!0);const t=jW(n._repo),r=Yue(t),i=$c(n,r),s=$c(n,r);let o;return o=null!=e?hx(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new xs(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new xs(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return to("Reference.onDisconnect",this._delegate._path),new Gce(new JW(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class f_{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Pce,forceLongPolling:xce}}useEmulator(e,t,r={}){!function dG(n,e,t,r={}){(n=(0,D.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&sa("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&sa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zm(zm.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,D.Sg)(r.mockUserToken,n.app.options.projectId);s=new zm(o)}!function bce(n,e,t,r){n.repoInfo_=new hP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,D.Dv)("database.ref",0,1,arguments.length),e instanceof xs){const t=tG(this._delegate,e.toString());return new xs(this,t)}{const t=eG(this._delegate,e);return new xs(this,t)}}refFromURL(e){(0,D.Dv)("database.refFromURL",1,1,arguments.length);const r=tG(this._delegate,e);return new xs(this,r)}goOffline(){return(0,D.Dv)("database.goOffline",0,0,arguments.length),function Mce(n){(n=(0,D.m9)(n))._checkNotDeleted("goOffline"),GW(n._repo)}(this._delegate)}goOnline(){return(0,D.Dv)("database.goOnline",0,0,arguments.length),function Nce(n){(n=(0,D.m9)(n))._checkNotDeleted("goOnline"),function zue(n){n.persistentConnection_&&n.persistentConnection_.resume($W)}(n._repo)}(this._delegate)}}f_.ServerValue={TIMESTAMP:function Lce(){return Fce}(),increment:n=>function Vce(n){return{".sv":{increment:n}}}(n)};var Qce=Object.freeze({__proto__:null,initStandalone:function Kce({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){aP(t);const a=new Ul.H0("database-standalone"),l=new Ul.zt("auth-internal",a);let u;return l.setComponent(new Ul.wA("auth-internal",()=>r,"PRIVATE")),i&&(u=new Ul.zt("app-check-internal",a),u.setComponent(new Ul.wA("app-check-internal",()=>i,"PRIVATE"))),{instance:new f_(gx(n,l,u,e,o),n),namespace:s}}});const Zce=f_.ServerValue;function p_(n,e,t="on",r=vE){return new qe(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(ue(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),E())}function fG(n){return null==n}function pG(n){return"function"==typeof n.set}function gG(n,e){return pG(e)?e:n.ref(e)}function mG(n,e){if(function Xce(n){return"string"==typeof n}(n))return e.stringCase();if(pG(n))return e.firebaseCase();if(function Jce(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function _G(n){return(fG(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yG(n,e,t){return C(...(e=_G(e)).map(i=>p_(n,i,"on",t)))}function vG(n,e){return function(r,i){return mG(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function rde(n){return function(t){return t?mG(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function EG(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function ode(n,e){const{payload:t,prevKey:r,key:i}=e,s=EG(n,i),o=function sde(n,e){if(fG(e))return 0;{const t=EG(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const u={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,u],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function wG(n,e,t){return function ide(n,e,t){return p_(n,"value","once",t).pipe(Ln(r=>{const i=[Ne(r)];return e.forEach(s=>i.push(p_(n,s,"on",t))),C(...i).pipe(Nv(ode,[]))}),function nae(n,e=bn){return n=n??rae,K((t,r)=>{let i,s=!0;t.subscribe(ce(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}())}(n,e=_G(e),t)}function IG(n,e){return function(){return p_(n,"value","on",e)}}!function Yce(n){n.INTERNAL.registerComponent(new Ul.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new f_(i,r)},"PUBLIC").setServiceProps({Reference:xs,Query:ti,Database:f_,DataSnapshot:yu,enableLogging:kce,INTERNAL:Qce,ServerValue:Zce}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.1")}(Bm.Z);const ude=new me("angularfire2.realtimeDatabaseURL"),cde=new me("angularfire2.database.use-emulator");let dde=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,u,d,f,m,_,v,T,A){this.schedulers=a;const M=l,F=sP(t,o,r);u&&sz(F,o,d,m,_,v,f,T),this.database=QH(`${F.name}.database.${i}`,"AngularFireDatabase",F.name,()=>{const P=o.runOutsideAngular(()=>F.database(i||void 0));return M&&P.useEmulator(...M),P},[M])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>gG(this.database,t));let s=i;return r&&(s=r(i)),function ade(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:vG(r,"update"),set:vG(r,"set"),push:i=>r.push(i),remove:rde(r),snapshotChanges:i=>wG(n,i,t).pipe(Bl),stateChanges:i=>yG(n,i,t).pipe(Bl),auditTrail:i=>function ede(n,e,t){return function nde(n,e,t){return function tde(n,e){return p_(n,"value","on",e).pipe(ue(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function eae(...n){const e=ji(n);return K((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)ft(n[l]).subscribe(ce(r,u=>{s[l]=u,!a&&!o[l]&&(o[l]=!0,(a=o.every(bn))&&(o=null))},Ae));t.subscribe(ce(r,l=>{if(a){const u=[l,...s];r.next(e?e(...u):u)}}))})}(e),ue(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function tae(n){return K((e,t)=>{let r=!1,i=0;e.subscribe(ce(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),ue(i=>i.actions))}(n,yG(n,e).pipe(Nv((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Bl),valueChanges:(i,s)=>wG(n,i,t).pipe(ue(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),Bl)}}(s,this)}object(t){return function lde(n,e){return{query:n,snapshotChanges:()=>IG(n,e.schedulers.outsideAngular)().pipe(Bl),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>IG(n,e.schedulers.outsideAngular)().pipe(Bl,ue(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>gG(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(ae(rP),ae(iP,8),ae(ude,8),ae(Ku),ae(Vt),ae(wE),ae(cde,8),ae(oz,8),ae(JH,8),ae(ez,8),ae(tz,8),ae(nz,8),ae(rz,8),ae(iz,8),ae(SA,8))};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),hde=(()=>{class n{constructor(){Bm.Z.registerVersion("angularfire",EE.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vn({type:n});static \u0275inj=Jn({providers:[dde]})}return n})();const fde=["addListener","removeListener"],pde=["addEventListener","removeEventListener"],gde=["on","off"];function jI(n,e,t,r){if(b(t)&&(r=t,t=void 0),r)return jI(n,e,t).pipe(bb(r));const[i,s]=function yde(n){return b(n.addEventListener)&&b(n.removeEventListener)}(n)?pde.map(o=>a=>n[o](e,a,t)):function mde(n){return b(n.addListener)&&b(n.removeListener)}(n)?fde.map(TG(n,e)):function _de(n){return b(n.on)&&b(n.off)}(n)?gde.map(TG(n,e)):[];if(!i&&It(n))return Nt(o=>jI(o,e,t))(ft(n));if(!i)throw new TypeError("Invalid event target");return new qe(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function TG(n,e){return t=>r=>n[t](e,r)}const vu=new qe(Ae),Ede={connector:()=>new z};function CG(n,e=Ede){const{connector:t}=e;return K((r,i)=>{const s=t();ft(n(function vde(n){return new qe(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function bG(n,e){return e?t=>Xp(e.pipe(rs(1),function Tde(){return K((n,e)=>{n.subscribe(ce(e,Ae))})}()),t.pipe(bG(n))):Nt((t,r)=>ft(n(t,r)).pipe(rs(1),ZF(t)))}const g_="Service workers are disabled or not supported by this browser";class HI{constructor(e){if(this.serviceWorker=e,e){const r=jI(e,"controllerchange").pipe(ue(()=>e.controller)),s=Xp(xv(()=>Ne(e.controller)),r);this.worker=s.pipe(Oi(d=>!!d)),this.registration=this.worker.pipe(Ln(()=>e.getRegistration()));const u=jI(e,"message").pipe(ue(d=>d.data)).pipe(Oi(d=>d&&d.type)).pipe(function Ide(n){return n?e=>CG(n)(e):e=>function wde(n,e){const t=b(n)?n:()=>n;return b(e)?CG(e,{connector:t}):r=>new Db(r,t)}(new z)(e)}());u.connect(),this.events=u}else this.worker=this.events=this.registration=function Dde(n){return xv(()=>ah(new Error(n)))}(g_)}postMessage(e,t){return this.worker.pipe(rs(1),kr(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Oi(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(rs(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Oi(t=>t.nonce===e),rs(1),ue(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Sde=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new z,!t.isEnabled)return this.messages=vu,this.notificationClicks=vu,void(this.subscription=vu);this.messages=this.sw.eventsOfType("PUSH").pipe(ue(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ue(i=>i.data)),this.pushManager=this.sw.registration.pipe(ue(i=>i.pushManager));const r=this.pushManager.pipe(Ln(i=>i.getSubscription()));this.subscription=C(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(g_));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(Ln(o=>o.subscribe(r)),rs(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(rs(1),Ln(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(g_))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(HI))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Rde=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=vu,this.available=vu,this.activated=vu,void(this.unrecoverable=vu);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Oi(r=>"VERSION_READY"===r.type),ue(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(g_));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(g_));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(ae(HI))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class mx{}const AG=new me("NGSW_REGISTER_SCRIPT");function Pde(n,e,t,r){return()=>{if(!gF(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[o,...a]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Ne(null);break;case"registerWithDelay":i=DG(+a[0]||0);break;case"registerWhenStable":i=a[0]?C(SG(n),DG(+a[0])):SG(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(Vt).runOutsideAngular(()=>i.pipe(rs(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function DG(n){return Ne(null).pipe(function Ade(n,e=vE){const t=function bde(n=0,e,t=VJ){let r=-1;return null!=e&&(_n(e)?t=e:r=e),new qe(i=>{let s=function Cde(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return bG(()=>t)}(n))}function SG(n){return n.get(Rl).isStable.pipe(Oi(t=>t))}function xde(n,e){return new HI(gF(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let Mde=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:AG,useValue:t},{provide:mx,useValue:r},{provide:HI,useFactory:xde,deps:[mx,Ku]},{provide:Wp,useFactory:Pde,deps:[fi,AG,mx,Ku],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({providers:[Sde,Rde]}),n})();const RG_firebase={apiKey:"AIzaSyDaaL_8chTmePICe53lXAROU_M9szUPIog",authDomain:"fy-nances.firebaseapp.com",databaseURL:"https://fy-nances-default-rtdb.europe-west1.firebasedatabase.app",projectId:"fy-nances",storageBucket:"fy-nances.appspot.com",messagingSenderId:"617745917017",appId:"1:617745917017:web:d0ac0d543e6a8f4d88bd48",measurementId:"G-Z4RD1EELNN"};function PG(n){return new S(3e3,!1)}function fhe(){return typeof window<"u"&&typeof window.document<"u"}function _x(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Eu(n){switch(n.length){case 0:return new Vm;case 1:return n[0];default:return new jH(n)}}function xG(n,e,t,r,i=new Map,s=new Map){const o=[],a=[];let l=-1,u=null;if(r.forEach(d=>{const f=d.get("offset"),m=f==l,_=m&&u||new Map;d.forEach((v,T)=>{let A=T,M=v;if("offset"!==T)switch(A=e.normalizePropertyName(A,o),M){case tP:M=i.get(T);break;case Xa:M=s.get(T);break;default:M=e.normalizeStyleValue(T,A,M,o)}_.set(A,M)}),m||a.push(_),u=_,l=f}),o.length)throw function the(n){return new S(3502,!1)}();return a}function yx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&vx(t,"start",n)));break;case"done":n.onDone(()=>r(t&&vx(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&vx(t,"destroy",n)))}}function vx(n,e,t){const s=Ex(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Ex(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Ms(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function MG(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let wx=(n,e)=>!1,NG=(n,e,t)=>[],kG=null;function Ix(n){const e=n.parentNode||n.host;return e===kG?null:e}(_x()||typeof Element<"u")&&(fhe()?(kG=(()=>document.documentElement)(),wx=(n,e)=>{for(;e;){if(e===n)return!0;e=Ix(e)}return!1}):wx=(n,e)=>n.contains(e),NG=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let jc=null,OG=!1;const FG=wx,LG=NG;let VG=(()=>{class n{validateStyleProperty(t){return function ghe(n){jc||(jc=function mhe(){return typeof document<"u"?document.body:null}()||{},OG=!!jc.style&&"WebkitAppearance"in jc.style);let e=!0;return jc.style&&!function phe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in jc.style,!e&&OG&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in jc.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return FG(t,r)}getParentElement(t){return Ix(t)}query(t,r,i){return LG(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Vm(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Tx=(()=>{class n{}return n.NOOP=new VG,n})();const _he=1e3,Cx="ng-enter",zI="ng-leave",WI="ng-trigger",GI=".ng-trigger",UG="ng-animating",bx=".ng-animating";function tl(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ax(parseFloat(e[1]),e[2])}function Ax(n,e){return"s"===e?n*_he:n}function qI(n,e,t){return n.hasOwnProperty("duration")?n:function vhe(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(PG()),{duration:0,delay:0,easing:""};i=Ax(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=Ax(parseFloat(l),a[4]));const u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function Nde(){return new S(3100,!1)}()),a=!0),s<0&&(e.push(function kde(){return new S(3101,!1)}()),a=!0),a&&e.splice(l,0,PG())}return{duration:i,delay:s,easing:o}}(n,e,t)}function m_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function $G(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function wu(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function HG(n,e,t){return t?e+":"+t+";":""}function zG(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=HG(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=HG(0,The(t),n.style[t]));n.setAttribute("style",e)}function la(n,e,t){n.style&&(e.forEach((r,i)=>{const s=Sx(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),_x()&&zG(n))}function Hc(n,e){n.style&&(e.forEach((t,r)=>{const i=Sx(r);n.style[i]=""}),_x()&&zG(n))}function __(n){return Array.isArray(n)?1==n.length?n[0]:BH(n):n}const Dx=new RegExp("{{\\s*(.+?)\\s*}}","g");function WG(n){let e=[];if("string"==typeof n){let t;for(;t=Dx.exec(n);)e.push(t[1]);Dx.lastIndex=0}return e}function y_(n,e,t){const r=n.toString(),i=r.replace(Dx,(s,o)=>{let a=e[o];return null==a&&(t.push(function Fde(n){return new S(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function KI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Ihe=/-+([a-z0-9])/g;function Sx(n){return n.replace(Ihe,(...e)=>e[1].toUpperCase())}function The(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ns(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Lde(n){return new S(3004,!1)}()}}function GG(n,e){return window.getComputedStyle(n)[e]}const YI="*";function Rhe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Phe(n,e,t){if(":"==n[0]){const l=function xhe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Yde(n){return new S(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Zde(n){return new S(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(qG(i,o));"<"==s[0]&&!(i==YI&&o==YI)&&e.push(qG(o,i))}(r,t,e)):t.push(n),t}const XI=new Set(["true","1"]),JI=new Set(["false","0"]);function qG(n,e){const t=XI.has(n)||JI.has(n),r=XI.has(e)||JI.has(e);return(i,s)=>{let o=n==YI||n==i,a=e==YI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?XI.has(n):JI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?XI.has(e):JI.has(e)),o&&a}}const Mhe=new RegExp("s*:selfs*,?","g");function Rx(n,e,t,r){return new Nhe(n).build(e,t,r)}class Nhe{constructor(e){this._driver=e}build(e,t,r){const i=new Fhe(t);return this._resetContextStyleTimingState(i),Ns(this,__(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Bde(){return new S(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function Ude(){return new S(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{WG(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(KI(s.values()),t.errors.push(function $de(n,e){return new S(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ns(this,__(e.animation),t);return{type:1,matchers:Rhe(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:zc(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ns(this,r,t)),options:zc(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ns(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:zc(e.options)}}visitAnimate(e,t){const r=function Vhe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Px(qI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Px(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=qI(t,e);return Px(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Lm({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=Lm(u)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Xa?r.push(a):t.errors.push(new S(3002,!1)):r.push($G(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(l);let f=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(function Hde(n,e,t,r,i){return new S(3010,!1)}()),f=!1),s=d.startTime),f&&u.set(l,{startTime:s,endTime:i}),t.options&&function whe(n,e,t){const r=e.params||{},i=WG(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Ode(n){return new S(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function zde(){return new S(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,u=0;const d=e.steps.map(M=>{const F=this._makeStyleAst(M,t);let P=null!=F.offset?F.offset:function Lhe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(F.styles),V=0;return null!=P&&(s++,V=F.offset=P),l=l||V<0||V>1,a=a||V<u,u=V,o.push(V),F});l&&t.errors.push(function Wde(){return new S(3012,!1)}()),a&&t.errors.push(function Gde(){return new S(3200,!1)}());const f=e.steps.length;let m=0;s>0&&s<f?t.errors.push(function qde(){return new S(3202,!1)}()):0==s&&(m=1/(f-1));const _=f-1,v=t.currentTime,T=t.currentAnimateTimings,A=T.duration;return d.forEach((M,F)=>{const P=m>0?F==_?1:m*F:o[F],V=P*A;t.currentTime=v+T.delay+V,T.duration=V,this._validateStyleAst(M,t),M.offset=P,r.styles.push(M)}),r}visitReference(e,t){return{type:8,animation:Ns(this,__(e.animation),t),options:zc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:zc(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:zc(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function khe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Mhe,"")),n=n.replace(/@\*/g,GI).replace(/@\w+/g,t=>GI+"-"+t.slice(1)).replace(/:animating/g,bx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Ms(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ns(this,__(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:zc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Kde(){return new S(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:qI(e.timings,t.errors,!0);return{type:12,animation:Ns(this,__(e.animation),t),timings:r,options:null}}}class Fhe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function zc(n){return n?(n=m_(n)).params&&(n.params=function Ohe(n){return n?m_(n):null}(n.params)):n={},n}function Px(n,e,t){return{duration:n,delay:e,easing:t}}function xx(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class eT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const $he=new RegExp(":enter","g"),Hhe=new RegExp(":leave","g");function Mx(n,e,t,r,i,s=new Map,o=new Map,a,l,u=[]){return(new zhe).buildKeyframes(n,e,t,r,i,s,o,a,l,u)}class zhe{buildKeyframes(e,t,r,i,s,o,a,l,u,d=[]){u=u||new eT;const f=new Nx(e,t,u,i,s,d,[]);f.options=l;const m=l.delay?tl(l.delay):0;f.currentTimeline.delayNextStep(m),f.currentTimeline.setStyles([o],null,f.errors,l),Ns(this,r,f);const _=f.timelines.filter(v=>v.containsAnimation());if(_.length&&a.size){let v;for(let T=_.length-1;T>=0;T--){const A=_[T];if(A.element===t){v=A;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,l)}return _.length?_.map(v=>v.buildKeyframes()):[xx(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:tl(y_(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?tl(r.duration):null,a=null!=r.delay?tl(r.delay):null;return 0!==o&&e.forEach(l=>{const u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ns(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=tT);const o=tl(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ns(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?tl(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ns(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return qI(t.params?y_(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?tl(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=tT);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,d)=>{t.currentQueryIndex=d;const f=t.createSubContext(e.options,u);s&&f.delayNextStep(s),u===t.element&&(l=f.currentTimeline),Ns(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const f=d.currentTime;Ns(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}}const tT={};class Nx{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new nT(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=tl(r.duration)),null!=r.delay&&(i.delay=tl(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=y_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Nx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=tT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Whe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace($he,"."+this._enterClassName)).replace(Hhe,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function Qde(n){return new S(3014,!1)}()),a}}class nT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new nT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Xa),this._currentKeyframe.set(t,Xa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Ghe(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Xa)}else wu(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const u=y_(l,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Xa),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const u=wu(a,new Map,this._backFill);u.forEach((d,f)=>{d===tP?e.add(f):d===Xa&&t.add(f)}),r||u.set("offset",l/this.duration),i.push(u)});const s=e.size?KI(e.values()):[],o=t.size?KI(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return xx(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Whe extends nT{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=wu(e[0]);l.set("offset",0),s.push(l);const u=wu(e[0]);u.set("offset",ZG(a)),s.push(u);const d=e.length-1;for(let f=1;f<=d;f++){let m=wu(e[f]);const _=m.get("offset");m.set("offset",ZG((t+_*r)/o)),s.push(m)}r=o,t=0,i="",e=s}return xx(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ZG(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class kx{}const qhe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Khe extends kx{normalizePropertyName(e,t){return Sx(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(qhe.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Vde(n,e){return new S(3005,!1)}())}return o+s}}function YG(n,e,t,r,i,s,o,a,l,u,d,f,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:d,totalTime:f,errors:m}}const Ox={};class XG{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Qhe(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,u,d){const f=[],m=this.ast.options&&this.ast.options.params||Ox,v=this.buildStyles(r,a&&a.params||Ox,f),T=l&&l.params||Ox,A=this.buildStyles(i,T,f),M=new Set,F=new Map,P=new Map,V="void"===i,oe={params:Zhe(T,m),delay:this.ast.options?.delay},le=d?[]:Mx(e,t,this.ast.animation,s,o,v,A,oe,u,f);let Oe=0;if(le.forEach(Wt=>{Oe=Math.max(Wt.duration+Wt.delay,Oe)}),f.length)return YG(t,this._triggerName,r,i,V,v,A,[],[],F,P,Oe,f);le.forEach(Wt=>{const Ut=Wt.element,Rr=Ms(F,Ut,new Set);Wt.preStyleProps.forEach(Un=>Rr.add(Un));const ni=Ms(P,Ut,new Set);Wt.postStyleProps.forEach(Un=>ni.add(Un)),Ut!==t&&M.add(Ut)});const Et=KI(M.values());return YG(t,this._triggerName,r,i,V,v,A,le,Et,F,P,Oe)}}function Zhe(n,e){const t=m_(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Yhe{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=m_(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=y_(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class Jhe{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Yhe(i.style,i.options&&i.options.params||{},r))}),JG(this.states,"true","1"),JG(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new XG(e,i,this.states))}),this.fallbackTransition=function efe(n,e,t){return new XG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function JG(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const tfe=new eT;class nfe{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],s=Rx(this._driver,t,r,i);if(r.length)throw function nhe(n){return new S(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=xG(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=Mx(this._driver,t,s,Cx,zI,new Map,new Map,r,tfe,i),o.forEach(d=>{const f=Ms(a,d.element,new Map);d.postStyleProps.forEach(m=>f.set(m,null))})):(i.push(function rhe(){return new S(3300,!1)}()),o=[]),i.length)throw function ihe(n){return new S(3504,!1)}();a.forEach((d,f)=>{d.forEach((m,_)=>{d.set(_,this._driver.computeStyle(f,_,Xa))})});const u=Eu(o.map(d=>{const f=a.get(d.element);return this._buildPlayer(d,new Map,f)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function she(n){return new S(3301,!1)}();return t}listen(e,t,r,i){const s=Ex(t,"","","");return yx(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const eq="ng-animate-queued",Fx="ng-animate-disabled",afe=[],tq={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lfe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ro="__ng_removed";class Lx{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function hfe(n){return n??null}(r?e.value:e),r){const s=m_(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const v_="void",Vx=new Lx(v_);class ufe{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,io(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function ohe(n,e){return new S(3302,!1)}();if(null==r||0==r.length)throw function ahe(n){return new S(3303,!1)}();if(!function ffe(n){return"start"==n||"done"==n}(r))throw function lhe(n,e){return new S(3400,!1)}();const s=Ms(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Ms(this._engine.statesByElement,e,new Map);return a.has(t)||(io(e,WI),io(e,WI+"-"+t),a.set(t,Vx)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function uhe(n){return new S(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new Bx(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(io(e,WI),io(e,WI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const u=new Lx(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=Vx),u.value!==v_&&l.value===u.value){if(!function mfe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,u.params)){const T=[],A=s.matchStyles(l.value,l.params,T),M=s.matchStyles(u.value,u.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{Hc(e,A),la(e,M)})}return}const m=Ms(this._engine.playersByElement,e,[]);m.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let _=s.matchTransition(l.value,u.value,e,u.params),v=!1;if(!_){if(!i)return;_=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:u,player:o,isFallbackTransition:v}),v||(io(e,eq),o.onStart(()=>{xf(e,eq)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const A=this._engine.playersByElement.get(e);if(A){let M=A.indexOf(o);M>=0&&A.splice(M,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,GI,!0);r.forEach(i=>{if(i[ro])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){const d=this.trigger(e,u,v_,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Eu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,u=r.get(o)||Vx,d=new Lx(v_),f=new Bx(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ro];(!s||s===tq)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){io(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=Ex(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,yx(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class cfe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new ufe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const u=r.indexOf(l);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(rT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!rT(t))return;const s=t[ro];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),io(e,Fx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xf(e,Fx))}removeNode(e,t,r,i){if(rT(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ro]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return rT(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,GI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,bx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Eu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ro];if(t&&t.setForRemoval){if(e[ro]=tq,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Fx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)io(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Eu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function che(n){return new S(3402,!1)}()}_flushAnimations(e,t){const r=new eT,i=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(pe=>{d.add(pe);const De=this.driver.query(pe,".ng-animate-queued",!0);for(let Be=0;Be<De.length;Be++)d.add(De[Be])});const f=this.bodyNode,m=Array.from(this.statesByElement.keys()),_=iq(m,this.collectedEnterElements),v=new Map;let T=0;_.forEach((pe,De)=>{const Be=Cx+T++;v.set(De,Be),pe.forEach(ut=>io(ut,Be))});const A=[],M=new Set,F=new Set;for(let pe=0;pe<this.collectedLeaveElements.length;pe++){const De=this.collectedLeaveElements[pe],Be=De[ro];Be&&Be.setForRemoval&&(A.push(De),M.add(De),Be.hasAnimation?this.driver.query(De,".ng-star-inserted",!0).forEach(ut=>M.add(ut)):F.add(De))}const P=new Map,V=iq(m,Array.from(M));V.forEach((pe,De)=>{const Be=zI+T++;P.set(De,Be),pe.forEach(ut=>io(ut,Be))}),e.push(()=>{_.forEach((pe,De)=>{const Be=v.get(De);pe.forEach(ut=>xf(ut,Be))}),V.forEach((pe,De)=>{const Be=P.get(De);pe.forEach(ut=>xf(ut,Be))}),A.forEach(pe=>{this.processLeaveNode(pe)})});const oe=[],le=[];for(let pe=this._namespaceList.length-1;pe>=0;pe--)this._namespaceList[pe].drainQueuedTransitions(t).forEach(Be=>{const ut=Be.player,$n=Be.element;if(oe.push(ut),this.collectedEnterElements.length){const ur=$n[ro];if(ur&&ur.setForMove){if(ur.previousTriggersValues&&ur.previousTriggersValues.has(Be.triggerName)){const Ui=ur.previousTriggersValues.get(Be.triggerName),Ii=this.statesByElement.get(Be.element);if(Ii&&Ii.has(Be.triggerName)){const Mf=Ii.get(Be.triggerName);Mf.value=Ui,Ii.set(Be.triggerName,Mf)}}return void ut.destroy()}}const cs=!f||!this.driver.containsElement(f,$n),Pr=P.get($n),ks=v.get($n),Gt=this._buildInstruction(Be,r,ks,Pr,cs);if(Gt.errors&&Gt.errors.length)return void le.push(Gt);if(cs)return ut.onStart(()=>Hc($n,Gt.fromStyles)),ut.onDestroy(()=>la($n,Gt.toStyles)),void i.push(ut);if(Be.isFallbackTransition)return ut.onStart(()=>Hc($n,Gt.fromStyles)),ut.onDestroy(()=>la($n,Gt.toStyles)),void i.push(ut);const Ro=[];Gt.timelines.forEach(ur=>{ur.stretchStartingKeyframe=!0,this.disabledNodes.has(ur.element)||Ro.push(ur)}),Gt.timelines=Ro,r.append($n,Gt.timelines),o.push({instruction:Gt,player:ut,element:$n}),Gt.queriedElements.forEach(ur=>Ms(a,ur,[]).push(ut)),Gt.preStyleProps.forEach((ur,Ui)=>{if(ur.size){let Ii=l.get(Ui);Ii||l.set(Ui,Ii=new Set),ur.forEach((Mf,Gc)=>Ii.add(Gc))}}),Gt.postStyleProps.forEach((ur,Ui)=>{let Ii=u.get(Ui);Ii||u.set(Ui,Ii=new Set),ur.forEach((Mf,Gc)=>Ii.add(Gc))})});if(le.length){const pe=[];le.forEach(De=>{pe.push(function dhe(n,e){return new S(3505,!1)}())}),oe.forEach(De=>De.destroy()),this.reportError(pe)}const Oe=new Map,Et=new Map;o.forEach(pe=>{const De=pe.element;r.has(De)&&(Et.set(De,De),this._beforeAnimationBuild(pe.player.namespaceId,pe.instruction,Oe))}),i.forEach(pe=>{const De=pe.element;this._getPreviousPlayers(De,!1,pe.namespaceId,pe.triggerName,null).forEach(ut=>{Ms(Oe,De,[]).push(ut),ut.destroy()})});const Wt=A.filter(pe=>oq(pe,l,u)),Ut=new Map;rq(Ut,this.driver,F,u,Xa).forEach(pe=>{oq(pe,l,u)&&Wt.push(pe)});const ni=new Map;_.forEach((pe,De)=>{rq(ni,this.driver,new Set(pe),l,tP)}),Wt.forEach(pe=>{const De=Ut.get(pe),Be=ni.get(pe);Ut.set(pe,new Map([...Array.from(De?.entries()??[]),...Array.from(Be?.entries()??[])]))});const Un=[],ua=[],ca={};o.forEach(pe=>{const{element:De,player:Be,instruction:ut}=pe;if(r.has(De)){if(d.has(De))return Be.onDestroy(()=>la(De,ut.toStyles)),Be.disabled=!0,Be.overrideTotalTime(ut.totalTime),void i.push(Be);let $n=ca;if(Et.size>1){let Pr=De;const ks=[];for(;Pr=Pr.parentNode;){const Gt=Et.get(Pr);if(Gt){$n=Gt;break}ks.push(Pr)}ks.forEach(Gt=>Et.set(Gt,$n))}const cs=this._buildAnimation(Be.namespaceId,ut,Oe,s,ni,Ut);if(Be.setRealPlayer(cs),$n===ca)Un.push(Be);else{const Pr=this.playersByElement.get($n);Pr&&Pr.length&&(Be.parentPlayer=Eu(Pr)),i.push(Be)}}else Hc(De,ut.fromStyles),Be.onDestroy(()=>la(De,ut.toStyles)),ua.push(Be),d.has(De)&&i.push(Be)}),ua.forEach(pe=>{const De=s.get(pe.element);if(De&&De.length){const Be=Eu(De);pe.setRealPlayer(Be)}}),i.forEach(pe=>{pe.parentPlayer?pe.syncPlayerEvents(pe.parentPlayer):pe.destroy()});for(let pe=0;pe<A.length;pe++){const De=A[pe],Be=De[ro];if(xf(De,zI),Be&&Be.hasAnimation)continue;let ut=[];if(a.size){let cs=a.get(De);cs&&cs.length&&ut.push(...cs);let Pr=this.driver.query(De,bx,!0);for(let ks=0;ks<Pr.length;ks++){let Gt=a.get(Pr[ks]);Gt&&Gt.length&&ut.push(...Gt)}}const $n=ut.filter(cs=>!cs.destroyed);$n.length?pfe(this,De,$n):this.processLeaveNode(De)}return A.length=0,Un.forEach(pe=>{this.players.push(pe),pe.onDone(()=>{pe.destroy();const De=this.players.indexOf(pe);this.players.splice(De,1)}),pe.play()}),Un}elementContainsData(e,t){let r=!1;const i=t[ro];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==v_;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const u=l.element,d=u!==s,f=Ms(r,u,[]);this._getPreviousPlayers(u,d,o,a,t.toState).forEach(_=>{const v=_.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),_.destroy(),f.push(_)})}Hc(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,u=[],d=new Set,f=new Set,m=t.timelines.map(v=>{const T=v.element;d.add(T);const A=T[ro];if(A&&A.removedBeforeQueried)return new Vm(v.duration,v.delay);const M=T!==l,F=function gfe(n){const e=[];return sq(n,e),e}((r.get(T)||afe).map(Oe=>Oe.getRealPlayer())).filter(Oe=>!!Oe.element&&Oe.element===T),P=s.get(T),V=o.get(T),oe=xG(0,this._normalizer,0,v.keyframes,P,V),le=this._buildPlayer(v,oe,F);if(v.subTimeline&&i&&f.add(T),M){const Oe=new Bx(e,a,T);Oe.setRealPlayer(le),u.push(Oe)}return le});u.forEach(v=>{Ms(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function dfe(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,v.element,v))}),d.forEach(v=>io(v,UG));const _=Eu(m);return _.onDestroy(()=>{d.forEach(v=>xf(v,UG)),la(l,t.toStyles)}),f.forEach(v=>{Ms(i,v,[]).push(_)}),_}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Vm(e.duration,e.delay)}}class Bx{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Vm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>yx(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ms(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function rT(n){return n&&1===n.nodeType}function nq(n,e){const t=n.style.display;return n.style.display=e??"none",t}function rq(n,e,t,r,i){const s=[];t.forEach(l=>s.push(nq(l)));const o=[];r.forEach((l,u)=>{const d=new Map;l.forEach(f=>{const m=e.computeStyle(u,f,i);d.set(f,m),(!m||0==m.length)&&(u[ro]=lfe,o.push(u))}),n.set(u,d)});let a=0;return t.forEach(l=>nq(l,s[a++])),o}function iq(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;const u=a.parentNode;return l=t.has(u)?u:i.has(u)?r:o(u),s.set(a,l),l}return e.forEach(a=>{const l=o(a);l!==r&&t.get(l).push(a)}),t}function io(n,e){n.classList?.add(e)}function xf(n,e){n.classList?.remove(e)}function pfe(n,e,t){Eu(t).onDone(()=>n.processLeaveNode(e))}function sq(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof jH?sq(r.players,e):e.push(r)}}function oq(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class iT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new cfe(e,t,r),this._timelineEngine=new nfe(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],u=[],d=Rx(this._driver,s,l,u);if(l.length)throw function ehe(n,e){return new S(3404,!1)}();a=function Xhe(n,e,t){return new Jhe(n,e,t)}(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=MG(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=MG(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let yfe=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&la(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(la(this._element,this._initialStyles),this._endStyles&&(la(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hc(this._element,this._endStyles),this._endStyles=null),la(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Ux(n){let e=null;return n.forEach((t,r)=>{(function vfe(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class aq{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:GG(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Efe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return FG(e,t)}getParentElement(e){return Ix(e)}query(e,t,r){return LG(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const u=new Map,d=o.filter(_=>_ instanceof aq);(function Che(n,e){return 0===n||0===e})(r,i)&&d.forEach(_=>{_.currentSnapshot.forEach((v,T)=>u.set(T,v))});let f=function Ehe(n){return n.length?n[0]instanceof Map?n:n.map(e=>$G(e)):[]}(t).map(_=>wu(_));f=function bhe(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,GG(n,a)))}}return e}(e,f,u);const m=function _fe(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Ux(e[0]),e.length>1&&(r=Ux(e[e.length-1]))):e instanceof Map&&(t=Ux(e)),t||r?new yfe(n,t,r):null}(e,f);return new aq(e,f,l,m)}}let wfe=(()=>{class n extends LH{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:_s.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?BH(t):t;return lq(this._renderer,null,r,"register",[i]),new Ife(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(ae(Dp),ae(_r))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class Ife extends coe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Tfe(this._id,e,t||{},this._renderer)}}class Tfe{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return lq(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function lq(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const uq="@.disabled";let Cfe=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let d=this._rendererCache.get(s);return d||(d=new cq("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,d)),d}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return r.data.animation.forEach(l),new bfe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(ae(Dp),ae(iT),ae(Vt))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class cq{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==uq?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class bfe extends cq{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==uq?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Afe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Dfe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let Sfe=(()=>{class n extends iT{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(ae(_r),ae(Tx),ae(kx),ae(Rl))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const dq=[{provide:LH,useClass:wfe},{provide:kx,useFactory:function Rfe(){return new Khe}},{provide:iT,useClass:Sfe},{provide:Dp,useFactory:function Pfe(n,e,t){return new Cfe(n,e,t)},deps:[Rv,iT,Vt]}],$x=[{provide:Tx,useFactory:()=>new Efe},{provide:g1,useValue:"BrowserAnimations"},...dq],hq=[{provide:Tx,useClass:VG},{provide:g1,useValue:"NoopAnimations"},...dq];let xfe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?hq:$x}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=Jn({providers:$x,imports:[VF]}),n})(),Mfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=vn({type:n,bootstrap:[Hoe]});static#n=this.\u0275inj=Jn({providers:[kR],imports:[xfe,VF,cX,Boe,FH,uoe,QJ(()=>ZJ(RG_firebase)),ose(()=>function _ie(n,e){const t="object"==typeof n?n:(0,Ar.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Ar._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,D.P0)("firestore");s&&function hie(n,e,t,r={}){var i;const s=(n=St(n,Cm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Lr.MOCK_USER;else{a=(0,D.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ie(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Lr(u)}n._authCredentials=new lte(new oB(a,l))}}(i,...s)}return i}()),hde,Noe.forRoot(),Mde.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]})}return n})();IQ().bootstrapModule(Mfe).catch(n=>console.error(n))},942:(Os,Qn,Ve)=>{Ve.d(Qn,{Z:()=>Zn});var b=Ve(90),q=Ve(859),k=Ve(881),Se=Ve(877);class Rt{constructor(We,Ge){this._delegate=We,this.firebase=Ge,(0,k._addComponent)(We,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(We,Ge=k._DEFAULT_ENTRY_NAME){var cr;this._delegate.checkDestroyed();const mn=this._delegate.container.getProvider(We);return!mn.isInitialized()&&"EXPLICIT"===(null===(cr=mn.getComponent())||void 0===cr?void 0:cr.instantiationMode)&&mn.initialize(),mn.getImmediate({identifier:Ge})}_removeServiceInstance(We,Ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Ge)}_addComponent(We){(0,k._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,k._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Mn=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Ct(){const _t=function qt(_t){const We={},Ge={__esModule:!0,initializeApp:function ht(ot,te={}){const wt=k.initializeApp(ot,te);if((0,b.r3)(We,wt.name))return We[wt.name];const Jt=new _t(wt,Ge);return We[wt.name]=Jt,Jt},app:mn,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ti(ot){const te=ot.name,wt=te.replace("-compat","");if(k._registerComponent(ot)&&"PUBLIC"===ot.type){const Jt=(Cn=mn())=>{if("function"!=typeof Cn[wt])throw Mn.create("invalid-app-argument",{appName:te});return Cn[wt]()};void 0!==ot.serviceProps&&(0,b.ZB)(Jt,ot.serviceProps),Ge[wt]=Jt,_t.prototype[wt]=function(...Cn){return this._getService.bind(this,te).apply(this,ot.multipleInstances?Cn:[])}}return"PUBLIC"===ot.type?Ge[wt]:null},removeApp:function cr(ot){delete We[ot]},useAsService:function jn(ot,te){return"serverAuth"===te?null:te},modularAPIs:k}};function mn(ot){if(!(0,b.r3)(We,ot=ot||k._DEFAULT_ENTRY_NAME))throw Mn.create("no-app",{appName:ot});return We[ot]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function $t(){return Object.keys(We).map(ot=>We[ot])}}),mn.App=_t,Ge}(Rt);return _t.INTERNAL=Object.assign(Object.assign({},_t.INTERNAL),{createFirebaseNamespace:Ct,extendNamespace:function We(Ge){(0,b.ZB)(_t,Ge)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),_t}(),se=new Se.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _t=self.firebase.SDK_VERSION;_t&&_t.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Zn=Q;!function Pt(_t){(0,k.registerVersion)("@firebase/app-compat","0.2.23",_t)}()},881:(Os,Qn,Ve)=>{Ve.r(Qn),Ve.d(Qn,{FirebaseError:()=>Se.ZR,SDK_VERSION:()=>gs,_DEFAULT_ENTRY_NAME:()=>fs,_addComponent:()=>bi,_addOrOverwriteComponent:()=>Ai,_apps:()=>wr,_clearComponents:()=>An,_components:()=>Ci,_getProvider:()=>Nt,_registerComponent:()=>Ir,_removeServiceInstance:()=>si,deleteApp:()=>zn,getApp:()=>ms,getApps:()=>Xn,initializeApp:()=>ji,onLog:()=>nl,registerVersion:()=>Di,setLogLevel:()=>Po});var b=Ve(861),q=Ve(859),k=Ve(877),Se=Ve(90);const Rt=(G,S)=>S.some(ee=>G instanceof ee);let an,Mn;const Q=new WeakMap,se=new WeakMap,Ae=new WeakMap,Ye=new WeakMap,Pt=new WeakMap;let We={get(G,S,ee){if(G instanceof IDBTransaction){if("done"===S)return se.get(G);if("objectStoreNames"===S)return G.objectStoreNames||Ae.get(G);if("store"===S)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return ht(G[S])},set:(G,S,ee)=>(G[S]=ee,!0),has:(G,S)=>G instanceof IDBTransaction&&("done"===S||"store"===S)||S in G};function mn(G){return"function"==typeof G?function cr(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ct(){return Mn||(Mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...S){return G.apply($t(this),S),ht(Q.get(this))}:function(...S){return ht(G.apply($t(this),S))}:function(S,...ee){const ne=G.call($t(this),S,...ee);return Ae.set(ne,S.sort?S.sort():[S]),ht(ne)}}(G):(G instanceof IDBTransaction&&function _t(G){if(se.has(G))return;const S=new Promise((ee,ne)=>{const ve=()=>{G.removeEventListener("complete",dt),G.removeEventListener("error",kt),G.removeEventListener("abort",kt)},dt=()=>{ee(),ve()},kt=()=>{ne(G.error||new DOMException("AbortError","AbortError")),ve()};G.addEventListener("complete",dt),G.addEventListener("error",kt),G.addEventListener("abort",kt)});se.set(G,S)}(G),Rt(G,function qt(){return an||(an=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,We):G)}function ht(G){if(G instanceof IDBRequest)return function Zn(G){const S=new Promise((ee,ne)=>{const ve=()=>{G.removeEventListener("success",dt),G.removeEventListener("error",kt)},dt=()=>{ee(ht(G.result)),ve()},kt=()=>{ne(G.error),ve()};G.addEventListener("success",dt),G.addEventListener("error",kt)});return S.then(ee=>{ee instanceof IDBCursor&&Q.set(ee,G)}).catch(()=>{}),Pt.set(S,G),S}(G);if(Ye.has(G))return Ye.get(G);const S=mn(G);return S!==G&&(Ye.set(G,S),Pt.set(S,G)),S}const $t=G=>Pt.get(G),ot=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],wt=new Map;function Jt(G,S){if(!(G instanceof IDBDatabase)||S in G||"string"!=typeof S)return;if(wt.get(S))return wt.get(S);const ee=S.replace(/FromIndex$/,""),ne=S!==ee,ve=te.includes(ee);if(!(ee in(ne?IDBIndex:IDBObjectStore).prototype)||!ve&&!ot.includes(ee))return;const dt=function(){var kt=(0,b.Z)(function*(fr,...yn){const Nn=this.transaction(fr,ve?"readwrite":"readonly");let Kc=Nn.store;return ne&&(Kc=Kc.index(yn.shift())),(yield Promise.all([Kc[ee](...yn),ve&&Nn.done]))[0]});return function(yn){return kt.apply(this,arguments)}}();return wt.set(S,dt),dt}!function Ge(G){We=G(We)}(G=>({...G,get:(S,ee,ne)=>Jt(S,ee)||G.get(S,ee,ne),has:(S,ee)=>!!Jt(S,ee)||G.has(S,ee)}));class Cn{constructor(S){this.container=S}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function bn(G){return"VERSION"===G.getComponent()?.type}(ee)){const ne=ee.getImmediate();return`${ne.library}/${ne.version}`}return null}).filter(ee=>ee).join(" ")}}const ds="@firebase/app",qe=new k.Yd("@firebase/app"),fs="[DEFAULT]",ps={[ds]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wr=new Map,Ci=new Map;function bi(G,S){try{G.container.addComponent(S)}catch(ee){qe.debug(`Component ${S.name} failed to register with FirebaseApp ${G.name}`,ee)}}function Ai(G,S){G.container.addOrOverwriteComponent(S)}function Ir(G){const S=G.name;if(Ci.has(S))return qe.debug(`There were multiple attempts to register component ${S}.`),!1;Ci.set(S,G);for(const ee of wr.values())bi(ee,G);return!0}function Nt(G,S){const ee=G.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),G.container.getProvider(S)}function si(G,S,ee=fs){Nt(G,S).clearInstance(ee)}function An(){Ci.clear()}const cn=new Se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _n{constructor(S,ee,ne){this._isDeleted=!1,this._options=Object.assign({},S),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=ne,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this.checkDestroyed(),this._automaticDataCollectionEnabled=S}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(S){this._isDeleted=S}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}const gs="10.6.0";function ji(G,S={}){let ee=G;"object"!=typeof S&&(S={name:S});const ne=Object.assign({name:fs,automaticDataCollectionEnabled:!1},S),ve=ne.name;if("string"!=typeof ve||!ve)throw cn.create("bad-app-name",{appName:String(ve)});if(ee||(ee=(0,Se.aH)()),!ee)throw cn.create("no-options");const dt=wr.get(ve);if(dt){if((0,Se.vZ)(ee,dt.options)&&(0,Se.vZ)(ne,dt.config))return dt;throw cn.create("duplicate-app",{appName:ve})}const kt=new q.H0(ve);for(const yn of Ci.values())kt.addComponent(yn);const fr=new _n(ee,ne,kt);return wr.set(ve,fr),fr}function ms(G=fs){const S=wr.get(G);if(!S&&G===fs&&(0,Se.aH)())return ji();if(!S)throw cn.create("no-app",{appName:G});return S}function Xn(){return Array.from(wr.values())}function zn(G){return xr.apply(this,arguments)}function xr(){return(xr=(0,b.Z)(function*(G){const S=G.name;wr.has(S)&&(wr.delete(S),yield Promise.all(G.container.getProviders().map(ee=>ee.delete())),G.isDeleted=!0)})).apply(this,arguments)}function Di(G,S,ee){var ne;let ve=null!==(ne=ps[G])&&void 0!==ne?ne:G;ee&&(ve+=`-${ee}`);const dt=ve.match(/\s|\//),kt=S.match(/\s|\//);if(dt||kt){const fr=[`Unable to register library "${ve}" with version "${S}":`];return dt&&fr.push(`library name "${ve}" contains illegal characters (whitespace or "/")`),dt&&kt&&fr.push("and"),kt&&fr.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void qe.warn(fr.join(" "))}Ir(new q.wA(`${ve}-version`,()=>({library:ve,version:S}),"VERSION"))}function nl(G,S){if(null!==G&&"function"!=typeof G)throw cn.create("invalid-log-argument");(0,k.Am)(G,S)}function Po(G){(0,k.Ub)(G)}const da="firebase-heartbeat-database",Bs=1,x="firebase-heartbeat-store";let R=null;function w(){return R||(R=function Ti(G,S,{blocked:ee,upgrade:ne,blocking:ve,terminated:dt}={}){const kt=indexedDB.open(G,S),fr=ht(kt);return ne&&kt.addEventListener("upgradeneeded",yn=>{ne(ht(kt.result),yn.oldVersion,yn.newVersion,ht(kt.transaction),yn)}),ee&&kt.addEventListener("blocked",yn=>ee(yn.oldVersion,yn.newVersion,yn)),fr.then(yn=>{dt&&yn.addEventListener("close",()=>dt()),ve&&yn.addEventListener("versionchange",Nn=>ve(Nn.oldVersion,Nn.newVersion,Nn))}).catch(()=>{}),fr}(da,Bs,{upgrade:(G,S)=>{0===S&&G.createObjectStore(x)}}).catch(G=>{throw cn.create("idb-open",{originalErrorMessage:G.message})})),R}function E(){return(E=(0,b.Z)(function*(G){try{return yield(yield w()).transaction(x).objectStore(x).get(Te(G))}catch(S){if(S instanceof Se.ZR)qe.warn(S.message);else{const ee=cn.create("idb-get",{originalErrorMessage:S?.message});qe.warn(ee.message)}}})).apply(this,arguments)}function O(G,S){return B.apply(this,arguments)}function B(){return(B=(0,b.Z)(function*(G,S){try{const ne=(yield w()).transaction(x,"readwrite");yield ne.objectStore(x).put(S,Te(G)),yield ne.done}catch(ee){if(ee instanceof Se.ZR)qe.warn(ee.message);else{const ne=cn.create("idb-set",{originalErrorMessage:ee?.message});qe.warn(ne.message)}}})).apply(this,arguments)}function Te(G){return`${G.name}!${G.options.appId}`}class bt{constructor(S){this.container=S,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new Xe(ee),this._heartbeatsCachePromise=this._storage.read().then(ne=>(this._heartbeatsCache=ne,ne))}triggerHeartbeat(){var S=this;return(0,b.Z)(function*(){var ee;const ve=S.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=ye();if(null==(null===(ee=S._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)&&(S._heartbeatsCache=yield S._heartbeatsCachePromise),S._heartbeatsCache.lastSentHeartbeatDate!==dt&&!S._heartbeatsCache.heartbeats.some(kt=>kt.date===dt))return S._heartbeatsCache.heartbeats.push({date:dt,agent:ve}),S._heartbeatsCache.heartbeats=S._heartbeatsCache.heartbeats.filter(kt=>{const fr=new Date(kt.date).valueOf();return Date.now()-fr<=2592e6}),S._storage.overwrite(S._heartbeatsCache)})()}getHeartbeatsHeader(){var S=this;return(0,b.Z)(function*(){var ee;if(null===S._heartbeatsCache&&(yield S._heartbeatsCachePromise),null==(null===(ee=S._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===S._heartbeatsCache.heartbeats.length)return"";const ne=ye(),{heartbeatsToSend:ve,unsentEntries:dt}=function fe(G,S=1024){const ee=[];let ne=G.slice();for(const ve of G){const dt=ee.find(kt=>kt.agent===ve.agent);if(dt){if(dt.dates.push(ve.date),hr(ee)>S){dt.dates.pop();break}}else if(ee.push({agent:ve.agent,dates:[ve.date]}),hr(ee)>S){ee.pop();break}ne=ne.slice(1)}return{heartbeatsToSend:ee,unsentEntries:ne}}(S._heartbeatsCache.heartbeats),kt=(0,Se.L)(JSON.stringify({version:2,heartbeats:ve}));return S._heartbeatsCache.lastSentHeartbeatDate=ne,dt.length>0?(S._heartbeatsCache.heartbeats=dt,yield S._storage.overwrite(S._heartbeatsCache)):(S._heartbeatsCache.heartbeats=[],S._storage.overwrite(S._heartbeatsCache)),kt})()}}function ye(){return(new Date).toISOString().substring(0,10)}class Xe{constructor(S){this.app=S,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,Se.hl)()&&(0,Se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var S=this;return(0,b.Z)(function*(){return(yield S._canUseIndexedDBPromise)&&(yield function C(G){return E.apply(this,arguments)}(S.app))||{heartbeats:[]}})()}overwrite(S){var ee=this;return(0,b.Z)(function*(){var ne;if(yield ee._canUseIndexedDBPromise){const dt=yield ee.read();return O(ee.app,{lastSentHeartbeatDate:null!==(ne=S.lastSentHeartbeatDate)&&void 0!==ne?ne:dt.lastSentHeartbeatDate,heartbeats:S.heartbeats})}})()}add(S){var ee=this;return(0,b.Z)(function*(){var ne;if(yield ee._canUseIndexedDBPromise){const dt=yield ee.read();return O(ee.app,{lastSentHeartbeatDate:null!==(ne=S.lastSentHeartbeatDate)&&void 0!==ne?ne:dt.lastSentHeartbeatDate,heartbeats:[...dt.heartbeats,...S.heartbeats]})}})()}}function hr(G){return(0,Se.L)(JSON.stringify({version:2,heartbeats:G})).length}!function rl(G){Ir(new q.wA("platform-logger",S=>new Cn(S),"PRIVATE")),Ir(new q.wA("heartbeat",S=>new bt(S),"PRIVATE")),Di(ds,"0.9.23",G),Di(ds,"0.9.23","esm2017"),Di("fire-js","")}("")},859:(Os,Qn,Ve)=>{Ve.d(Qn,{H0:()=>qt,wA:()=>k,zt:()=>Rt});var b=Ve(861),q=Ve(90);class k{constructor(Q,se,Ae){this.name=Q,this.instanceFactory=se,this.type=Ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Se="[DEFAULT]";class Rt{constructor(Q,se){this.name=Q,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const se=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(se)){const Ae=new q.BH;if(this.instancesDeferred.set(se,Ae),this.isInitialized(se)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:se});Ye&&Ae.resolve(Ye)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(Q){var se;const Ae=this.normalizeInstanceIdentifier(Q?.identifier),Ye=null!==(se=Q?.optional)&&void 0!==se&&se;if(!this.isInitialized(Ae)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ae})}catch(Pt){if(Ye)return null;throw Pt}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function Mn(Ct){return"EAGER"===Ct.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Se})}catch{}for(const[se,Ae]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(se);try{const Pt=this.getOrInitializeService({instanceIdentifier:Ye});Ae.resolve(Pt)}catch{}}}}clearInstance(Q=Se){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,b.Z)(function*(){const se=Array.from(Q.instances.values());yield Promise.all([...se.filter(Ae=>"INTERNAL"in Ae).map(Ae=>Ae.INTERNAL.delete()),...se.filter(Ae=>"_delete"in Ae).map(Ae=>Ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Se){return this.instances.has(Q)}getOptions(Q=Se){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:se={}}=Q,Ae=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(Ae))throw Error(`${this.name}(${Ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:Ae,options:se});for(const[Pt,Zn]of this.instancesDeferred.entries())Ae===this.normalizeInstanceIdentifier(Pt)&&Zn.resolve(Ye);return Ye}onInit(Q,se){var Ae;const Ye=this.normalizeInstanceIdentifier(se),Pt=null!==(Ae=this.onInitCallbacks.get(Ye))&&void 0!==Ae?Ae:new Set;Pt.add(Q),this.onInitCallbacks.set(Ye,Pt);const Zn=this.instances.get(Ye);return Zn&&Q(Zn,Ye),()=>{Pt.delete(Q)}}invokeOnInitCallbacks(Q,se){const Ae=this.onInitCallbacks.get(se);if(Ae)for(const Ye of Ae)try{Ye(Q,se)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:se={}}){let Ae=this.instances.get(Q);if(!Ae&&this.component&&(Ae=this.component.instanceFactory(this.container,{instanceIdentifier:(Ct=Q,Ct===Se?void 0:Ct),options:se}),this.instances.set(Q,Ae),this.instancesOptions.set(Q,se),this.invokeOnInitCallbacks(Ae,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,Ae)}catch{}var Ct;return Ae||null}normalizeInstanceIdentifier(Q=Se){return this.component?this.component.multipleInstances?Q:Se:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qt{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const se=this.getProvider(Q.name);if(se.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);se.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const se=new Rt(Q,this);return this.providers.set(Q,se),se}getProviders(){return Array.from(this.providers.values())}}},877:(Os,Qn,Ve)=>{Ve.d(Qn,{Am:()=>Ct,Ub:()=>qt,Yd:()=>Mn,in:()=>q});const b=[];var q=(()=>{return(Q=q||(q={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",q;var Q})();const k={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Se=q.INFO,Rt={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},an=(Q,se,...Ae)=>{if(se<Q.logLevel)return;const Ye=(new Date).toISOString(),Pt=Rt[se];if(!Pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Pt](`[${Ye}]  ${Q.name}:`,...Ae)};class Mn{constructor(se){this.name=se,this._logLevel=Se,this._logHandler=an,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in q))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?k[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...se),this._logHandler(this,q.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...se),this._logHandler(this,q.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,q.INFO,...se),this._logHandler(this,q.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,q.WARN,...se),this._logHandler(this,q.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...se),this._logHandler(this,q.ERROR,...se)}}function qt(Q){b.forEach(se=>{se.setLogLevel(Q)})}function Ct(Q,se){for(const Ae of b){let Ye=null;se&&se.level&&(Ye=k[se.level]),Ae.userLogHandler=null===Q?null:(Pt,Zn,..._t)=>{const We=_t.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch{return null}}).filter(Ge=>Ge).join(" ");Zn>=(Ye??Pt.logLevel)&&Q({level:q[Zn].toLowerCase(),message:We,args:_t,type:Pt.name})}}}},568:(Os,Qn,Ve)=>{Ve.r(Qn);var b=Ve(861),q=Ve(942),k=Ve(808),Se=Ve(90),Mn=(Ve(881),Ve(877),Ve(859));function qt(){return window}const Ct=2e3;function se(){return se=(0,b.Z)(function*(w,C,E){var O;const{BuildInfo:B}=qt();(0,k.au)(C.sessionId,"AuthEvent did not contain a session ID");const Te=yield function Ge(w){return cr.apply(this,arguments)}(C.sessionId),ge={};return(0,k.av)()?ge.ibi=B.packageName:(0,k.aw)()?ge.apn=B.packageName:(0,k.ax)(w,"operation-not-supported-in-this-environment"),B.displayName&&(ge.appDisplayName=B.displayName),ge.sessionId=Te,(0,k.ay)(w,E,C.type,void 0,null!==(O=C.eventId)&&void 0!==O?O:void 0,ge)}),se.apply(this,arguments)}function Ye(){return(Ye=(0,b.Z)(function*(w){const{BuildInfo:C}=qt(),E={};(0,k.av)()?E.iosBundleId=C.packageName:(0,k.aw)()?E.androidPackageName=C.packageName:(0,k.ax)(w,"operation-not-supported-in-this-environment"),yield(0,k.az)(w,E)})).apply(this,arguments)}function _t(){return(_t=(0,b.Z)(function*(w,C,E){const{cordova:O}=qt();let B=()=>{};try{yield new Promise((Te,ge)=>{let $e=null;function bt(){var Xe;Te();const hr=null===(Xe=O.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof hr&&hr(),"function"==typeof E?.close&&E.close()}function ye(){$e||($e=window.setTimeout(()=>{ge((0,k.aB)(w,"redirect-cancelled-by-user"))},Ct))}function fe(){"visible"===document?.visibilityState&&ye()}C.addPassiveListener(bt),document.addEventListener("resume",ye,!1),(0,k.aw)()&&document.addEventListener("visibilitychange",fe,!1),B=()=>{C.removePassiveListener(bt),document.removeEventListener("resume",ye,!1),document.removeEventListener("visibilitychange",fe,!1),$e&&window.clearTimeout($e)}})}finally{B()}})).apply(this,arguments)}function cr(){return(cr=(0,b.Z)(function*(w){const C=function mn(w){if((0,k.au)(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const C=new ArrayBuffer(w.length),E=new Uint8Array(C);for(let O=0;O<w.length;O++)E[O]=w.charCodeAt(O);return E}(w),E=yield crypto.subtle.digest("SHA-256",C);return Array.from(new Uint8Array(E)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ht=20;class $t extends k.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(C=>{this.resolveInialized=C})}addPassiveListener(C){this.passiveListeners.add(C)}removePassiveListener(C){this.passiveListeners.delete(C)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(C){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(C)),super.onEvent(C)}initialized(){var C=this;return(0,b.Z)(function*(){yield C.initPromise})()}}function ot(w){return te.apply(this,arguments)}function te(){return(te=(0,b.Z)(function*(w){const C=yield Cn()._get(bn(w));return C&&(yield Cn()._remove(bn(w))),C})).apply(this,arguments)}function Jt(){const w=[],C="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<ht;E++){const O=Math.floor(Math.random()*C.length);w.push(C.charAt(O))}return w.join("")}function Cn(){return(0,k.aE)(k.b)}function bn(w){return(0,k.aF)("authEvent",w.config.apiKey,w.name)}function qe(w){if(!w?.includes("?"))return{};const[C,...E]=w.split("?");return(0,Se.zd)(E.join("?"))}const $=class so{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aG,this._overrideRedirectResult=k.aH}_initialize(C){var E=this;return(0,b.Z)(function*(){const O=C._key();let B=E.eventManagers.get(O);return B||(B=new $t(C),E.eventManagers.set(O,B),E.attachCallbackListeners(C,B)),B})()}_openPopup(C){(0,k.ax)(C,"operation-not-supported-in-this-environment")}_openRedirect(C,E,O,B){var Te=this;return(0,b.Z)(function*(){!function We(w){var C,E,O,B,Te,ge,$e,bt,ye,fe;const Xe=qt();(0,k.aC)("function"==typeof(null===(C=Xe?.universalLinks)||void 0===C?void 0:C.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aC)(typeof(null===(E=Xe?.BuildInfo)||void 0===E?void 0:E.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aC)("function"==typeof(null===(Te=null===(B=null===(O=Xe?.cordova)||void 0===O?void 0:O.plugins)||void 0===B?void 0:B.browsertab)||void 0===Te?void 0:Te.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aC)("function"==typeof(null===(bt=null===($e=null===(ge=Xe?.cordova)||void 0===ge?void 0:ge.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===bt?void 0:bt.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aC)("function"==typeof(null===(fe=null===(ye=Xe?.cordova)||void 0===ye?void 0:ye.InAppBrowser)||void 0===fe?void 0:fe.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(C);const ge=yield Te._initialize(C);yield ge.initialized(),ge.resetRedirect(),(0,k.aI)(),yield Te._originValidation(C);const $e=function Ti(w,C,E=null){return{type:C,eventId:E,urlResponse:null,sessionId:Jt(),postBody:null,tenantId:w.tenantId,error:(0,k.aB)(w,"no-auth-event")}}(C,O,B);yield function jn(w,C){return Cn()._set(bn(w),C)}(C,$e);const bt=yield function Q(w,C,E){return se.apply(this,arguments)}(C,$e,E),ye=yield function Pt(w){const{cordova:C}=qt();return new Promise(E=>{C.plugins.browsertab.isAvailable(O=>{let B=null;O?C.plugins.browsertab.openUrl(w):B=C.InAppBrowser.open(w,(0,k.aA)()?"_blank":"_system","location=yes"),E(B)})})}(bt);return function Zn(w,C,E){return _t.apply(this,arguments)}(C,ge,ye)})()}_isIframeWebStorageSupported(C,E){throw new Error("Method not implemented.")}_originValidation(C){const E=C._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Ae(w){return Ye.apply(this,arguments)}(C)),this.originValidationPromises[E]}attachCallbackListeners(C,E){const{universalLinks:O,handleOpenURL:B,BuildInfo:Te}=qt(),ge=setTimeout((0,b.Z)(function*(){yield ot(C),E.onEvent(W())}),500),$e=function(){var fe=(0,b.Z)(function*(Xe){clearTimeout(ge);const hr=yield ot(C);let rl=null;hr&&Xe?.url&&(rl=function wt(w,C){var E,O;const B=function hs(w){const C=qe(w),E=C.link?decodeURIComponent(C.link):void 0,O=qe(E).link,B=C.deep_link_id?decodeURIComponent(C.deep_link_id):void 0;return qe(B).link||B||O||E||w}(C);if(B.includes("/__/auth/callback")){const Te=qe(B),ge=Te.firebaseError?function ds(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(Te.firebaseError)):null,$e=null===(O=null===(E=ge?.code)||void 0===E?void 0:E.split("auth/"))||void 0===O?void 0:O[1],bt=$e?(0,k.aB)($e):null;return bt?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:bt,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:B,postBody:null}}return null}(hr,Xe.url)),E.onEvent(rl||W())});return function(hr){return fe.apply(this,arguments)}}();typeof O<"u"&&"function"==typeof O.subscribe&&O.subscribe(null,$e);const bt=B,ye=`${Te.packageName.toLowerCase()}://`;qt().handleOpenURL=function(){var fe=(0,b.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(ye)&&$e({url:Xe}),"function"==typeof bt)try{bt(Xe)}catch(hr){console.error(hr)}});return function(Xe){return fe.apply(this,arguments)}}()}};function W(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aB)("no-auth-event")}}const K=1e3;function ce(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function ue(w=(0,Se.z$)()){return!("file:"!==ce()&&"ionic:"!==ce()&&"capacitor:"!==ce()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function un(){try{const w=self.localStorage,C=k.aN();if(w)return w.setItem(C,"1"),w.removeItem(C),!function Kt(w=(0,Se.z$)()){return function It(){return(0,Se.w1)()&&11===document?.documentMode}()||function ln(w=(0,Se.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Se.hl)()}catch{return Hn()&&(0,Se.hl)()}return!1}function Hn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yn(){return(function ct(){return"http:"===ce()||"https:"===ce()}()||(0,Se.ru)()||ue())&&!function Me(){return(0,Se.b$)()||(0,Se.UG)()}()&&un()&&!Hn()}function dr(){return ue()&&typeof document<"u"}function $i(){return($i=(0,b.Z)(function*(){return!!dr()&&new Promise(w=>{const C=setTimeout(()=>{w(!1)},K);document.addEventListener("deviceready",()=>{clearTimeout(C),w(!0)})})})).apply(this,arguments)}const ft={LOCAL:"local",NONE:"none",SESSION:"session"},Ls=k.aC,Vs="persistence";function ps(w){return wr.apply(this,arguments)}function wr(){return(wr=(0,b.Z)(function*(w){yield w._initializationPromise;const C=bi(),E=k.aF(Vs,w.config.apiKey,w.name);C&&C.setItem(E,w._getPersistence())})).apply(this,arguments)}function bi(){var w;try{return(null===(w=function Fs(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const Ai=k.aC;class Ir{constructor(){this.browserResolver=k.aE(k.k),this.cordovaResolver=k.aE($),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aG,this._overrideRedirectResult=k.aH}_initialize(C){var E=this;return(0,b.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(C)})()}_openPopup(C,E,O,B){var Te=this;return(0,b.Z)(function*(){return yield Te.selectUnderlyingResolver(),Te.assertedUnderlyingResolver._openPopup(C,E,O,B)})()}_openRedirect(C,E,O,B){var Te=this;return(0,b.Z)(function*(){return yield Te.selectUnderlyingResolver(),Te.assertedUnderlyingResolver._openRedirect(C,E,O,B)})()}_isIframeWebStorageSupported(C,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(C,E)}_originValidation(C){return this.assertedUnderlyingResolver._originValidation(C)}get _shouldInitProactively(){return dr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ai(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var C=this;return(0,b.Z)(function*(){if(C.underlyingResolver)return;const E=yield function ii(){return $i.apply(this,arguments)}();C.underlyingResolver=E?C.cordovaResolver:C.browserResolver})()}}function Nt(w){return w.unwrap()}function An(w){return cn(w)}function cn(w){const{_tokenResponse:C}=w instanceof Se.ZR?w.customData:w;if(!C)return null;if(!(w instanceof Se.ZR)&&"temporaryProof"in C&&"phoneNumber"in C)return k.P.credentialFromResult(w);const E=C.providerId;if(!E||E===k.p.PASSWORD)return null;let O;switch(E){case k.p.GOOGLE:O=k.X;break;case k.p.FACEBOOK:O=k.W;break;case k.p.GITHUB:O=k.Y;break;case k.p.TWITTER:O=k.$;break;default:const{oauthIdToken:B,oauthAccessToken:Te,oauthTokenSecret:ge,pendingToken:$e,nonce:bt}=C;return Te||ge||B||$e?$e?E.startsWith("saml.")?k.aQ._create(E,$e):k.N._fromParams({providerId:E,signInMethod:E,pendingToken:$e,idToken:B,accessToken:Te}):new k.Z(E).credential({idToken:B,accessToken:Te,rawNonce:bt}):null}return w instanceof Se.ZR?O.credentialFromError(w):O.credentialFromResult(w)}function _n(w,C){return C.catch(E=>{throw E instanceof Se.ZR&&function Iu(w,C){var E;const O=null===(E=C.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===C?.code)C.resolver=new ms(w,k.as(w,C));else if(O){const B=cn(C),Te=C;B&&(Te.credential=B,Te.tenantId=O.tenantId||void 0,Te.email=O.email||void 0,Te.phoneNumber=O.phoneNumber||void 0)}}(w,E),E}).then(E=>{const B=E.user;return{operationType:E.operationType,credential:An(E),additionalUserInfo:k.aq(E),user:Xn.getOrCreate(B)}})}function gs(w,C){return ji.apply(this,arguments)}function ji(){return(ji=(0,b.Z)(function*(w,C){const E=yield C;return{verificationId:E.verificationId,confirm:O=>_n(w,E.confirm(O))}})).apply(this,arguments)}class ms{constructor(C,E){this.resolver=E,this.auth=function si(w){return w.wrapped()}(C)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(C){return _n(Nt(this.auth),this.resolver.resolveSignIn(C))}}class Xn{constructor(C){this._delegate=C,this.multiFactor=k.at(C)}static getOrCreate(C){return Xn.USER_MAP.has(C)||Xn.USER_MAP.set(C,new Xn(C)),Xn.USER_MAP.get(C)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(C){return this._delegate.getIdTokenResult(C)}getIdToken(C){return this._delegate.getIdToken(C)}linkAndRetrieveDataWithCredential(C){return this.linkWithCredential(C)}linkWithCredential(C){var E=this;return(0,b.Z)(function*(){return _n(E.auth,k.a2(E._delegate,C))})()}linkWithPhoneNumber(C,E){var O=this;return(0,b.Z)(function*(){return gs(O.auth,k.l(O._delegate,C,E))})()}linkWithPopup(C){var E=this;return(0,b.Z)(function*(){return _n(E.auth,k.d(E._delegate,C,Ir))})()}linkWithRedirect(C){var E=this;return(0,b.Z)(function*(){return yield ps(k.aJ(E.auth)),k.g(E._delegate,C,Ir)})()}reauthenticateAndRetrieveDataWithCredential(C){return this.reauthenticateWithCredential(C)}reauthenticateWithCredential(C){var E=this;return(0,b.Z)(function*(){return _n(E.auth,k.a3(E._delegate,C))})()}reauthenticateWithPhoneNumber(C,E){return gs(this.auth,k.r(this._delegate,C,E))}reauthenticateWithPopup(C){return _n(this.auth,k.e(this._delegate,C,Ir))}reauthenticateWithRedirect(C){var E=this;return(0,b.Z)(function*(){return yield ps(k.aJ(E.auth)),k.h(E._delegate,C,Ir)})()}sendEmailVerification(C){return k.ag(this._delegate,C)}unlink(C){var E=this;return(0,b.Z)(function*(){return yield k.ap(E._delegate,C),E})()}updateEmail(C){return k.al(this._delegate,C)}updatePassword(C){return k.am(this._delegate,C)}updatePhoneNumber(C){return k.u(this._delegate,C)}updateProfile(C){return k.ak(this._delegate,C)}verifyBeforeUpdateEmail(C,E){return k.ah(this._delegate,C,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xn.USER_MAP=new WeakMap;const zn=k.aC;let xr=(()=>{class w{constructor(E,O){if(this.app=E,O.isInitialized())return this._delegate=O.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=E.options;zn(B,"invalid-api-key",{appName:E.name}),zn(B,"invalid-api-key",{appName:E.name});const Te=typeof window<"u"?Ir:void 0;this._delegate=O.initialize({options:{persistence:nl(B,E.name),popupRedirectResolver:Te}}),this._delegate._updateErrorMap(k.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,O){k.K(this._delegate,E,O)}applyActionCode(E){return k.a7(this._delegate,E)}checkActionCode(E){return k.a8(this._delegate,E)}confirmPasswordReset(E,O){return k.a6(this._delegate,E,O)}createUserWithEmailAndPassword(E,O){var B=this;return(0,b.Z)(function*(){return _n(B._delegate,k.aa(B._delegate,E,O))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return k.af(this._delegate,E)}isSignInWithEmailLink(E){return k.ad(this._delegate,E)}getRedirectResult(){var E=this;return(0,b.Z)(function*(){zn(Yn(),E._delegate,"operation-not-supported-in-this-environment");const O=yield k.j(E._delegate,Ir);return O?_n(E._delegate,Promise.resolve(O)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function z(w,C){(0,k.aJ)(w)._logFramework(C)}(this._delegate,E)}onAuthStateChanged(E,O,B){const{next:Te,error:ge,complete:$e}=Di(E,O,B);return this._delegate.onAuthStateChanged(Te,ge,$e)}onIdTokenChanged(E,O,B){const{next:Te,error:ge,complete:$e}=Di(E,O,B);return this._delegate.onIdTokenChanged(Te,ge,$e)}sendSignInLinkToEmail(E,O){return k.ac(this._delegate,E,O)}sendPasswordResetEmail(E,O){return k.a5(this._delegate,E,O||void 0)}setPersistence(E){var O=this;return(0,b.Z)(function*(){let B;switch(function fs(w,C){Ls(Object.values(ft).includes(C),w,"invalid-persistence-type"),(0,Se.b$)()?Ls(C!==ft.SESSION,w,"unsupported-persistence-type"):(0,Se.UG)()?Ls(C===ft.NONE,w,"unsupported-persistence-type"):Hn()?Ls(C===ft.NONE||C===ft.LOCAL&&(0,Se.hl)(),w,"unsupported-persistence-type"):Ls(C===ft.NONE||un(),w,"unsupported-persistence-type")}(O._delegate,E),E){case ft.SESSION:B=k.a;break;case ft.LOCAL:B=(yield k.aE(k.i)._isAvailable())?k.i:k.b;break;case ft.NONE:B=k.U;break;default:return k.ax("argument-error",{appName:O._delegate.name})}return O._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return _n(this._delegate,k.a0(this._delegate))}signInWithCredential(E){return _n(this._delegate,k.a1(this._delegate,E))}signInWithCustomToken(E){return _n(this._delegate,k.a4(this._delegate,E))}signInWithEmailAndPassword(E,O){return _n(this._delegate,k.ab(this._delegate,E,O))}signInWithEmailLink(E,O){return _n(this._delegate,k.ae(this._delegate,E,O))}signInWithPhoneNumber(E,O){return gs(this._delegate,k.s(this._delegate,E,O))}signInWithPopup(E){var O=this;return(0,b.Z)(function*(){return zn(Yn(),O._delegate,"operation-not-supported-in-this-environment"),_n(O._delegate,k.c(O._delegate,E,Ir))})()}signInWithRedirect(E){var O=this;return(0,b.Z)(function*(){return zn(Yn(),O._delegate,"operation-not-supported-in-this-environment"),yield ps(O._delegate),k.f(O._delegate,E,Ir)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return k.a9(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=ft,w})();function Di(w,C,E){let O=w;"function"!=typeof w&&({next:O,error:C,complete:E}=w);const B=O;return{next:ge=>B(ge&&Xn.getOrCreate(ge)),error:C,complete:E}}function nl(w,C){const E=function Ci(w,C){const E=bi();if(!E)return[];const O=k.aF(Vs,w,C);switch(E.getItem(O)){case ft.NONE:return[k.U];case ft.LOCAL:return[k.i,k.a];case ft.SESSION:return[k.a];default:return[]}}(w,C);if(typeof self<"u"&&!E.includes(k.i)&&E.push(k.i),typeof window<"u")for(const O of[k.b,k.a])E.includes(O)||E.push(O);return E.includes(k.U)||E.push(k.U),E}class Po{constructor(){this.providerId="phone",this._delegate=new k.P(Nt(q.Z.auth()))}static credential(C,E){return k.P.credential(C,E)}verifyPhoneNumber(C,E){return this._delegate.verifyPhoneNumber(C,E)}unwrap(){return this._delegate}}Po.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Po.PROVIDER_ID=k.P.PROVIDER_ID;const da=k.aC;class Bs{constructor(C,E,O=q.Z.app()){var B;da(null===(B=O.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:O.name}),this._delegate=new k.R(O.auth(),C,E),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function R(w){w.INTERNAL.registerComponent(new Mn.wA("auth-compat",C=>{const E=C.getProvider("app-compat").getImmediate(),O=C.getProvider("auth");return new xr(E,O)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.V,FacebookAuthProvider:k.W,GithubAuthProvider:k.Y,GoogleAuthProvider:k.X,OAuthProvider:k.Z,SAMLAuthProvider:k._,PhoneAuthProvider:Po,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Bs,TwitterAuthProvider:k.$,Auth:xr,AuthCredential:k.L,Error:Se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.4.9")}(q.Z)},861:(Os,Qn,Ve)=>{function b(k,Se,Rt,an,Mn,qt,Ct){try{var Q=k[qt](Ct),se=Q.value}catch(Ae){return void Rt(Ae)}Q.done?Se(se):Promise.resolve(se).then(an,Mn)}function q(k){return function(){var Se=this,Rt=arguments;return new Promise(function(an,Mn){var qt=k.apply(Se,Rt);function Ct(se){b(qt,an,Mn,Ct,Q,"next",se)}function Q(se){b(qt,an,Mn,Ct,Q,"throw",se)}Ct(void 0)})}}Ve.d(Qn,{Z:()=>q})},582:(Os,Qn,Ve)=>{function Se($,W){var z={};for(var U in $)Object.prototype.hasOwnProperty.call($,U)&&W.indexOf(U)<0&&(z[U]=$[U]);if(null!=$&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(U=Object.getOwnPropertySymbols($);Z<U.length;Z++)W.indexOf(U[Z])<0&&Object.prototype.propertyIsEnumerable.call($,U[Z])&&(z[U[Z]]=$[U[Z]])}return z}function Ae($,W,z,U){return new(z||(z=Promise))(function(K,ce){function ct(It){try{Me(U.next(It))}catch(ln){ce(ln)}}function ue(It){try{Me(U.throw(It))}catch(ln){ce(ln)}}function Me(It){It.done?K(It.value):function Z(K){return K instanceof z?K:new z(function(ce){ce(K)})}(It.value).then(ct,ue)}Me((U=U.apply($,W||[])).next())})}function ht($){return this instanceof ht?(this.v=$,this):new ht($)}function $t($,W,z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,U=z.apply($,W||[]),K=[];return Z={},ce("next"),ce("throw"),ce("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function ce(Kt){U[Kt]&&(Z[Kt]=function(un){return new Promise(function(Hn,Yn){K.push([Kt,un,Hn,Yn])>1||ct(Kt,un)})})}function ct(Kt,un){try{!function ue(Kt){Kt.value instanceof ht?Promise.resolve(Kt.value.v).then(Me,It):ln(K[0][2],Kt)}(U[Kt](un))}catch(Hn){ln(K[0][3],Hn)}}function Me(Kt){ct("next",Kt)}function It(Kt){ct("throw",Kt)}function ln(Kt,un){Kt(un),K.shift(),K.length&&ct(K[0][0],K[0][1])}}function jn($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z,W=$[Symbol.asyncIterator];return W?W.call($):($=function _t($){var W="function"==typeof Symbol&&Symbol.iterator,z=W&&$[W],U=0;if(z)return z.call($);if($&&"number"==typeof $.length)return{next:function(){return $&&U>=$.length&&($=void 0),{value:$&&$[U++],done:!$}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}($),z={},U("next"),U("throw"),U("return"),z[Symbol.asyncIterator]=function(){return this},z);function U(K){z[K]=$[K]&&function(ce){return new Promise(function(ct,ue){!function Z(K,ce,ct,ue){Promise.resolve(ue).then(function(Me){K({value:Me,done:ct})},ce)}(ct,ue,(ce=$[K](ce)).done,ce.value)})}}}Ve.d(Qn,{FC:()=>$t,KL:()=>jn,_T:()=>Se,mG:()=>Ae,qq:()=>ht}),"function"==typeof SuppressedError&&SuppressedError}},Os=>{Os(Os.s=918)}]);